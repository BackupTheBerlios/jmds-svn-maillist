From jguers at free.fr  Sun Feb  6 17:13:43 2005
From: jguers at free.fr (=?iso-8859-1?Q?GUERS_J=E9r=F4me?=)
Date: Sun, 6 Feb 2005 17:13:43 +0100
Subject: [Jmds-svn] CDC - Specs
Message-ID: <20050206170040.237A514B738@ioskeha.hittite.isp.9tel.net>

Salut les gens
 
Je voudrais pas faire mon chiant ? rappeler tout le monde ? l'ordre un we ou
tout le monde n'a plus rien envie de faire, mais il me semble que nous
avions convenu de faire le CDC ce we ...
 
Vu ou nous en sommes au niveau date (le projet est ? rendre dans un peu plus
de trois semaines), ce n'est m?me plus un CDC qu'il nous faut faire, mais
des specs de fonctionnement => comme ma partie ?tait assez courte, j'ai fait
?galement un sh?ma g?n?ral de fonctionnement.
 
Comme vous pourrez le voir, j'ai chang? un peu le fonctionnement de la s?cu.
En effet, dans la configuration fix?e, il nous ?tait impossible d'identifier
que la r?ponse venait bien du serveur. J'ai donc inclu une cl? de session
que le client envoie au serveur au cours de la demande. Ceci permet deux
choses :
- authentification du serveur pour la r?ponse : en effet, seul le serveur a
pu r?cup?rer la cl? de session normalement => c'est le seul ? pouvoir
l'utiliser pour crypter la r?ponse
- simplification du cryptage par la cl? utilisateur : la cl? utilisateur
crypte l'heure d'envoi ET la cl? de session qui est g?n?r?e de fa?on
al?atoire => il n'est plus possible de retrouver la cl? si l'on connait
l'algorythme de cryptage en comparant avec l'heure d'envoie => il est
possible (et m?me n?cessaire pour transmettre la cl? de session) d'utiliser
un cryptage inversible => on n'a plus qu'une m?thode de cryptage ?
impl?menter
 
Vous trouverez ci-joint le sh?ma de fonctionnement.
Vous trouverez ce que j'ai commenc? ? r?diger sur :
http://jmds.berlios.de/index.php/R%E9daction_des_specs
 
Pour l'heure, il faut que je pr?pare (en plus ou moins bon chef de projet)
le plan de guerre de FlexiTime pour la phase 6.
A demain
GG
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050206/e9749e3d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: impleSecu.png
Type: image/png
Size: 61320 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050206/e9749e3d/attachment.png>

From denis.bardin at tiscali.fr  Wed Feb  9 00:52:23 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Wed, 9 Feb 2005 00:52:23 +0100
Subject: [Jmds-svn] JMDS : CDC
Message-ID: <20050208235227.719571734AC@postfix3-1.free.fr>

Bonsoir tout le monde !!!!

 

Compte tenu de l?intervention de Duris et Revuz vendredi dernier il est
apparu que le GL n??tait pas ? consid?rer comme une priorit? !!!!

 

Il convient donc de ne pas se laisser d?passer
. Pour cette raison je vous
demanderai de bien vouloir livrer votre partie du CDC avant demain soir. Je
me suis mis en coup de pied au cul aujourd?hui car GG ?tait le seul ?
l?avoir fait. Je sais que je suis un peu tirant mais c pas si long que ?a.
Moi j?ai boucl? ?a en une heure donc ?a devrait ?tre de m?me pour vous
(surtout que GG a fait du travail en plus ;-) )

 

Pour vous aider j?ai cr?? un document sous le repository (dans
team/docs/CDC) ainsi vous pouvez y int?gr? directement votre partie


 

Je compte donc sur vous pour trouver demain une heure dans la journ?e
 Ca
fera une petite pause pour le GL ;-) De tout fa?on avec le temps que l?on a
passer sur le GL une heure ne plus ou en moins ?a ne change pas grand-chose
(c ce que j?ai pu voir cette aprem).

 

Demain soir je ferai donc (ainsi que vous tous) une revue rapide du document
afin de le finaliser et de la donner au prof jeudi dernier d?lai.

 

Sinon, je vais r?fl?chir ? une organisation est une division des t?ches afin
de mieux suivre l?avancement du projet
 on repart dessus pleine bourre d?s
jeudi (surtout qu?il y a plein d?autre chose ? cot?). Il vous sera donc
demander de vous organiser suivant vos t?ches et de notifier leurs
avancement sur le WIKI afin d?assurer un suivi permanent.

 

Sur ce je vous laisse et que JDMS soit !!!!!!

 

Bonne soir?e,

 

Denis

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050209/915220d5/attachment.html>

From jguers at free.fr  Fri Feb 11 01:38:12 2005
From: jguers at free.fr (=?iso-8859-1?Q?GUERS_J=E9r=F4me?=)
Date: Fri, 11 Feb 2005 01:38:12 +0100
Subject: [Jmds-svn] Victoire
Message-ID: <20050211012558.A5C2314B5C6@ioskeha.hittite.isp.9tel.net>

Houra, apr?s quelques soir?es de gal?re, la carte est vaincue !! J'ai r?ussi
ce soir ? faire fonctionner une petite appli que j'ai cod? du d?but ? la in.
Je vous rassure, il n'y a pa de grande gloire puisque l'applet ne fait qu'un
pseudo ping :
- il y a une requ?te pour lu envoyer un message
- il y a une seconde requ?te qui retourne le message re?u !
 
C'est minable, mais c'est un d?but. L'?tape 2 est donc finie je pense, la
communication avec la carte ?tablie. Il nous faut maintenant se pencher sur
le codage !!!
 
Le code est dispo sur le SVN dans mon r?pertoire. Un d?but de doc est dispo
dans team/Docs. Je la compl?terais demain, de jour...
 
@ demain pour de nouvelles aventures
GG
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050211/05be43bf/attachment.html>

From denis.bardin at tiscali.fr  Tue Feb 15 22:40:32 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Tue, 15 Feb 2005 22:40:32 +0100
Subject: [Jmds-svn] CDC Projet CORBA IR3
Message-ID: <20050215214042.78D392BEBFE@postfix4-2.free.fr>

Bonsoir monsieur, 

 

Nous vous faisons suivre comme il ?tait convenu le cahier des charges
concernant notre projet de CORBA sur les JavaCARDs.

 

En esp?rant qu?il corresponde ? vos attentes.

Cordialement,

 

L??quipe JMDS

 

GUINCHARD S?bastien,

GEFFROY Mathieu,

GUERS J?r?me,

BARDIN Denis,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050215/2d08e8af/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: JMDS_CDC.doc
Type: application/msword
Size: 150016 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050215/2d08e8af/attachment.doc>

From sguincha at sheep.berlios.de  Fri Feb 18 20:46:09 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 18 Feb 2005 20:46:09 +0100
Subject: [Jmds-svn] r10 - in members/jguers/TestCard/src/de/berlios/jmds: . applet
Message-ID: <200502181946.j1IJk9fH015561@sheep.berlios.de>

Author: sguincha
Date: 2005-02-18 20:46:08 +0100 (Fri, 18 Feb 2005)
New Revision: 10

Added:
   members/jguers/TestCard/src/de/berlios/jmds/applet/
   members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java
Log:


Added: members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java	2005-02-15 21:32:21 UTC (rev 9)
+++ members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java	2005-02-18 19:46:08 UTC (rev 10)
@@ -0,0 +1,79 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.applet;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+
+/**
+ * Premi?re classe de test d'une applet JavaCard Renvoie juste les donn?es
+ * envoy?es
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class Ping extends Applet {
+
+    private final static byte CLA_PING = (byte) 0x80;
+    private final static byte ECHO_REQUEST = (byte) 0x10;
+    private final static byte ECHO_REPLY = (byte) 0x30;
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte messLength;
+
+    /**
+     * Constructeur par d?faut
+     */
+    protected Ping() {
+        buffer = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        register();
+    }
+
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new Ping();
+    }
+
+    /**
+     * M?thide appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param arg0
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        byte[] tmpBuffer = apdu.getBuffer();
+
+        // CLA ? 0x80
+        if (tmpBuffer[ISO7816.OFFSET_CLA] == CLA_PING) {
+            switch (tmpBuffer[ISO7816.OFFSET_INS]) {
+            case ECHO_REQUEST:
+                messLength = (byte)(apdu.setIncomingAndReceive());
+//                if ((byteRead > (byte) BUFFER_LENGTH) || (byteRead <= (byte) 0))
+//                    ISOException.throwIt(ISO7816.SW_WRONG_DATA);
+                for (byte i = (byte) 0; i < messLength; i++) {
+                    buffer[i] = tmpBuffer[ISO7816.OFFSET_CDATA + i];
+                }
+                break;
+
+            case ECHO_REPLY:
+                // Le = taille de la r?ponse attendue
+                short Le = apdu.setOutgoing();
+                // Verification que Le >= Lc (taille des donn?es envoy?es)
+                if (Le < messLength)
+                    ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+                apdu.setOutgoingLength((short) messLength);
+                apdu.sendBytesLong(buffer, (short) 0, (short) messLength);
+                break;
+            }
+        }
+    }
+}



From sguincha at sheep.berlios.de  Fri Feb 18 20:46:45 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 18 Feb 2005 20:46:45 +0100
Subject: [Jmds-svn] r11 - in members/jguers/TestCard/src/de/berlios/jmds: . client client/core ior server server/core
Message-ID: <200502181946.j1IJkjSn015596@sheep.berlios.de>

Author: sguincha
Date: 2005-02-18 20:46:43 +0100 (Fri, 18 Feb 2005)
New Revision: 11

Added:
   members/jguers/TestCard/src/de/berlios/jmds/client/
   members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java
   members/jguers/TestCard/src/de/berlios/jmds/client/core/
   members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java
   members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientORBInitializer.java
   members/jguers/TestCard/src/de/berlios/jmds/ior/
   members/jguers/TestCard/src/de/berlios/jmds/ior/IORInter.java
   members/jguers/TestCard/src/de/berlios/jmds/server/
   members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java
   members/jguers/TestCard/src/de/berlios/jmds/server/core/
   members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java
   members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java
   members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerORBInitializer.java
Log:


Added: members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,92 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package de.berlios.jmds.client;
+
+import java.io.*;
+import java.util.Date;
+import java.util.Properties;
+
+import org.omg.CORBA.ORB;
+
+import fr.umlv.ir3.corba.sguincha.td2.Forum;
+import fr.umlv.ir3.corba.sguincha.td2.ForumHelper;
+import fr.umlv.ir3.corba.sguincha.td2.Message;
+
+
+/**
+ * @author jguers
+ */
+public class ForumClient
+{
+
+	public static void main (String [] args) throws IOException
+	{
+
+		/* initialisation de l'ORB */
+		Properties prop = new Properties ();
+		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.core.MonClientORBInitializer" , "");
+		ORB orb = ORB.init (args , prop);
+		/* R?cup?ration de l'id de l'objet servant */
+		BufferedReader buffer = new BufferedReader (new FileReader ("ObjectRef"));
+		String ior = buffer.readLine ();
+
+		BufferedReader in = new BufferedReader (new InputStreamReader (System.in));
+
+		/* Cr?ation d'un objet Forum */
+		Forum forumProxy = ForumHelper.narrow (orb.string_to_object (ior));
+		while (true)
+		{
+			System.out.println ("Que voulez-vous faire ?");
+			System.out.println ("a - ajouter un message");
+			System.out.println ("v - voir les messages");
+			System.out.println ("l - lire un message");
+			System.out.println ("r - retirer un message");
+
+			int choix = System.in.read ();
+			in.readLine ();
+			switch (choix)
+			{
+				case 'a' :
+				{
+					System.out.print ("Votre nom: ");
+					String auth = in.readLine ();
+					System.out.print ("Titre du message: ");
+					String title = in.readLine ();
+					System.out.print ("Message: ");
+					String mess = in.readLine ();
+					forumProxy.postMessage (new Message (title, auth, (new Date ()).toString (), mess));
+				}
+					break;
+
+				case 'l' :
+				{
+					System.out.print ("Titre du message: ");
+					String title = in.readLine ();
+					Message m = forumProxy.getMessage (title);
+					System.out.println (m.author + " a ?crit ? " + m.date.toString ());
+					System.out.println ("Titre: " + m.title);
+					System.out.println (m.body + "\n");
+				}
+					break;
+
+				case 'r' :
+				{
+					System.out.print ("Titre du message: ");
+					String title = in.readLine ();
+				}
+					break;
+
+				case 'v' :
+				{
+					Message [] tab = forumProxy.getMessages ();
+
+					for (int i = 0; i < tab.length; i++)
+					{
+						System.out.println (tab [i].author + "\t" + tab [i].date + "\t" + tab [i].title + "\n");
+					}
+				}
+			}
+		}
+	}
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,87 @@
+/*
+ * Created on 18 f?vr. 2005 go to Window - Preferences - Java - Code Style -
+ * Code Templates
+ */
+package de.berlios.jmds.client.core;
+
+import org.omg.IOP.ServiceContext;
+import org.omg.PortableInterceptor.ClientRequestInfo;
+import org.omg.PortableInterceptor.ClientRequestInterceptor;
+import org.omg.PortableInterceptor.ForwardRequest;
+
+import com.sun.corba.se.spi.ior.iiop.GIOPVersion;
+
+
+/**
+ * @author sguincha go to Window - Preferences - Java - Code Style - Code
+ *         Templates
+ */
+public class ClientInter extends org.omg.CORBA.LocalObject implements ClientRequestInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void send_request (ClientRequestInfo ri) throws ForwardRequest
+	{
+		GIOPVersion version;
+		ServiceContext sc = new ServiceContext ();
+		sc.context_data = new byte [65];
+
+		ri.add_request_service_context (sc , true);
+		System.out.println ("ClientInter.send request: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_poll(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void send_poll (ClientRequestInfo ri)
+	{
+		System.out.println ("ClientInter.send poll: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_reply(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void receive_reply (ClientRequestInfo ri)
+	{
+		System.out.println ("ClientInter.receive reply: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_exception(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void receive_exception (ClientRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ClientInter.receive exception: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_other(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void receive_other (ClientRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ClientInter.receive other: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "Mon intercepteur";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+	}
+
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientORBInitializer.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientORBInitializer.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientORBInitializer.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,52 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.client.core;
+
+import org.omg.CORBA.LocalObject;
+import org.omg.PortableInterceptor.ORBInitInfo;
+import org.omg.PortableInterceptor.ORBInitializer;
+import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
+
+
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class ClientORBInitializer extends LocalObject implements ORBInitializer
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void pre_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.pre_init: ORB ID: " + info);
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#post_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void post_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.post_init: ORB ID: " + info);
+		ClientInter client = new ClientInter ();
+		try
+		{
+			info.add_client_request_interceptor (client);
+		}
+		catch (DuplicateName e)
+		{
+			e.printStackTrace ();
+		}
+	}
+
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/ior/IORInter.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/ior/IORInter.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/ior/IORInter.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,49 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.ior;
+
+import org.omg.PortableInterceptor.IORInfo;
+import org.omg.PortableInterceptor.IORInterceptor;
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class IORInter extends org.omg.CORBA.LocalObject implements IORInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.IORInterceptorOperations#establish_components(org.omg.PortableInterceptor.IORInfo)
+	 */
+	public void establish_components (IORInfo info)
+	{
+		// TODO Auto-generated method stub
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "My IOR Interceptor";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+		// TODO Auto-generated method stub
+
+	}
+
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,57 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package de.berlios.jmds.server;
+
+import java.io.*;
+import java.util.Properties;
+
+import org.omg.CORBA.*;
+import org.omg.CORBA.Object;
+import org.omg.CORBA.ORBPackage.InvalidName;
+import org.omg.PortableServer.*;
+import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
+import org.omg.PortableServer.POAPackage.*;
+
+import de.berlios.jmds.server.core.ForumImpl;
+
+
+
+/**
+ * @author jguers
+ */
+public class ForumServer
+{
+
+	public static void main (String [] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive
+	{
+		/* Initialisation de l'ORB */
+		Properties prop = new Properties ();
+		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.core.MonServerORBInitializer" , "");
+		ORB orb = ORB.init (args , prop);
+
+		/* R?cup?ration de r?f?rence de l'adaptateur d'objet racine */
+		POA rootPOA = POAHelper.narrow (orb.resolve_initial_references ("RootPOA"));
+
+		/* Cr?ation de l'objet SERVANT */
+		ForumImpl forum = new ForumImpl ("Forum de Test", "GG");
+
+		/* Enregistrement et activation de l'objet servant dans le POA */
+		byte [] objectID = rootPOA.activate_object (forum);
+
+		/* R?cup?ration de la r?f?rence du servant */
+		Object obj = rootPOA.id_to_reference (objectID);
+
+		/* Enregistrement de l'ID de l'objet dans un fichier */
+		FileOutputStream file = new FileOutputStream ("ObjectRef");
+		file.write (orb.object_to_string (obj).getBytes ());
+
+		/* Activation du POA */
+		rootPOA.the_POAManager ().activate ();
+
+		/* Lancement de l'ORB */
+		System.out.println ("Server started");
+		orb.run ();
+
+	}
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,65 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package de.berlios.jmds.server.core;
+
+import java.util.concurrent.ConcurrentHashMap;
+
+import fr.umlv.ir3.corba.sguincha.td2.ForumPOA;
+import fr.umlv.ir3.corba.sguincha.td2.Message;
+
+
+/**
+ * @author sguinchard
+ */
+public class ForumImpl extends ForumPOA
+{
+
+	private String				moderator;
+	private String				theme;
+	private ConcurrentHashMap	discussion;
+
+	public ForumImpl (String theme, String moderator)
+	{
+		this.theme = theme;
+		this.moderator = moderator;
+		discussion = new ConcurrentHashMap ();
+	}
+
+	public String theme ()
+	{
+		return theme;
+	}
+
+	public String moderator ()
+	{
+		return moderator;
+	}
+
+	public boolean postMessage (Message m)
+	{
+		if (discussion.putIfAbsent (theme , m) == null)
+			return true;
+		return false;
+	}
+
+	public Message getMessage (String title)
+	{
+		return (Message) discussion.get (title);
+	}
+
+	public Message [] getMessages ()
+	{
+		return (Message []) discussion.values ().toArray (new Message [discussion.size ()]);
+	}
+
+	public boolean removeMessage (String title)
+	{
+		if (discussion.containsKey (title))
+		{
+			discussion.remove (title);
+			return true;
+		}
+		return false;
+	}
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,82 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.server.core;
+
+import org.omg.PortableInterceptor.ForwardRequest;
+import org.omg.PortableInterceptor.ServerRequestInfo;
+import org.omg.PortableInterceptor.ServerRequestInterceptor;
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class ServerInter extends org.omg.CORBA.LocalObject implements ServerRequestInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request_service_contexts(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void receive_request (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.receive request: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_reply(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_reply (ServerRequestInfo ri)
+	{
+		System.out.println ("ServerInter.send_reply: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_exception(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_exception (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.send_exception: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_other(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_other (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.send_other: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "Mon Intercepteur Serveur";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+	}
+
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerORBInitializer.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerORBInitializer.java	2005-02-18 19:46:08 UTC (rev 10)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerORBInitializer.java	2005-02-18 19:46:43 UTC (rev 11)
@@ -0,0 +1,56 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.server.core;
+
+import org.omg.CORBA.LocalObject;
+import org.omg.PortableInterceptor.ORBInitInfo;
+import org.omg.PortableInterceptor.ORBInitializer;
+import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
+
+
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class ServerORBInitializer extends LocalObject implements ORBInitializer
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void pre_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.pre_init: ORB ID: " + info);
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#post_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void post_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.post_init: ORB ID: " + info);
+		// ClientInter client = new ClientInter();
+		ServerInter server = new ServerInter ();
+		// IORInter ior = new IORInter();
+		try
+		{
+			// info.add_client_request_interceptor(client);
+			info.add_server_request_interceptor (server);
+			// info.add_ior_interceptor(ior);
+		}
+		catch (DuplicateName e)
+		{
+			e.printStackTrace ();
+		}
+	}
+
+}



From sguincha at sheep.berlios.de  Fri Feb 18 20:50:56 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 18 Feb 2005 20:50:56 +0100
Subject: [Jmds-svn] r12 - in trunk: . .settings generated-src generated-src/fr generated-src/fr/umlv generated-src/fr/umlv/ir3 generated-src/fr/umlv/ir3/corba generated-src/fr/umlv/ir3/corba/sguincha generated-src/fr/umlv/ir3/corba/sguincha/td2 lib test test/de test/de/berlios test/de/berlios/jmds
Message-ID: <200502181950.j1IJouHX015777@sheep.berlios.de>

Author: sguincha
Date: 2005-02-18 20:50:55 +0100 (Fri, 18 Feb 2005)
New Revision: 12

Added:
   trunk/.classpath
   trunk/.project
   trunk/.settings/
   trunk/.settings/org.eclipse.jdt.core.prefs
   trunk/ObjectRef
   trunk/convention_codage.xml
   trunk/convention_template.xml
   trunk/generated-src/fr/
   trunk/generated-src/fr/umlv/
   trunk/generated-src/fr/umlv/ir3/
   trunk/generated-src/fr/umlv/ir3/corba/
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Forum.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java
   trunk/lib/
   trunk/lib/javacardframework.jar
   trunk/test/de/
   trunk/test/de/berlios/
   trunk/test/de/berlios/jmds/
   trunk/test/de/berlios/jmds/test/
Log:


Added: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/.classpath	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<classpath>
+	<classpathentry kind="src" path="src"/>
+	<classpathentry kind="src" path="test"/>
+	<classpathentry kind="src" path="generated-src"/>
+	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
+	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
+	<classpathentry kind="lib" path="C:/Program Files/Schlumberger/Smart Cards and Terminals/Cyberflex Access Kits/v4/Middleware Interfaces/jiop/slbJIop.jar"/>
+	<classpathentry kind="output" path="classes"/>
+</classpath>

Added: trunk/.project
===================================================================
--- trunk/.project	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/.project	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<projectDescription>
+	<name>JMDS</name>
+	<comment></comment>
+	<projects>
+	</projects>
+	<buildSpec>
+		<buildCommand>
+			<name>org.eclipse.jdt.core.javabuilder</name>
+			<arguments>
+			</arguments>
+		</buildCommand>
+	</buildSpec>
+	<natures>
+		<nature>org.eclipse.jdt.core.javanature</nature>
+	</natures>
+</projectDescription>

Added: trunk/.settings/org.eclipse.jdt.core.prefs
===================================================================
--- trunk/.settings/org.eclipse.jdt.core.prefs	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/.settings/org.eclipse.jdt.core.prefs	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,12 @@
+#Fri Feb 18 20:20:20 CET 2005
+org.eclipse.jdt.core.compiler.debug.localVariable=generate
+org.eclipse.jdt.core.compiler.compliance=1.3
+org.eclipse.jdt.core.compiler.codegen.unusedLocal=preserve
+org.eclipse.jdt.core.compiler.debug.sourceFile=generate
+org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.1
+org.eclipse.jdt.core.compiler.problem.enumIdentifier=ignore
+eclipse.preferences.version=1
+org.eclipse.jdt.core.compiler.debug.lineNumber=generate
+org.eclipse.jdt.core.compiler.codegen.inlineJsrBytecode=enabled
+org.eclipse.jdt.core.compiler.source=1.3
+org.eclipse.jdt.core.compiler.problem.assertIdentifier=ignore

Added: trunk/ObjectRef
===================================================================
--- trunk/ObjectRef	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/ObjectRef	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1 @@
+IOR:000000000000001249444c3a7464322f466f72756d3a312e30000000000000010000000000000086000102000000000e38342e39392e3232322e32353200101200000031afabcb000000002026cbea9200000001000000000000000100000008526f6f74504f410000000008000000010000000014000000000000020000000100000020000000000001000100000002050100010001002000010109000000010001010000000026000000020002
\ No newline at end of file

Added: trunk/convention_codage.xml
===================================================================
--- trunk/convention_codage.xml	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/convention_codage.xml	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,186 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<profiles version="6">
+<profile name="JMDS" version="6">
+<setting id="comment_clear_blank_lines" value="true"/>
+<setting id="comment_format_comments" value="true"/>
+<setting id="comment_format_header" value="true"/>
+<setting id="comment_format_html" value="true"/>
+<setting id="comment_format_source_code" value="true"/>
+<setting id="comment_indent_parameter_description" value="true"/>
+<setting id="comment_indent_root_tags" value="true"/>
+<setting id="comment_line_length" value="80"/>
+<setting id="comment_new_line_for_parameter" value="false"/>
+<setting id="comment_separate_root_tags" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.align_type_members_on_columns" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_allocation_expression" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_explicit_constructor_call" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_method_invocation" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_qualified_allocation_expression" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_binary_expression" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_compact_if" value="52"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_conditional_expression" value="48"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_expressions_in_array_initializer" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_multiple_fields" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_constructor_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_method_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_selector_in_method_invocation" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_superclass_in_type_declaration" value="64"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_type_declaration" value="64"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_constructor_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_method_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_imports" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_package" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_field" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_first_class_body_declaration" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_imports" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_member_type" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_method" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_new_chunk" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_package" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_anonymous_type_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_array_initializer" value="end_of_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block_in_case" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_constructor_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_method_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_switch" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_type_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.compact_else_if" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.continuation_indentation" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.continuation_indentation_for_array_initializer" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.format_guardian_clause_on_one_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_type_header" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_breaks_compare_to_cases" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_block" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_body" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_cases" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_switch" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_after_opening_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_catch_in_try_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_closing_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_else_in_if_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_finally_in_try_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_while_in_do_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_anonymous_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_block" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_method_body" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_assignment_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_binary_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_brace_in_block" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_paren_in_cast" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_assert" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_case" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_labeled_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_allocation_expression" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_array_initializer" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_parameters" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_throws" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_explicitconstructorcall_arguments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_increments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_inits" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_parameters" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_throws" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_invocation_arguments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_field_declarations" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_local_declarations" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_superinterfaces" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_reference" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_cast" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_catch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_constructor_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_for" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_if" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_invocation" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_parenthesized_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_switch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_synchronized" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_while" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_postfix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_prefix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_question_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_semicolon_in_for" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_unary_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_assignment_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_binary_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_reference" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_cast" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_catch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_constructor_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_for" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_if" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_invocation" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_parenthesized_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_switch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_synchronized" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_while" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_assert" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_case" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_default" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_labeled_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_parameters" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_throws" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_explicitconstructorcall_arguments" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_increments" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_inits" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_parameters" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_throws" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_invocation_arguments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_field_declarations" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_local_declarations" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_superinterfaces" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_anonymous_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_array_initializer" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_block" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_constructor_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_method_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_switch" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_allocation_expression" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_reference" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_type_reference" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_catch" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_constructor_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_for" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_if" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_invocation" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_parenthesized_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_switch" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_synchronized" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_while" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_postfix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_prefix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_question_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon_in_for" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_unary_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_brackets_in_array_type_reference" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_braces_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_brackets_in_array_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_constructor_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_invocation" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_else_statement_on_same_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_empty_array_initializer_on_one_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_imple_if_on_one_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_then_statement_on_same_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.lineSplit" value="500"/>
+<setting id="org.eclipse.jdt.core.formatter.number_of_blank_lines_at_beginning_of_method_body" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.tabulation.char" value="tab"/>
+<setting id="org.eclipse.jdt.core.formatter.tabulation.size" value="4"/>
+</profile>
+</profiles>

Added: trunk/convention_template.xml
===================================================================
--- trunk/convention_template.xml	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/convention_template.xml	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="UTF-8"?><templates><template context="gettercomment_context" deleted="false" description="Comment for getter method" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.gettercomment" name="gettercomment">/**
+ * @return Returns the ${bare_field_name}.
+ */</template><template context="settercomment_context" deleted="false" description="Comment for setter method" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.settercomment" name="settercomment">/**
+ * @param ${param} The ${bare_field_name} to set.
+ */</template><template context="constructorcomment_context" deleted="false" description="Comment for created constructors" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.constructorcomment" name="constructorcomment">/**
+ * ${tags}
+ */</template><template context="typecomment_context" deleted="false" description="Comment for created types" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.typecomment" name="typecomment">/**
+ * @author ${user}
+ *
+ */</template><template context="fieldcomment_context" deleted="false" description="Comment for fields" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.fieldcomment" name="fieldcomment">/**
+ * Comment for &lt;code&gt;${field}&lt;/code&gt;
+ */</template><template context="methodcomment_context" deleted="false" description="Comment for non-overriding methods" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.methodcomment" name="methodcomment">/**
+ * ${tags}
+ */</template><template context="overridecomment_context" deleted="false" description="Comment for overriding methods" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.overridecomment" name="overridecomment">/**
+ * ${see_to_overridden}
+ */</template><template context="newtype_context" deleted="false" description="Newly created files" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.newtype" name="newtype">/* 
+ * File    : ${file_name}
+ * Created : ${date}
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+
+${package_declaration}
+
+${typecomment}
+${type_declaration}</template><template context="catchblock_context" deleted="false" description="Code in new catch blocks" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.catchblock" name="catchblock">${exception_var}.printStackTrace();</template><template context="methodbody_context" deleted="false" description="Code in created method stubs" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.methodbody" name="methodbody">${body_statement}</template><template context="constructorbody_context" deleted="false" description="Code in created constructor stubs" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.constructorbody" name="constructorbody">${body_statement}</template><template context="getterbody_context" deleted="false" description="Code in created getters" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.getterbody" name="getterbody">return ${field};</template><template context="setterbody_context" deleted="false" description="Code in cr!
 eated setters" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.setterbody" name="setterbody">${field} = ${param};</template></templates>
\ No newline at end of file

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Forum.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Forum.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Forum.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,11 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/Forum.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public interface Forum extends ForumOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity
+{
+} // interface Forum

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,84 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+abstract public class ForumHelper
+{
+	private static String	_id	= "IDL:td2/Forum:1.0";
+
+	public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.sguincha.td2.Forum that)
+	{
+		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+		a.type (type ());
+		write (out , that);
+		a.read_value (out.create_input_stream () , type ());
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Forum extract (org.omg.CORBA.Any a)
+	{
+		return read (a.create_input_stream ());
+	}
+
+	private static org.omg.CORBA.TypeCode	__typeCode	= null;
+
+	synchronized public static org.omg.CORBA.TypeCode type ()
+	{
+		if (__typeCode == null)
+		{
+			__typeCode = org.omg.CORBA.ORB.init ().create_interface_tc (fr.umlv.ir3.corba.sguincha.td2.ForumHelper.id () , "Forum");
+		}
+		return __typeCode;
+	}
+
+	public static String id ()
+	{
+		return _id;
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Forum read (org.omg.CORBA.portable.InputStream istream)
+	{
+		return narrow (istream.read_Object (_ForumStub.class));
+	}
+
+	public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.sguincha.td2.Forum value)
+	{
+		ostream.write_Object ((org.omg.CORBA.Object) value);
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Forum narrow (org.omg.CORBA.Object obj)
+	{
+		if (obj == null)
+			return null;
+		else if (obj instanceof fr.umlv.ir3.corba.sguincha.td2.Forum)
+			return (fr.umlv.ir3.corba.sguincha.td2.Forum) obj;
+		else if (!obj._is_a (id ()))
+			throw new org.omg.CORBA.BAD_PARAM ();
+		else
+		{
+			org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+			fr.umlv.ir3.corba.sguincha.td2._ForumStub stub = new fr.umlv.ir3.corba.sguincha.td2._ForumStub ();
+			stub._set_delegate (delegate);
+			return stub;
+		}
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Forum unchecked_narrow (org.omg.CORBA.Object obj)
+	{
+		if (obj == null)
+			return null;
+		else if (obj instanceof fr.umlv.ir3.corba.sguincha.td2.Forum)
+			return (fr.umlv.ir3.corba.sguincha.td2.Forum) obj;
+		else
+		{
+			org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+			fr.umlv.ir3.corba.sguincha.td2._ForumStub stub = new fr.umlv.ir3.corba.sguincha.td2._ForumStub ();
+			stub._set_delegate (delegate);
+			return stub;
+		}
+	}
+
+}

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,37 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public final class ForumHolder implements org.omg.CORBA.portable.Streamable
+{
+	public fr.umlv.ir3.corba.sguincha.td2.Forum	value	= null;
+
+	public ForumHolder ()
+	{
+	}
+
+	public ForumHolder (fr.umlv.ir3.corba.sguincha.td2.Forum initialValue)
+	{
+		value = initialValue;
+	}
+
+	public void _read (org.omg.CORBA.portable.InputStream i)
+	{
+		value = fr.umlv.ir3.corba.sguincha.td2.ForumHelper.read (i);
+	}
+
+	public void _write (org.omg.CORBA.portable.OutputStream o)
+	{
+		fr.umlv.ir3.corba.sguincha.td2.ForumHelper.write (o , value);
+	}
+
+	public org.omg.CORBA.TypeCode _type ()
+	{
+		return fr.umlv.ir3.corba.sguincha.td2.ForumHelper.type ();
+	}
+
+}

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,22 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public interface ForumOperations
+{
+	String theme ();
+
+	String moderator ();
+
+	boolean postMessage (fr.umlv.ir3.corba.sguincha.td2.Message m);
+
+	fr.umlv.ir3.corba.sguincha.td2.Message getMessage (String title);
+
+	fr.umlv.ir3.corba.sguincha.td2.Message[] getMessages ();
+
+	boolean removeMessage (String title);
+} // interface ForumOperations

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,116 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public abstract class ForumPOA extends org.omg.PortableServer.Servant implements fr.umlv.ir3.corba.sguincha.td2.ForumOperations, org.omg.CORBA.portable.InvokeHandler
+{
+
+	// Constructors
+
+	private static java.util.Hashtable	_methods	= new java.util.Hashtable ();
+	static
+	{
+		_methods.put ("_get_theme" , new java.lang.Integer (0));
+		_methods.put ("_get_moderator" , new java.lang.Integer (1));
+		_methods.put ("postMessage" , new java.lang.Integer (2));
+		_methods.put ("getMessage" , new java.lang.Integer (3));
+		_methods.put ("getMessages" , new java.lang.Integer (4));
+		_methods.put ("removeMessage" , new java.lang.Integer (5));
+	}
+
+	public org.omg.CORBA.portable.OutputStream _invoke (String $method, org.omg.CORBA.portable.InputStream in, org.omg.CORBA.portable.ResponseHandler $rh)
+	{
+		org.omg.CORBA.portable.OutputStream out = null;
+		java.lang.Integer __method = (java.lang.Integer) _methods.get ($method);
+		if (__method == null)
+			throw new org.omg.CORBA.BAD_OPERATION (0, org.omg.CORBA.CompletionStatus.COMPLETED_MAYBE);
+
+		switch (__method.intValue ())
+		{
+			case 0 : // td2/Forum/_get_theme
+			{
+				String $result = null;
+				$result = this.theme ();
+				out = $rh.createReply ();
+				out.write_string ($result);
+				break;
+			}
+
+			case 1 : // td2/Forum/_get_moderator
+			{
+				String $result = null;
+				$result = this.moderator ();
+				out = $rh.createReply ();
+				out.write_string ($result);
+				break;
+			}
+
+			case 2 : // td2/Forum/postMessage
+			{
+				fr.umlv.ir3.corba.sguincha.td2.Message m = fr.umlv.ir3.corba.sguincha.td2.MessageHelper.read (in);
+				boolean $result = false;
+				$result = this.postMessage (m);
+				out = $rh.createReply ();
+				out.write_boolean ($result);
+				break;
+			}
+
+			case 3 : // td2/Forum/getMessage
+			{
+				String title = in.read_string ();
+				fr.umlv.ir3.corba.sguincha.td2.Message $result = null;
+				$result = this.getMessage (title);
+				out = $rh.createReply ();
+				fr.umlv.ir3.corba.sguincha.td2.MessageHelper.write (out , $result);
+				break;
+			}
+
+			case 4 : // td2/Forum/getMessages
+			{
+				fr.umlv.ir3.corba.sguincha.td2.Message $result[] = null;
+				$result = this.getMessages ();
+				out = $rh.createReply ();
+				fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.write (out , $result);
+				break;
+			}
+
+			case 5 : // td2/Forum/removeMessage
+			{
+				String title = in.read_string ();
+				boolean $result = false;
+				$result = this.removeMessage (title);
+				out = $rh.createReply ();
+				out.write_boolean ($result);
+				break;
+			}
+
+			default :
+				throw new org.omg.CORBA.BAD_OPERATION (0, org.omg.CORBA.CompletionStatus.COMPLETED_MAYBE);
+		}
+
+		return out;
+	} // _invoke
+
+	// Type-specific CORBA::Object operations
+	private static String []	__ids	= {"IDL:td2/Forum:1.0"};
+
+	public String [] _all_interfaces (org.omg.PortableServer.POA poa, byte [] objectId)
+	{
+		return (String []) __ids.clone ();
+	}
+
+	public Forum _this ()
+	{
+		return ForumHelper.narrow (super._this_object ());
+	}
+
+	public Forum _this (org.omg.CORBA.ORB orb)
+	{
+		return ForumHelper.narrow (super._this_object (orb));
+	}
+
+} // class ForumPOA

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,28 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/Message.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public final class Message implements org.omg.CORBA.portable.IDLEntity
+{
+	public String	title	= null;
+	public String	author	= null;
+	public String	date	= null;
+	public String	body	= null;
+
+	public Message ()
+	{
+	} // ctor
+
+	public Message (String _title, String _author, String _date, String _body)
+	{
+		title = _title;
+		author = _author;
+		date = _date;
+		body = _body;
+	} // ctor
+
+} // class Message

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,83 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+abstract public class MessageHelper
+{
+	private static String	_id	= "IDL:td2/Message/Message:1.0";
+
+	public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.sguincha.td2.Message that)
+	{
+		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+		a.type (type ());
+		write (out , that);
+		a.read_value (out.create_input_stream () , type ());
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Message extract (org.omg.CORBA.Any a)
+	{
+		return read (a.create_input_stream ());
+	}
+
+	private static org.omg.CORBA.TypeCode	__typeCode	= null;
+	private static boolean					__active	= false;
+
+	synchronized public static org.omg.CORBA.TypeCode type ()
+	{
+		if (__typeCode == null)
+		{
+			synchronized (org.omg.CORBA.TypeCode.class)
+			{
+				if (__typeCode == null)
+				{
+					if (__active)
+					{
+						return org.omg.CORBA.ORB.init ().create_recursive_tc (_id);
+					}
+					__active = true;
+					org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [4];
+					org.omg.CORBA.TypeCode _tcOf_members0 = null;
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [0] = new org.omg.CORBA.StructMember ("title", _tcOf_members0, null);
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [1] = new org.omg.CORBA.StructMember ("author", _tcOf_members0, null);
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [2] = new org.omg.CORBA.StructMember ("date", _tcOf_members0, null);
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [3] = new org.omg.CORBA.StructMember ("body", _tcOf_members0, null);
+					__typeCode = org.omg.CORBA.ORB.init ().create_struct_tc (fr.umlv.ir3.corba.sguincha.td2.MessageHelper.id () , "Message" , _members0);
+					__active = false;
+				}
+			}
+		}
+		return __typeCode;
+	}
+
+	public static String id ()
+	{
+		return _id;
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Message read (org.omg.CORBA.portable.InputStream istream)
+	{
+		fr.umlv.ir3.corba.sguincha.td2.Message value = new fr.umlv.ir3.corba.sguincha.td2.Message ();
+		value.title = istream.read_string ();
+		value.author = istream.read_string ();
+		value.date = istream.read_string ();
+		value.body = istream.read_string ();
+		return value;
+	}
+
+	public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.sguincha.td2.Message value)
+	{
+		ostream.write_string (value.title);
+		ostream.write_string (value.author);
+		ostream.write_string (value.date);
+		ostream.write_string (value.body);
+	}
+
+}

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,37 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public final class MessageHolder implements org.omg.CORBA.portable.Streamable
+{
+	public fr.umlv.ir3.corba.sguincha.td2.Message	value	= null;
+
+	public MessageHolder ()
+	{
+	}
+
+	public MessageHolder (fr.umlv.ir3.corba.sguincha.td2.Message initialValue)
+	{
+		value = initialValue;
+	}
+
+	public void _read (org.omg.CORBA.portable.InputStream i)
+	{
+		value = fr.umlv.ir3.corba.sguincha.td2.MessageHelper.read (i);
+	}
+
+	public void _write (org.omg.CORBA.portable.OutputStream o)
+	{
+		fr.umlv.ir3.corba.sguincha.td2.MessageHelper.write (o , value);
+	}
+
+	public org.omg.CORBA.TypeCode _type ()
+	{
+		return fr.umlv.ir3.corba.sguincha.td2.MessageHelper.type ();
+	}
+
+}

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,61 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+abstract public class MessageSetHelper
+{
+	private static String	_id	= "IDL:td2/MessageSet:1.0";
+
+	public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.sguincha.td2.Message[] that)
+	{
+		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+		a.type (type ());
+		write (out , that);
+		a.read_value (out.create_input_stream () , type ());
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Message[] extract (org.omg.CORBA.Any a)
+	{
+		return read (a.create_input_stream ());
+	}
+
+	private static org.omg.CORBA.TypeCode	__typeCode	= null;
+
+	synchronized public static org.omg.CORBA.TypeCode type ()
+	{
+		if (__typeCode == null)
+		{
+			__typeCode = fr.umlv.ir3.corba.sguincha.td2.MessageHelper.type ();
+			__typeCode = org.omg.CORBA.ORB.init ().create_sequence_tc (0 , __typeCode);
+			__typeCode = org.omg.CORBA.ORB.init ().create_alias_tc (fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.id () , "MessageSet" , __typeCode);
+		}
+		return __typeCode;
+	}
+
+	public static String id ()
+	{
+		return _id;
+	}
+
+	public static fr.umlv.ir3.corba.sguincha.td2.Message[] read (org.omg.CORBA.portable.InputStream istream)
+	{
+		fr.umlv.ir3.corba.sguincha.td2.Message value[] = null;
+		int _len0 = istream.read_long ();
+		value = new fr.umlv.ir3.corba.sguincha.td2.Message [_len0];
+		for (int _o1 = 0; _o1 < value.length; ++_o1)
+			value [_o1] = fr.umlv.ir3.corba.sguincha.td2.MessageHelper.read (istream);
+		return value;
+	}
+
+	public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.sguincha.td2.Message[] value)
+	{
+		ostream.write_long (value.length);
+		for (int _i0 = 0; _i0 < value.length; ++_i0)
+			fr.umlv.ir3.corba.sguincha.td2.MessageHelper.write (ostream , value [_i0]);
+	}
+
+}

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,37 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public final class MessageSetHolder implements org.omg.CORBA.portable.Streamable
+{
+	public fr.umlv.ir3.corba.sguincha.td2.Message	value[]	= null;
+
+	public MessageSetHolder ()
+	{
+	}
+
+	public MessageSetHolder (fr.umlv.ir3.corba.sguincha.td2.Message[] initialValue)
+	{
+		value = initialValue;
+	}
+
+	public void _read (org.omg.CORBA.portable.InputStream i)
+	{
+		value = fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.read (i);
+	}
+
+	public void _write (org.omg.CORBA.portable.OutputStream o)
+	{
+		fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.write (o , value);
+	}
+
+	public org.omg.CORBA.TypeCode _type ()
+	{
+		return fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.type ();
+	}
+
+}

Added: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java	2005-02-18 19:46:43 UTC (rev 11)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java	2005-02-18 19:50:55 UTC (rev 12)
@@ -0,0 +1,196 @@
+package fr.umlv.ir3.corba.sguincha.td2;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public class _ForumStub extends org.omg.CORBA.portable.ObjectImpl implements fr.umlv.ir3.corba.sguincha.td2.Forum
+{
+
+	public String theme ()
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("_get_theme" , true);
+			$in = _invoke ($out);
+			String $result = $in.read_string ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return theme ();
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // theme
+
+	public String moderator ()
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("_get_moderator" , true);
+			$in = _invoke ($out);
+			String $result = $in.read_string ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return moderator ();
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // moderator
+
+	public boolean postMessage (fr.umlv.ir3.corba.sguincha.td2.Message m)
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("postMessage" , true);
+			fr.umlv.ir3.corba.sguincha.td2.MessageHelper.write ($out , m);
+			$in = _invoke ($out);
+			boolean $result = $in.read_boolean ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return postMessage (m);
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // postMessage
+
+	public fr.umlv.ir3.corba.sguincha.td2.Message getMessage (String title)
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("getMessage" , true);
+			$out.write_string (title);
+			$in = _invoke ($out);
+			fr.umlv.ir3.corba.sguincha.td2.Message $result = fr.umlv.ir3.corba.sguincha.td2.MessageHelper.read ($in);
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return getMessage (title);
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // getMessage
+
+	public fr.umlv.ir3.corba.sguincha.td2.Message[] getMessages ()
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("getMessages" , true);
+			$in = _invoke ($out);
+			fr.umlv.ir3.corba.sguincha.td2.Message $result[] = fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.read ($in);
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return getMessages ();
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // getMessages
+
+	public boolean removeMessage (String title)
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("removeMessage" , true);
+			$out.write_string (title);
+			$in = _invoke ($out);
+			boolean $result = $in.read_boolean ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return removeMessage (title);
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // removeMessage
+
+	// Type-specific CORBA::Object operations
+	private static String []	__ids	= {"IDL:td2/Forum:1.0"};
+
+	public String [] _ids ()
+	{
+		return (String []) __ids.clone ();
+	}
+
+	private void readObject (java.io.ObjectInputStream s) throws java.io.IOException
+	{
+		String str = s.readUTF ();
+		String [] args = null;
+		java.util.Properties props = null;
+		org.omg.CORBA.Object obj = org.omg.CORBA.ORB.init (args , props).string_to_object (str);
+		org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+		_set_delegate (delegate);
+	}
+
+	private void writeObject (java.io.ObjectOutputStream s) throws java.io.IOException
+	{
+		String [] args = null;
+		java.util.Properties props = null;
+		String str = org.omg.CORBA.ORB.init (args , props).object_to_string (this);
+		s.writeUTF (str);
+	}
+} // class _ForumStub

Added: trunk/lib/javacardframework.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/javacardframework.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From sguincha at sheep.berlios.de  Fri Feb 18 23:44:27 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 18 Feb 2005 23:44:27 +0100
Subject: [Jmds-svn] r13 - members/jguers/TestCard/src/de/berlios/jmds/applet
Message-ID: <200502182244.j1IMiROB019069@sheep.berlios.de>

Author: sguincha
Date: 2005-02-18 23:44:27 +0100 (Fri, 18 Feb 2005)
New Revision: 13

Modified:
   members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java
Log:


Modified: members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java	2005-02-18 19:50:55 UTC (rev 12)
+++ members/jguers/TestCard/src/de/berlios/jmds/applet/Ping.java	2005-02-18 22:44:27 UTC (rev 13)
@@ -37,6 +37,9 @@
         register();
     }
 
+    /**
+     * @see javacard.framework.Applet#install(byte[], short, byte)
+     */
     public static void install(byte[] bArray, short bOffset, byte bLength) {
         new Ping();
     }
@@ -44,7 +47,7 @@
     /**
      * M?thide appel?e ? l'arriv?e d'une trame APDU
      * 
-     * @param arg0
+     * @param apdu
      * @throws ISOException
      * 
      * @see javacard.framework.Applet#process(javacard.framework.APDU)



From sguincha at sheep.berlios.de  Fri Feb 18 23:44:46 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 18 Feb 2005 23:44:46 +0100
Subject: [Jmds-svn] r14 - in members/jguers/TestCard/src/de/berlios/jmds: . client client/core server server/core tools
Message-ID: <200502182244.j1IMikjt019147@sheep.berlios.de>

Author: sguincha
Date: 2005-02-18 23:44:45 +0100 (Fri, 18 Feb 2005)
New Revision: 14

Removed:
   members/jguers/TestCard/src/de/berlios/jmds/test/
Modified:
   members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java
   members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java
   members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java
   members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java
   members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java
   members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java
Log:


Modified: members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java	2005-02-18 22:44:27 UTC (rev 13)
+++ members/jguers/TestCard/src/de/berlios/jmds/client/ForumClient.java	2005-02-18 22:44:45 UTC (rev 14)
@@ -20,12 +20,16 @@
 public class ForumClient
 {
 
+	/**
+	 * @param args
+	 * @throws IOException
+	 */
 	public static void main (String [] args) throws IOException
 	{
 
 		/* initialisation de l'ORB */
 		Properties prop = new Properties ();
-		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.core.MonClientORBInitializer" , "");
+		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.core.ClientORBInitializer" , "");
 		ORB orb = ORB.init (args , prop);
 		/* R?cup?ration de l'id de l'objet servant */
 		BufferedReader buffer = new BufferedReader (new FileReader ("ObjectRef"));
@@ -49,13 +53,14 @@
 			{
 				case 'a' :
 				{
-					System.out.print ("Votre nom: ");
+					/*System.out.print ("Votre nom: ");
 					String auth = in.readLine ();
 					System.out.print ("Titre du message: ");
 					String title = in.readLine ();
 					System.out.print ("Message: ");
 					String mess = in.readLine ();
-					forumProxy.postMessage (new Message (title, auth, (new Date ()).toString (), mess));
+					forumProxy.postMessage (new Message (title, auth, (new Date ()).toString (), mess));*/
+					forumProxy.postMessage (new Message ("toto", "titi", (new Date ()).toString (), "tutu"));
 				}
 					break;
 

Modified: members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-18 22:44:27 UTC (rev 13)
+++ members/jguers/TestCard/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-18 22:44:45 UTC (rev 14)
@@ -9,9 +9,7 @@
 import org.omg.PortableInterceptor.ClientRequestInterceptor;
 import org.omg.PortableInterceptor.ForwardRequest;
 
-import com.sun.corba.se.spi.ior.iiop.GIOPVersion;
 
-
 /**
  * @author sguincha go to Window - Preferences - Java - Code Style - Code
  *         Templates
@@ -29,11 +27,10 @@
 	 */
 	public void send_request (ClientRequestInfo ri) throws ForwardRequest
 	{
-		GIOPVersion version;
 		ServiceContext sc = new ServiceContext ();
-		sc.context_data = new byte [65];
-
-		ri.add_request_service_context (sc , true);
+		byte[] scData = "toto".getBytes();
+		sc.context_data = scData;
+		ri.add_request_service_context (sc, true);
 		System.out.println ("ClientInter.send request: " + ri.operation ());
 	}
 
@@ -50,7 +47,10 @@
 	 */
 	public void receive_reply (ClientRequestInfo ri)
 	{
-		System.out.println ("ClientInter.receive reply: " + ri.operation ());
+		ServiceContext sc = ri.get_reply_service_context(0);
+		String sData = new String(sc.context_data);
+		System.out.println ("ClientInter.receive reply: " + sData);
+		
 	}
 
 	/**

Modified: members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java	2005-02-18 22:44:27 UTC (rev 13)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/ForumServer.java	2005-02-18 22:44:45 UTC (rev 14)
@@ -23,11 +23,20 @@
 public class ForumServer
 {
 
+	/**
+	 * @param args
+	 * @throws InvalidName
+	 * @throws ServantAlreadyActive
+	 * @throws ObjectNotActive
+	 * @throws WrongPolicy
+	 * @throws IOException
+	 * @throws AdapterInactive
+	 */
 	public static void main (String [] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive
 	{
 		/* Initialisation de l'ORB */
 		Properties prop = new Properties ();
-		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.core.MonServerORBInitializer" , "");
+		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.core.ServerORBInitializer" , "");
 		ORB orb = ORB.init (args , prop);
 
 		/* R?cup?ration de r?f?rence de l'adaptateur d'objet racine */

Modified: members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-18 22:44:27 UTC (rev 13)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-18 22:44:45 UTC (rev 14)
@@ -19,6 +19,10 @@
 	private String				theme;
 	private ConcurrentHashMap	discussion;
 
+	/**
+	 * @param theme
+	 * @param moderator
+	 */
 	public ForumImpl (String theme, String moderator)
 	{
 		this.theme = theme;
@@ -26,16 +30,26 @@
 		discussion = new ConcurrentHashMap ();
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#theme()
+	 */
 	public String theme ()
 	{
 		return theme;
 	}
 
+	
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#moderator()
+	 */
 	public String moderator ()
 	{
 		return moderator;
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#postMessage(fr.umlv.ir3.corba.sguincha.td2.Message)
+	 */
 	public boolean postMessage (Message m)
 	{
 		if (discussion.putIfAbsent (theme , m) == null)
@@ -43,16 +57,25 @@
 		return false;
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessage(java.lang.String)
+	 */
 	public Message getMessage (String title)
 	{
 		return (Message) discussion.get (title);
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessages()
+	 */
 	public Message [] getMessages ()
 	{
 		return (Message []) discussion.values ().toArray (new Message [discussion.size ()]);
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#removeMessage(java.lang.String)
+	 */
 	public boolean removeMessage (String title)
 	{
 		if (discussion.containsKey (title))

Modified: members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-18 22:44:27 UTC (rev 13)
+++ members/jguers/TestCard/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-18 22:44:45 UTC (rev 14)
@@ -4,6 +4,7 @@
  */
 package de.berlios.jmds.server.core;
 
+import org.omg.IOP.ServiceContext;
 import org.omg.PortableInterceptor.ForwardRequest;
 import org.omg.PortableInterceptor.ServerRequestInfo;
 import org.omg.PortableInterceptor.ServerRequestInterceptor;
@@ -26,7 +27,11 @@
 	 */
 	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
 	{
-		System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
+		ServiceContext sc = ri.get_request_service_context (0);
+		String sData = new String (sc.context_data);
+		System.out.println ("ServerInter.receive request_SC: " + sData);
+		sc.context_data = "titi".getBytes ();
+		ri.add_reply_service_context (sc , true);
 
 	}
 
@@ -43,6 +48,9 @@
 	 */
 	public void send_reply (ServerRequestInfo ri)
 	{
+		ServiceContext sc = ri.get_request_service_context (0);
+		sc.context_data = "titi".getBytes ();
+		ri.add_reply_service_context (sc , true);
 		System.out.println ("ServerInter.send_reply: " + ri.operation ());
 
 	}

Modified: members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java	2005-02-18 22:44:27 UTC (rev 13)
+++ members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java	2005-02-18 22:44:45 UTC (rev 14)
@@ -16,6 +16,8 @@
     
     /**
      * DOCME
+     * @param value 
+     * @return a table of short
      */
     public final static short[] stringToShortArray(String value) {
         short shortKey[] = new short[(value.length() / 2)];
@@ -40,6 +42,8 @@
     
     /**
      * DOCME
+     * @param value 
+     * @return a table of int containing the stirng
      */
     public static int[] stringToIntArray(String value) {
         int intKey[] = new int[(value.length() / 2)];
@@ -62,5 +66,18 @@
         }
         return intKey;
     }
+
+	/**
+	 * @param context_data
+	 * @return string of the byte table
+	 */
+	public static String byteToString (byte [] context_data)
+	{
+		StringBuffer sb = new StringBuffer();
+		for(int i=0; i < context_data.length; i++) {
+			sb.append(context_data[i]);
+		}
+		return sb.toString();
+	}
 }
 



From sguincha at sheep.berlios.de  Fri Feb 18 23:45:52 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 18 Feb 2005 23:45:52 +0100
Subject: [Jmds-svn] r15 - in trunk: . generated-src/fr/umlv/ir3/corba/sguincha/td2
Message-ID: <200502182245.j1IMjqrW019227@sheep.berlios.de>

Author: sguincha
Date: 2005-02-18 23:45:52 +0100 (Fri, 18 Feb 2005)
New Revision: 15

Modified:
   trunk/ObjectRef
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java
   trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java
Log:
Tiens mon gros Denis... Voil?\195?\160 un petit peu de logs ; )

Modified: trunk/ObjectRef
===================================================================
--- trunk/ObjectRef	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/ObjectRef	2005-02-18 22:45:52 UTC (rev 15)
@@ -1 +1 @@
-IOR:000000000000001249444c3a7464322f466f72756d3a312e30000000000000010000000000000086000102000000000e38342e39392e3232322e32353200101200000031afabcb000000002026cbea9200000001000000000000000100000008526f6f74504f410000000008000000010000000014000000000000020000000100000020000000000001000100000002050100010001002000010109000000010001010000000026000000020002
\ No newline at end of file
+IOR:000000000000001249444c3a7464322f466f72756d3a312e30000000000000010000000000000086000102000000000e38342e39392e3232322e323532000f1700000031afabcb0000000020279dc83800000001000000000000000100000008526f6f74504f410000000008000000010000000014000000000000020000000100000020000000000001000100000002050100010001002000010109000000010001010000000026000000020002
\ No newline at end of file

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -10,6 +10,10 @@
 {
 	private static String	_id	= "IDL:td2/Forum:1.0";
 
+	/**
+	 * @param a
+	 * @param that
+	 */
 	public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.sguincha.td2.Forum that)
 	{
 		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
@@ -18,6 +22,10 @@
 		a.read_value (out.create_input_stream () , type ());
 	}
 
+	/**
+	 * @param a
+	 * @return a Forum
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Forum extract (org.omg.CORBA.Any a)
 	{
 		return read (a.create_input_stream ());
@@ -25,6 +33,9 @@
 
 	private static org.omg.CORBA.TypeCode	__typeCode	= null;
 
+	/**
+	 * @return the TypeCOde
+	 */
 	synchronized public static org.omg.CORBA.TypeCode type ()
 	{
 		if (__typeCode == null)
@@ -34,21 +45,36 @@
 		return __typeCode;
 	}
 
+	/**
+	 * @return the string id
+	 */
 	public static String id ()
 	{
 		return _id;
 	}
 
+	/**
+	 * @param istream
+	 * @return a forum
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Forum read (org.omg.CORBA.portable.InputStream istream)
 	{
 		return narrow (istream.read_Object (_ForumStub.class));
 	}
 
+	/**
+	 * @param ostream
+	 * @param value
+	 */
 	public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.sguincha.td2.Forum value)
 	{
 		ostream.write_Object ((org.omg.CORBA.Object) value);
 	}
 
+	/**
+	 * @param obj
+	 * @return a forum
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Forum narrow (org.omg.CORBA.Object obj)
 	{
 		if (obj == null)
@@ -66,6 +92,10 @@
 		}
 	}
 
+	/**
+	 * @param obj
+	 * @return a forum
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Forum unchecked_narrow (org.omg.CORBA.Object obj)
 	{
 		if (obj == null)

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -8,27 +8,45 @@
 
 public final class ForumHolder implements org.omg.CORBA.portable.Streamable
 {
+	/**
+	 * Comment for <code>value</code>
+	 */
 	public fr.umlv.ir3.corba.sguincha.td2.Forum	value	= null;
 
+	/**
+	 * 
+	 */
 	public ForumHolder ()
 	{
 	}
 
+	/**
+	 * @param initialValue
+	 */
 	public ForumHolder (fr.umlv.ir3.corba.sguincha.td2.Forum initialValue)
 	{
 		value = initialValue;
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_read(org.omg.CORBA.portable.InputStream)
+	 */
 	public void _read (org.omg.CORBA.portable.InputStream i)
 	{
 		value = fr.umlv.ir3.corba.sguincha.td2.ForumHelper.read (i);
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_write(org.omg.CORBA.portable.OutputStream)
+	 */
 	public void _write (org.omg.CORBA.portable.OutputStream o)
 	{
 		fr.umlv.ir3.corba.sguincha.td2.ForumHelper.write (o , value);
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_type()
+	 */
 	public org.omg.CORBA.TypeCode _type ()
 	{
 		return fr.umlv.ir3.corba.sguincha.td2.ForumHelper.type ();

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -8,15 +8,36 @@
 
 public interface ForumOperations
 {
+	/**
+	 * @return the theme
+	 */
 	String theme ();
 
+	/**
+	 * @return a String 
+	 */
 	String moderator ();
 
+	/**
+	 * @param m
+	 * @return if the operation successfully or not
+	 */
 	boolean postMessage (fr.umlv.ir3.corba.sguincha.td2.Message m);
 
+	/**
+	 * @param title
+	 * @return a message
+	 */
 	fr.umlv.ir3.corba.sguincha.td2.Message getMessage (String title);
 
+	/**
+	 * @return the table of Message
+	 */
 	fr.umlv.ir3.corba.sguincha.td2.Message[] getMessages ();
 
+	/**
+	 * @param title
+	 * @return if the remove operation successfully or not
+	 */
 	boolean removeMessage (String title);
 } // interface ForumOperations

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -22,6 +22,9 @@
 		_methods.put ("removeMessage" , new java.lang.Integer (5));
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.InvokeHandler#_invoke(java.lang.String, org.omg.CORBA.portable.InputStream, org.omg.CORBA.portable.ResponseHandler)
+	 */
 	public org.omg.CORBA.portable.OutputStream _invoke (String $method, org.omg.CORBA.portable.InputStream in, org.omg.CORBA.portable.ResponseHandler $rh)
 	{
 		org.omg.CORBA.portable.OutputStream out = null;
@@ -98,16 +101,26 @@
 	// Type-specific CORBA::Object operations
 	private static String []	__ids	= {"IDL:td2/Forum:1.0"};
 
+	/**
+	 * @see org.omg.PortableServer.Servant#_all_interfaces(org.omg.PortableServer.POA, byte[])
+	 */
 	public String [] _all_interfaces (org.omg.PortableServer.POA poa, byte [] objectId)
 	{
 		return (String []) __ids.clone ();
 	}
 
+	/**
+	 * @return the forum
+	 */
 	public Forum _this ()
 	{
 		return ForumHelper.narrow (super._this_object ());
 	}
 
+	/**
+	 * @param orb
+	 * @return a forum
+	 */
 	public Forum _this (org.omg.CORBA.ORB orb)
 	{
 		return ForumHelper.narrow (super._this_object (orb));

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/Message.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -8,15 +8,40 @@
 
 public final class Message implements org.omg.CORBA.portable.IDLEntity
 {
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+	/**
+	 * Comment for <code>title</code>
+	 */
 	public String	title	= null;
+	/**
+	 * Comment for <code>author</code>
+	 */
 	public String	author	= null;
+	/**
+	 * Comment for <code>date</code>
+	 */
 	public String	date	= null;
+	/**
+	 * Comment for <code>body</code>
+	 */
 	public String	body	= null;
 
+	/**
+	 * 
+	 */
 	public Message ()
 	{
 	} // ctor
 
+	/**
+	 * @param _title
+	 * @param _author
+	 * @param _date
+	 * @param _body
+	 */
 	public Message (String _title, String _author, String _date, String _body)
 	{
 		title = _title;

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -10,6 +10,10 @@
 {
 	private static String	_id	= "IDL:td2/Message/Message:1.0";
 
+	/**
+	 * @param a
+	 * @param that
+	 */
 	public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.sguincha.td2.Message that)
 	{
 		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
@@ -18,6 +22,10 @@
 		a.read_value (out.create_input_stream () , type ());
 	}
 
+	/**
+	 * @param a
+	 * @return a Message
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Message extract (org.omg.CORBA.Any a)
 	{
 		return read (a.create_input_stream ());
@@ -26,6 +34,9 @@
 	private static org.omg.CORBA.TypeCode	__typeCode	= null;
 	private static boolean					__active	= false;
 
+	/**
+	 * @return a TypeCode
+	 */
 	synchronized public static org.omg.CORBA.TypeCode type ()
 	{
 		if (__typeCode == null)
@@ -57,11 +68,18 @@
 		return __typeCode;
 	}
 
+	/**
+	 * @return rhe String ID
+	 */
 	public static String id ()
 	{
 		return _id;
 	}
 
+	/**
+	 * @param istream
+	 * @return a Message
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Message read (org.omg.CORBA.portable.InputStream istream)
 	{
 		fr.umlv.ir3.corba.sguincha.td2.Message value = new fr.umlv.ir3.corba.sguincha.td2.Message ();
@@ -72,6 +90,10 @@
 		return value;
 	}
 
+	/**
+	 * @param ostream
+	 * @param value
+	 */
 	public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.sguincha.td2.Message value)
 	{
 		ostream.write_string (value.title);

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -8,27 +8,45 @@
 
 public final class MessageHolder implements org.omg.CORBA.portable.Streamable
 {
+	/**
+	 * Comment for <code>value</code>
+	 */
 	public fr.umlv.ir3.corba.sguincha.td2.Message	value	= null;
 
+	/**
+	 * 
+	 */
 	public MessageHolder ()
 	{
 	}
 
+	/**
+	 * @param initialValue
+	 */
 	public MessageHolder (fr.umlv.ir3.corba.sguincha.td2.Message initialValue)
 	{
 		value = initialValue;
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_read(org.omg.CORBA.portable.InputStream)
+	 */
 	public void _read (org.omg.CORBA.portable.InputStream i)
 	{
 		value = fr.umlv.ir3.corba.sguincha.td2.MessageHelper.read (i);
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_write(org.omg.CORBA.portable.OutputStream)
+	 */
 	public void _write (org.omg.CORBA.portable.OutputStream o)
 	{
 		fr.umlv.ir3.corba.sguincha.td2.MessageHelper.write (o , value);
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_type()
+	 */
 	public org.omg.CORBA.TypeCode _type ()
 	{
 		return fr.umlv.ir3.corba.sguincha.td2.MessageHelper.type ();

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -10,6 +10,10 @@
 {
 	private static String	_id	= "IDL:td2/MessageSet:1.0";
 
+	/**
+	 * @param a
+	 * @param that
+	 */
 	public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.sguincha.td2.Message[] that)
 	{
 		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
@@ -18,6 +22,10 @@
 		a.read_value (out.create_input_stream () , type ());
 	}
 
+	/**
+	 * @param a 
+	 * @return a table of message
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Message[] extract (org.omg.CORBA.Any a)
 	{
 		return read (a.create_input_stream ());
@@ -25,6 +33,9 @@
 
 	private static org.omg.CORBA.TypeCode	__typeCode	= null;
 
+	/**
+	 * @return a TypeCode
+	 */
 	synchronized public static org.omg.CORBA.TypeCode type ()
 	{
 		if (__typeCode == null)
@@ -36,11 +47,18 @@
 		return __typeCode;
 	}
 
+	/**
+	 * @return a String ID
+	 */
 	public static String id ()
 	{
 		return _id;
 	}
 
+	/**
+	 * @param istream
+	 * @return a table of Message
+	 */
 	public static fr.umlv.ir3.corba.sguincha.td2.Message[] read (org.omg.CORBA.portable.InputStream istream)
 	{
 		fr.umlv.ir3.corba.sguincha.td2.Message value[] = null;
@@ -51,6 +69,10 @@
 		return value;
 	}
 
+	/**
+	 * @param ostream
+	 * @param value
+	 */
 	public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.sguincha.td2.Message[] value)
 	{
 		ostream.write_long (value.length);

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -8,27 +8,45 @@
 
 public final class MessageSetHolder implements org.omg.CORBA.portable.Streamable
 {
+	/**
+	 * Comment for <code>value</code>
+	 */
 	public fr.umlv.ir3.corba.sguincha.td2.Message	value[]	= null;
 
+	/**
+	 * 
+	 */
 	public MessageSetHolder ()
 	{
 	}
 
+	/**
+	 * @param initialValue
+	 */
 	public MessageSetHolder (fr.umlv.ir3.corba.sguincha.td2.Message[] initialValue)
 	{
 		value = initialValue;
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_read(org.omg.CORBA.portable.InputStream)
+	 */
 	public void _read (org.omg.CORBA.portable.InputStream i)
 	{
 		value = fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.read (i);
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_write(org.omg.CORBA.portable.OutputStream)
+	 */
 	public void _write (org.omg.CORBA.portable.OutputStream o)
 	{
 		fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.write (o , value);
 	}
 
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_type()
+	 */
 	public org.omg.CORBA.TypeCode _type ()
 	{
 		return fr.umlv.ir3.corba.sguincha.td2.MessageSetHelper.type ();

Modified: trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java
===================================================================
--- trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java	2005-02-18 22:44:45 UTC (rev 14)
+++ trunk/generated-src/fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java	2005-02-18 22:45:52 UTC (rev 15)
@@ -9,6 +9,14 @@
 public class _ForumStub extends org.omg.CORBA.portable.ObjectImpl implements fr.umlv.ir3.corba.sguincha.td2.Forum
 {
 
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#theme()
+	 */
 	public String theme ()
 	{
 		org.omg.CORBA.portable.InputStream $in = null;
@@ -35,6 +43,9 @@
 		}
 	} // theme
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#moderator()
+	 */
 	public String moderator ()
 	{
 		org.omg.CORBA.portable.InputStream $in = null;
@@ -61,6 +72,9 @@
 		}
 	} // moderator
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#postMessage(fr.umlv.ir3.corba.sguincha.td2.Message)
+	 */
 	public boolean postMessage (fr.umlv.ir3.corba.sguincha.td2.Message m)
 	{
 		org.omg.CORBA.portable.InputStream $in = null;
@@ -88,6 +102,9 @@
 		}
 	} // postMessage
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessage(java.lang.String)
+	 */
 	public fr.umlv.ir3.corba.sguincha.td2.Message getMessage (String title)
 	{
 		org.omg.CORBA.portable.InputStream $in = null;
@@ -115,6 +132,9 @@
 		}
 	} // getMessage
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessages()
+	 */
 	public fr.umlv.ir3.corba.sguincha.td2.Message[] getMessages ()
 	{
 		org.omg.CORBA.portable.InputStream $in = null;
@@ -141,6 +161,9 @@
 		}
 	} // getMessages
 
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#removeMessage(java.lang.String)
+	 */
 	public boolean removeMessage (String title)
 	{
 		org.omg.CORBA.portable.InputStream $in = null;
@@ -171,6 +194,9 @@
 	// Type-specific CORBA::Object operations
 	private static String []	__ids	= {"IDL:td2/Forum:1.0"};
 
+	/**
+	 * @see org.omg.CORBA.portable.ObjectImpl#_ids()
+	 */
 	public String [] _ids ()
 	{
 		return (String []) __ids.clone ();



From denis.bardin at tiscali.fr  Sat Feb 19 02:06:40 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Sat, 19 Feb 2005 02:06:40 +0100
Subject: [Jmds-svn] JMSD: Intercepteurs
Message-ID: <20050219010648.40BBF17348C@postfix3-1.free.fr>

Ouep les gros !!!

 

Je voudrais decerner la palme du bouleto des logs ? notre Seb national
!!!!!!!!!!!!

 

La grosse m?daille pour toi mon gros !!!!  Pense ? les mettre c tr?s
important pour tout le monde surtout si on veut reprendre le travail
. Je
sais pas ce que tu as fait alors c cho de continuer (ou tu en ais) ?!?

 

PENSER A METTRE DES LOGS POUR VOS COMMIT SVP !!!!!

 

Bonne soir?e ? tous,

 

Denis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050219/4ac6791d/attachment.html>

From denis.bardin at tiscali.fr  Sat Feb 19 02:36:03 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Sat, 19 Feb 2005 02:36:03 +0100
Subject: [Jmds-svn] JMDS :  DEV
Message-ID: <20050219013613.B84BE173480@postfix3-1.free.fr>

ReMoi les gros !!!!

 

Un peu plus de positivation apr?s mon d?lire sur les logs


 

J?ai commenc? ? rentrer dans le dev avec le gros Seb afin de suivre le
chemin du moins gros GG
 Et ?a avance pas mal !!!! En tout cas ?a m?a motiv?
? bloc surtout du fait que je n?ai plus d?expos? r?seau ? pr?parer
 Et le
gros Seb ? l?air motiv? ? bloc aussi.

 

ETAT DES LIEUX :

-          interception cote client => OK

-          interception cote serveur => OK

-          modification service context cote client + r?cup?ration du
service context cot? serveur => OK

-          modification service context cote serveur + r?cup?ration du
service context cot? client => OK

-          Dialogue avec la carte => OK

-          Instanciation d?un objet sur la carte => OK

-          Utilisation de l?objet instanci? => OK

 

RESTE ? FAIRE :

-          int?gration de la carte client avec l?intercepteur client (avec
cryptage bidon)

-          int?gration de la carte serveur avec l?intercepteur serveur (avec
cryptage bidon)

-          mise en place du cryptage/d?cryptage bas? sur le concept des cl?s
dans la carte client

-          mise en place du cryptage/d?cryptage bas? sur le concept des cl?s
dans la carte serveur

-          mise en place de la gestion des droits d?acc?s simplifi?s (acc?s
ou pas au serveur)

-          mise en place de la gestion des droits d?acc?s complet (acc?s
pr?cis? sur l?objet
 et m?me la m?thode si on peut)

 

 

Voila m?me si le projet commence prendre de l?ampleur, il nous reste un gros
travail ? faire dessus. Sachant que le prof voudrais une version finale pour
vendredi prochain (et moi aussi ;o) ) il va falloir se mettre ? fond dessus.
Bien s?r, il est ?vident que j?int?gre le fait que pour quelques uns d?entre
nous vont avoir quelques pb de dispo du fait qu?il doivent se faire fouetter
par Duris la semaine prochaine. C pourquoi je voudrais savoir GG et Seb qd
est ce que vous pass? en expos? r?seaux ???

 

Pour ma part et pour math aussi, il va falloir que l?on passe en mode CORBA
(?a changera du mode GL) pour que le projet avance ? grande vitesse


 

J?aimerai aussi me faire des soir?es coding party mais c mieux qd on est au
moins deux
 Je suis ? la recherche de volontaires !!!!!!!!!

 

Gros bisous sur la fesse gauche les gros !!!!

 

A tout ? l?heure les gros
 putain GG passe dans moins de 8h
. la v?role il
va me r?veiller ;o)

 

All? faite de beaux r?ves,

 

Denis
 chef CORBA gonfl? ? bloc et qui par la m?me occasion n?a pas envie de
faire les docs BOSS mais ?a chut il faut pas le dire au autres ;o)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050219/f79567bf/attachment.html>

From dbardin at sheep.berlios.de  Sat Feb 19 04:29:24 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Sat, 19 Feb 2005 04:29:24 +0100
Subject: [Jmds-svn] r16 - in trunk: . lib
Message-ID: <200502190329.j1J3TOXQ015003@sheep.berlios.de>

Author: dbardin
Date: 2005-02-19 04:29:13 +0100 (Sat, 19 Feb 2005)
New Revision: 16

Added:
   trunk/lib/slbJIop.jar
Modified:
   trunk/.classpath
Log:
Ajout de la lib shlumberger + modifcation du classpath

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-18 22:45:52 UTC (rev 15)
+++ trunk/.classpath	2005-02-19 03:29:13 UTC (rev 16)
@@ -5,6 +5,6 @@
 	<classpathentry kind="src" path="generated-src"/>
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
-	<classpathentry kind="lib" path="C:/Program Files/Schlumberger/Smart Cards and Terminals/Cyberflex Access Kits/v4/Middleware Interfaces/jiop/slbJIop.jar"/>
+	<classpathentry kind="lib" path="lib/slbJIop.jar"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Added: trunk/lib/slbJIop.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/slbJIop.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From denis.bardin at tiscali.fr  Sat Feb 19 04:53:03 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Sat, 19 Feb 2005 04:53:03 +0100
Subject: [Jmds-svn] JMDS : Tortoise svn
Message-ID: <20050219035313.6ECB12BC3EC@postfix4-2.free.fr>

Ouep les gros !!!

 

On avait d?j? rencontr? pas mal de pb avec le client TortoiseSVN durant
notre session GL et c encore le cas avec JMDS
 la looz.

En effet, il s?av?re que nous avons rencontr? quelques pb durant les commit
depuis chez seb => les r?pertoires src et test sur le repository sont vide
:-(

 

Pas de panique ?a devrait rentrer dans l?ordre demain matin
 Notre admin svn
attitr? cad Seb va remettre ?a ? jour. All? on est tous avec toi gros Seb
!!!!

 

En fait tout ?a pour dire que ce client n?est pas exempt de bugs donc il est
n?cessaire de bien le mettre ? jour lorsqu?une nouvelle release est
disponible.

 

Par contre pour cette fois je pense qu?il y a du avoir une erreur de manip

Je crois d?celer un pb de Copi?/Coller de r?pertoire contenant des fichiers
.svn
 rien de tel pour foutre la merde. Il faut faire attention a ?a. Ne
fait pas de copi?/coller depuis l?arborescence svn mais pr?f?rer la fonction
Export disponible via le clic droit (export les sources mais pas les .svn)

 

Bonne nuit?e les gros,

 

Denis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050219/c31640a4/attachment.html>

From denis.bardin at tiscali.fr  Sat Feb 19 05:03:15 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Sat, 19 Feb 2005 05:03:15 +0100
Subject: [Jmds-svn] JMDS : pb repository
Message-ID: <20050219040324.4F396C031@postfix3-2.free.fr>

Encore moi !!!!

 

Juste pour dire que personne ne fait d?update avant que Seb nous envoie son
aval par mail (ou alors faite une copie en local).

En fait, je dis ?a surtout pour toi GG car tu as des sources pr?cieuses ;o)

 

Bonne nuit,

 

Denis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050219/99913ec6/attachment.html>

From sguincha at sheep.berlios.de  Sat Feb 19 11:02:50 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Sat, 19 Feb 2005 11:02:50 +0100
Subject: [Jmds-svn] r17 - in trunk: src src/de src/de/berlios src/de/berlios/jmds src/de/berlios/jmds/applet src/de/berlios/jmds/client src/de/berlios/jmds/client/core src/de/berlios/jmds/ior src/de/berlios/jmds/server src/de/berlios/jmds/server/core src/de/berlios/jmds/tools test/de/berlios/jmds/test test/de/berlios/jmds/test/clients
Message-ID: <200502191002.j1JA2o6j007531@sheep.berlios.de>

Author: sguincha
Date: 2005-02-19 11:02:48 +0100 (Sat, 19 Feb 2005)
New Revision: 17

Added:
   trunk/src/de/
   trunk/src/de/berlios/
   trunk/src/de/berlios/jmds/
   trunk/src/de/berlios/jmds/applet/
   trunk/src/de/berlios/jmds/applet/Ping.java
   trunk/src/de/berlios/jmds/client/
   trunk/src/de/berlios/jmds/client/ForumClient.java
   trunk/src/de/berlios/jmds/client/core/
   trunk/src/de/berlios/jmds/client/core/ClientInter.java
   trunk/src/de/berlios/jmds/client/core/ClientORBInitializer.java
   trunk/src/de/berlios/jmds/ior/
   trunk/src/de/berlios/jmds/ior/IORInter.java
   trunk/src/de/berlios/jmds/server/
   trunk/src/de/berlios/jmds/server/ForumServer.java
   trunk/src/de/berlios/jmds/server/core/
   trunk/src/de/berlios/jmds/server/core/ForumImpl.java
   trunk/src/de/berlios/jmds/server/core/ServerInter.java
   trunk/src/de/berlios/jmds/server/core/ServerORBInitializer.java
   trunk/src/de/berlios/jmds/tools/
   trunk/src/de/berlios/jmds/tools/Convertor.java
   trunk/test/de/berlios/jmds/test/clients/
   trunk/test/de/berlios/jmds/test/clients/ClientPing.java
Log:
Voici un petit commentaire car j'ai bien l'intention de remettre en jeu ma palme d'or ;)
Ben en fait, c les sources qui permettent de faire ce que Denis a expliqu?\195?\169 dans le mail de cette nuit...
A savoir, interception client et serveur, modification du Service Context, et et envoie de la r?\195?\169ponse au client...

Voikl?\195?\160 les loulous..

Added: trunk/src/de/berlios/jmds/applet/Ping.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/Ping.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/applet/Ping.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,82 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.applet;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+
+/**
+ * Premi?re classe de test d'une applet JavaCard Renvoie juste les donn?es
+ * envoy?es
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class Ping extends Applet {
+
+    private final static byte CLA_PING = (byte) 0x80;
+    private final static byte ECHO_REQUEST = (byte) 0x10;
+    private final static byte ECHO_REPLY = (byte) 0x30;
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte messLength;
+
+    /**
+     * Constructeur par d?faut
+     */
+    protected Ping() {
+        buffer = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        register();
+    }
+
+    /**
+     * @see javacard.framework.Applet#install(byte[], short, byte)
+     */
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new Ping();
+    }
+
+    /**
+     * M?thide appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param apdu
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        byte[] tmpBuffer = apdu.getBuffer();
+
+        // CLA ? 0x80
+        if (tmpBuffer[ISO7816.OFFSET_CLA] == CLA_PING) {
+            switch (tmpBuffer[ISO7816.OFFSET_INS]) {
+            case ECHO_REQUEST:
+                messLength = (byte)(apdu.setIncomingAndReceive());
+//                if ((byteRead > (byte) BUFFER_LENGTH) || (byteRead <= (byte) 0))
+//                    ISOException.throwIt(ISO7816.SW_WRONG_DATA);
+                for (byte i = (byte) 0; i < messLength; i++) {
+                    buffer[i] = tmpBuffer[ISO7816.OFFSET_CDATA + i];
+                }
+                break;
+
+            case ECHO_REPLY:
+                // Le = taille de la r?ponse attendue
+                short Le = apdu.setOutgoing();
+                // Verification que Le >= Lc (taille des donn?es envoy?es)
+                if (Le < messLength)
+                    ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+                apdu.setOutgoingLength((short) messLength);
+                apdu.sendBytesLong(buffer, (short) 0, (short) messLength);
+                break;
+            }
+        }
+    }
+}

Added: trunk/src/de/berlios/jmds/client/ForumClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,97 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package de.berlios.jmds.client;
+
+import java.io.*;
+import java.util.Date;
+import java.util.Properties;
+
+import org.omg.CORBA.ORB;
+
+import fr.umlv.ir3.corba.sguincha.td2.Forum;
+import fr.umlv.ir3.corba.sguincha.td2.ForumHelper;
+import fr.umlv.ir3.corba.sguincha.td2.Message;
+
+
+/**
+ * @author jguers
+ */
+public class ForumClient
+{
+
+	/**
+	 * @param args
+	 * @throws IOException
+	 */
+	public static void main (String [] args) throws IOException
+	{
+
+		/* initialisation de l'ORB */
+		Properties prop = new Properties ();
+		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.core.ClientORBInitializer" , "");
+		ORB orb = ORB.init (args , prop);
+		/* R?cup?ration de l'id de l'objet servant */
+		BufferedReader buffer = new BufferedReader (new FileReader ("ObjectRef"));
+		String ior = buffer.readLine ();
+
+		BufferedReader in = new BufferedReader (new InputStreamReader (System.in));
+
+		/* Cr?ation d'un objet Forum */
+		Forum forumProxy = ForumHelper.narrow (orb.string_to_object (ior));
+		while (true)
+		{
+			System.out.println ("Que voulez-vous faire ?");
+			System.out.println ("a - ajouter un message");
+			System.out.println ("v - voir les messages");
+			System.out.println ("l - lire un message");
+			System.out.println ("r - retirer un message");
+
+			int choix = System.in.read ();
+			in.readLine ();
+			switch (choix)
+			{
+				case 'a' :
+				{
+					/*System.out.print ("Votre nom: ");
+					String auth = in.readLine ();
+					System.out.print ("Titre du message: ");
+					String title = in.readLine ();
+					System.out.print ("Message: ");
+					String mess = in.readLine ();
+					forumProxy.postMessage (new Message (title, auth, (new Date ()).toString (), mess));*/
+					forumProxy.postMessage (new Message ("toto", "titi", (new Date ()).toString (), "tutu"));
+				}
+					break;
+
+				case 'l' :
+				{
+					System.out.print ("Titre du message: ");
+					String title = in.readLine ();
+					Message m = forumProxy.getMessage (title);
+					System.out.println (m.author + " a ?crit ? " + m.date.toString ());
+					System.out.println ("Titre: " + m.title);
+					System.out.println (m.body + "\n");
+				}
+					break;
+
+				case 'r' :
+				{
+					System.out.print ("Titre du message: ");
+					String title = in.readLine ();
+				}
+					break;
+
+				case 'v' :
+				{
+					Message [] tab = forumProxy.getMessages ();
+
+					for (int i = 0; i < tab.length; i++)
+					{
+						System.out.println (tab [i].author + "\t" + tab [i].date + "\t" + tab [i].title + "\n");
+					}
+				}
+			}
+		}
+	}
+}

Added: trunk/src/de/berlios/jmds/client/core/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,87 @@
+/*
+ * Created on 18 f?vr. 2005 go to Window - Preferences - Java - Code Style -
+ * Code Templates
+ */
+package de.berlios.jmds.client.core;
+
+import org.omg.IOP.ServiceContext;
+import org.omg.PortableInterceptor.ClientRequestInfo;
+import org.omg.PortableInterceptor.ClientRequestInterceptor;
+import org.omg.PortableInterceptor.ForwardRequest;
+
+
+/**
+ * @author sguincha go to Window - Preferences - Java - Code Style - Code
+ *         Templates
+ */
+public class ClientInter extends org.omg.CORBA.LocalObject implements ClientRequestInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void send_request (ClientRequestInfo ri) throws ForwardRequest
+	{
+		ServiceContext sc = new ServiceContext ();
+		byte[] scData = "toto".getBytes();
+		sc.context_data = scData;
+		ri.add_request_service_context (sc, true);
+		System.out.println ("ClientInter.send request: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_poll(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void send_poll (ClientRequestInfo ri)
+	{
+		System.out.println ("ClientInter.send poll: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_reply(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void receive_reply (ClientRequestInfo ri)
+	{
+		ServiceContext sc = ri.get_reply_service_context(0);
+		String sData = new String(sc.context_data);
+		System.out.println ("ClientInter.receive reply: " + sData);
+		
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_exception(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void receive_exception (ClientRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ClientInter.receive exception: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_other(org.omg.PortableInterceptor.ClientRequestInfo)
+	 */
+	public void receive_other (ClientRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ClientInter.receive other: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "Mon intercepteur";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+	}
+
+}

Added: trunk/src/de/berlios/jmds/client/core/ClientORBInitializer.java
===================================================================
--- trunk/src/de/berlios/jmds/client/core/ClientORBInitializer.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/client/core/ClientORBInitializer.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,52 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.client.core;
+
+import org.omg.CORBA.LocalObject;
+import org.omg.PortableInterceptor.ORBInitInfo;
+import org.omg.PortableInterceptor.ORBInitializer;
+import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
+
+
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class ClientORBInitializer extends LocalObject implements ORBInitializer
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void pre_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.pre_init: ORB ID: " + info);
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#post_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void post_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.post_init: ORB ID: " + info);
+		ClientInter client = new ClientInter ();
+		try
+		{
+			info.add_client_request_interceptor (client);
+		}
+		catch (DuplicateName e)
+		{
+			e.printStackTrace ();
+		}
+	}
+
+}

Added: trunk/src/de/berlios/jmds/ior/IORInter.java
===================================================================
--- trunk/src/de/berlios/jmds/ior/IORInter.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/ior/IORInter.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,49 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.ior;
+
+import org.omg.PortableInterceptor.IORInfo;
+import org.omg.PortableInterceptor.IORInterceptor;
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class IORInter extends org.omg.CORBA.LocalObject implements IORInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.IORInterceptorOperations#establish_components(org.omg.PortableInterceptor.IORInfo)
+	 */
+	public void establish_components (IORInfo info)
+	{
+		// TODO Auto-generated method stub
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "My IOR Interceptor";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+		// TODO Auto-generated method stub
+
+	}
+
+}

Added: trunk/src/de/berlios/jmds/server/ForumServer.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ForumServer.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/server/ForumServer.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,66 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package de.berlios.jmds.server;
+
+import java.io.*;
+import java.util.Properties;
+
+import org.omg.CORBA.*;
+import org.omg.CORBA.Object;
+import org.omg.CORBA.ORBPackage.InvalidName;
+import org.omg.PortableServer.*;
+import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
+import org.omg.PortableServer.POAPackage.*;
+
+import de.berlios.jmds.server.core.ForumImpl;
+
+
+
+/**
+ * @author jguers
+ */
+public class ForumServer
+{
+
+	/**
+	 * @param args
+	 * @throws InvalidName
+	 * @throws ServantAlreadyActive
+	 * @throws ObjectNotActive
+	 * @throws WrongPolicy
+	 * @throws IOException
+	 * @throws AdapterInactive
+	 */
+	public static void main (String [] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive
+	{
+		/* Initialisation de l'ORB */
+		Properties prop = new Properties ();
+		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.core.ServerORBInitializer" , "");
+		ORB orb = ORB.init (args , prop);
+
+		/* R?cup?ration de r?f?rence de l'adaptateur d'objet racine */
+		POA rootPOA = POAHelper.narrow (orb.resolve_initial_references ("RootPOA"));
+
+		/* Cr?ation de l'objet SERVANT */
+		ForumImpl forum = new ForumImpl ("Forum de Test", "GG");
+
+		/* Enregistrement et activation de l'objet servant dans le POA */
+		byte [] objectID = rootPOA.activate_object (forum);
+
+		/* R?cup?ration de la r?f?rence du servant */
+		Object obj = rootPOA.id_to_reference (objectID);
+
+		/* Enregistrement de l'ID de l'objet dans un fichier */
+		FileOutputStream file = new FileOutputStream ("ObjectRef");
+		file.write (orb.object_to_string (obj).getBytes ());
+
+		/* Activation du POA */
+		rootPOA.the_POAManager ().activate ();
+
+		/* Lancement de l'ORB */
+		System.out.println ("Server started");
+		orb.run ();
+
+	}
+}

Added: trunk/src/de/berlios/jmds/server/core/ForumImpl.java
===================================================================
--- trunk/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,88 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package de.berlios.jmds.server.core;
+
+import java.util.concurrent.ConcurrentHashMap;
+
+import fr.umlv.ir3.corba.sguincha.td2.ForumPOA;
+import fr.umlv.ir3.corba.sguincha.td2.Message;
+
+
+/**
+ * @author sguinchard
+ */
+public class ForumImpl extends ForumPOA
+{
+
+	private String				moderator;
+	private String				theme;
+	private ConcurrentHashMap	discussion;
+
+	/**
+	 * @param theme
+	 * @param moderator
+	 */
+	public ForumImpl (String theme, String moderator)
+	{
+		this.theme = theme;
+		this.moderator = moderator;
+		discussion = new ConcurrentHashMap ();
+	}
+
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#theme()
+	 */
+	public String theme ()
+	{
+		return theme;
+	}
+
+	
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#moderator()
+	 */
+	public String moderator ()
+	{
+		return moderator;
+	}
+
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#postMessage(fr.umlv.ir3.corba.sguincha.td2.Message)
+	 */
+	public boolean postMessage (Message m)
+	{
+		if (discussion.putIfAbsent (theme , m) == null)
+			return true;
+		return false;
+	}
+
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessage(java.lang.String)
+	 */
+	public Message getMessage (String title)
+	{
+		return (Message) discussion.get (title);
+	}
+
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessages()
+	 */
+	public Message [] getMessages ()
+	{
+		return (Message []) discussion.values ().toArray (new Message [discussion.size ()]);
+	}
+
+	/**
+	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#removeMessage(java.lang.String)
+	 */
+	public boolean removeMessage (String title)
+	{
+		if (discussion.containsKey (title))
+		{
+			discussion.remove (title);
+			return true;
+		}
+		return false;
+	}
+}

Added: trunk/src/de/berlios/jmds/server/core/ServerInter.java
===================================================================
--- trunk/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,90 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.server.core;
+
+import org.omg.IOP.ServiceContext;
+import org.omg.PortableInterceptor.ForwardRequest;
+import org.omg.PortableInterceptor.ServerRequestInfo;
+import org.omg.PortableInterceptor.ServerRequestInterceptor;
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class ServerInter extends org.omg.CORBA.LocalObject implements ServerRequestInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request_service_contexts(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
+	{
+		ServiceContext sc = ri.get_request_service_context (0);
+		String sData = new String (sc.context_data);
+		System.out.println ("ServerInter.receive request_SC: " + sData);
+		sc.context_data = "titi".getBytes ();
+		ri.add_reply_service_context (sc , true);
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void receive_request (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.receive request: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_reply(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_reply (ServerRequestInfo ri)
+	{
+		ServiceContext sc = ri.get_request_service_context (0);
+		sc.context_data = "titi".getBytes ();
+		ri.add_reply_service_context (sc , true);
+		System.out.println ("ServerInter.send_reply: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_exception(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_exception (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.send_exception: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_other(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_other (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.send_other: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "Mon Intercepteur Serveur";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+	}
+
+}

Added: trunk/src/de/berlios/jmds/server/core/ServerORBInitializer.java
===================================================================
--- trunk/src/de/berlios/jmds/server/core/ServerORBInitializer.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/server/core/ServerORBInitializer.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,56 @@
+/*
+ * Created on 18 f?vr. 2005 TODO To change the template for this generated file
+ * go to Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.server.core;
+
+import org.omg.CORBA.LocalObject;
+import org.omg.PortableInterceptor.ORBInitInfo;
+import org.omg.PortableInterceptor.ORBInitializer;
+import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
+
+
+
+
+/**
+ * @author sguincha TODO To change the template for this generated type comment
+ *         go to Window - Preferences - Java - Code Style - Code Templates
+ */
+public class ServerORBInitializer extends LocalObject implements ORBInitializer
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void pre_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.pre_init: ORB ID: " + info);
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ORBInitializerOperations#post_init(org.omg.PortableInterceptor.ORBInitInfo)
+	 */
+	public void post_init (ORBInitInfo info)
+	{
+		System.out.println ("MonORBInitializer.post_init: ORB ID: " + info);
+		// ClientInter client = new ClientInter();
+		ServerInter server = new ServerInter ();
+		// IORInter ior = new IORInter();
+		try
+		{
+			// info.add_client_request_interceptor(client);
+			info.add_server_request_interceptor (server);
+			// info.add_ior_interceptor(ior);
+		}
+		catch (DuplicateName e)
+		{
+			e.printStackTrace ();
+		}
+	}
+
+}

Added: trunk/src/de/berlios/jmds/tools/Convertor.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,83 @@
+/*
+ * Created on 9 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.tools;
+
+/**
+ * Permet la conversion de String en short[] et inversement
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class Convertor {
+    
+    /**
+     * DOCME
+     * @param value 
+     * @return a table of short
+     */
+    public final static short[] stringToShortArray(String value) {
+        short shortKey[] = new short[(value.length() / 2)];
+        int y = 0;
+        String strShort;
+
+        for (int x = 0; x < shortKey.length; x++) {
+            strShort = value.substring(y, (y + 2));
+            if (strShort.equals("FF")) {
+                shortKey[x] = (short) 0xFF;
+            } else {
+                try {
+                    shortKey[x] = (short) Short.parseShort(strShort, 16);
+                } catch (NumberFormatException e) {
+                    System.out.println("HexStringToShortArray Failed ");
+                }
+            }
+            y = y + 2;
+        }
+        return shortKey;
+    }
+    
+    /**
+     * DOCME
+     * @param value 
+     * @return a table of int containing the stirng
+     */
+    public static int[] stringToIntArray(String value) {
+        int intKey[] = new int[(value.length() / 2)];
+        int y = 0;
+        String strInt;
+
+        for (int x = 0; x < intKey.length; x++) {
+            strInt = value.substring(y, (y + 2));
+            if (strInt.equals("FF")) {
+                intKey[x] = (int) 0xFF;
+            } else {
+                try {
+                    intKey[x] = (int) Integer.parseInt(strInt, 16);
+                } catch (NumberFormatException e) {
+                    System.out.println("stringToShortArray Failed ");
+                }
+            }
+
+            y = y + 2;
+        }
+        return intKey;
+    }
+
+	/**
+	 * @param context_data
+	 * @return string of the byte table
+	 */
+	public static String byteToString (byte [] context_data)
+	{
+		StringBuffer sb = new StringBuffer();
+		for(int i=0; i < context_data.length; i++) {
+			sb.append(context_data[i]);
+		}
+		return sb.toString();
+	}
+}
+

Added: trunk/test/de/berlios/jmds/test/clients/ClientPing.java
===================================================================
--- trunk/test/de/berlios/jmds/test/clients/ClientPing.java	2005-02-19 03:29:13 UTC (rev 16)
+++ trunk/test/de/berlios/jmds/test/clients/ClientPing.java	2005-02-19 10:02:48 UTC (rev 17)
@@ -0,0 +1,152 @@
+/*
+ * Created on 9 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.test.clients;
+
+import slb.iop.IOP;
+import slb.iop.IOPEvent;
+import slb.iop.IOPListener;
+import slb.iop.SmartCard;
+import de.berlios.jmds.tools.Convertor;
+
+
+
+/**
+ * Teste la classe Ping charg?e sur la carte
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class ClientPing {
+
+    private static class jmdsIOPListener implements IOPListener {
+
+        /**
+         * DOCME
+         * 
+         * @param event
+         * 
+         * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
+         */
+        public void CardRemoved(IOPEvent event) {
+            System.out.println("Carte retir?e de ");
+            System.out.println(event.getReaderName());
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param event
+         * 
+         * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
+         */
+        public void CardInserted(IOPEvent event) {
+            System.out.print("Carte ins?r?e dans ");
+            System.out.println(event.getReaderName());
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param event
+         * 
+         * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
+         */
+        public void ReaderRemoved(IOPEvent event) {
+            System.out.println("Lecteur d?connect?");
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param event
+         * 
+         * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
+         */
+        public void ReaderInserted(IOPEvent event) {
+            System.out.println("Lecteur connect?");
+        }
+    }
+
+    /**
+     * @param args
+     */
+    public static void main(String[] args) {
+        IOP sIOP = new IOP();
+
+        jmdsIOPListener listener = new jmdsIOPListener();
+        sIOP.addIOPListener(listener);
+
+        String[] lstReaders = sIOP.ListReaders();
+
+        for (int i = 0; i < lstReaders.length; i++) {
+            System.out.println(lstReaders[i]);
+        }
+
+        SmartCard card = new SmartCard();
+        if (lstReaders.length > 0) {
+            boolean result = sIOP.Connect(card, lstReaders[0], false);
+            if (result) {
+                System.out.println("Carte connectee");
+
+                int CLA = Integer.parseInt("00", 16);
+                int INS = Integer.parseInt("A4", 16);
+                int P1 = Integer.parseInt("04", 16);
+                int P2 = Integer.parseInt("00", 16);
+                int[] body = Convertor.stringToIntArray("11223344556677");
+                int LE = Integer.parseInt("00", 16);
+                try {
+                    System.out.println("Applet Selection");
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    System.out.println("Applet selected");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Pb de Selection");
+                    e.printStackTrace();
+                }
+
+                System.out.println("Envoi de l'APDU Echo Request");
+                CLA = Integer.parseInt("80", 16);
+                INS = Integer.parseInt("10", 16);
+                P1 = Integer.parseInt("00", 16);
+                P2 = Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("102030");
+                LE = Integer.parseInt("00", 16);
+
+                try {
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur request");
+                    e.printStackTrace();
+                }
+
+                System.out.print("Envoi de l'APDU Echo Reply: > ");
+                CLA = (int) Integer.parseInt("80", 16);
+                INS = (int) Integer.parseInt("30", 16);
+                P1 = (int) Integer.parseInt("00", 16);
+                P2 = (int) Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("");
+                LE = (int) Integer.parseInt("03", 16);
+
+                try {
+                    card.BeginTransaction();
+                    short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    for (int i = 0; i < out.length; i++) {
+                        System.out.print(Integer.toHexString(out[i]) + " ");
+                    }
+                    System.out.println("");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur reply");
+                    e.printStackTrace();
+                }
+            }
+        }
+    }
+}



From sguincha at sheep.berlios.de  Sat Feb 19 11:06:14 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Sat, 19 Feb 2005 11:06:14 +0100
Subject: [Jmds-svn] r18 - trunk
Message-ID: <200502191006.j1JA6Ela007648@sheep.berlios.de>

Author: sguincha
Date: 2005-02-19 11:06:13 +0100 (Sat, 19 Feb 2005)
New Revision: 18

Removed:
   trunk/bin/
   trunk/classes/
Log:
J'ai supprim?\195?\169 les classes et les bin de la repository



From sguinchard at gmail.com  Sat Feb 19 11:10:30 2005
From: sguinchard at gmail.com (=?windows-1252?Q?S=E9bastien_Guinchard?=)
Date: Sat, 19 Feb 2005 11:10:30 +0100
Subject: [Jmds-svn] JMDS : pb repository
In-Reply-To: <20050219040324.4F396C031@postfix3-2.free.fr>
References: <20050219040324.4F396C031@postfix3-2.free.fr>
Message-ID: <42171096.3040501@gmail.com>

Hi les coquines

Ca y est, vous pouvez faire un update de la repository, il y a tout 
dessus (y compris les sources :)

seb




bardin a ?crit :

> Encore moi !!!!
>
> Juste pour dire que *personne ne fait d?update avant que Seb nous 
> envoie son aval par mail* (ou alors faite une copie en local).
>
> En fait, je dis ?a surtout pour toi GG car tu as des sources 
> pr?cieuses ;o)
>
> Bonne nuit,
>
> Denis
>


From sguincha at sheep.berlios.de  Sat Feb 19 11:36:12 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Sat, 19 Feb 2005 11:36:12 +0100
Subject: [Jmds-svn] r19 - in trunk/generated-src: . de de/berlios
Message-ID: <200502191036.j1JAaCem008946@sheep.berlios.de>

Author: sguincha
Date: 2005-02-19 11:36:11 +0100 (Sat, 19 Feb 2005)
New Revision: 19

Added:
   trunk/generated-src/de/
   trunk/generated-src/de/berlios/
   trunk/generated-src/de/berlios/jmds/
Removed:
   trunk/generated-src/fr/
Log:
Suppression du paquetage fr.umlv.sguincha.ir3.corba.td2



From sguincha at sheep.berlios.de  Sat Feb 19 11:46:12 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Sat, 19 Feb 2005 11:46:12 +0100
Subject: [Jmds-svn] r20 - in trunk/generated-src/de/berlios/jmds: . generated
Message-ID: <200502191046.j1JAkCJf009441@sheep.berlios.de>

Author: sguincha
Date: 2005-02-19 11:46:11 +0100 (Sat, 19 Feb 2005)
New Revision: 20

Added:
   trunk/generated-src/de/berlios/jmds/generated/
   trunk/generated-src/de/berlios/jmds/generated/Forum.java
   trunk/generated-src/de/berlios/jmds/generated/ForumHelper.java
   trunk/generated-src/de/berlios/jmds/generated/ForumHolder.java
   trunk/generated-src/de/berlios/jmds/generated/ForumOperations.java
   trunk/generated-src/de/berlios/jmds/generated/ForumPOA.java
   trunk/generated-src/de/berlios/jmds/generated/Message.java
   trunk/generated-src/de/berlios/jmds/generated/MessageHelper.java
   trunk/generated-src/de/berlios/jmds/generated/MessageHolder.java
   trunk/generated-src/de/berlios/jmds/generated/MessageSetHelper.java
   trunk/generated-src/de/berlios/jmds/generated/MessageSetHolder.java
   trunk/generated-src/de/berlios/jmds/generated/_ForumStub.java
Log:
Ajout des sources generes ddasns le bon paquatage

Added: trunk/generated-src/de/berlios/jmds/generated/Forum.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/Forum.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/Forum.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,11 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/Forum.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public interface Forum extends ForumOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity
+{
+} // interface Forum

Added: trunk/generated-src/de/berlios/jmds/generated/ForumHelper.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/ForumHelper.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/ForumHelper.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,114 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumHelper.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+abstract public class ForumHelper
+{
+	private static String	_id	= "IDL:td2/Forum:1.0";
+
+	/**
+	 * @param a
+	 * @param that
+	 */
+	public static void insert (org.omg.CORBA.Any a, de.berlios.jmds.generated.Forum that)
+	{
+		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+		a.type (type ());
+		write (out , that);
+		a.read_value (out.create_input_stream () , type ());
+	}
+
+	/**
+	 * @param a
+	 * @return a Forum
+	 */
+	public static de.berlios.jmds.generated.Forum extract (org.omg.CORBA.Any a)
+	{
+		return read (a.create_input_stream ());
+	}
+
+	private static org.omg.CORBA.TypeCode	__typeCode	= null;
+
+	/**
+	 * @return the TypeCOde
+	 */
+	synchronized public static org.omg.CORBA.TypeCode type ()
+	{
+		if (__typeCode == null)
+		{
+			__typeCode = org.omg.CORBA.ORB.init ().create_interface_tc (de.berlios.jmds.generated.ForumHelper.id () , "Forum");
+		}
+		return __typeCode;
+	}
+
+	/**
+	 * @return the string id
+	 */
+	public static String id ()
+	{
+		return _id;
+	}
+
+	/**
+	 * @param istream
+	 * @return a forum
+	 */
+	public static de.berlios.jmds.generated.Forum read (org.omg.CORBA.portable.InputStream istream)
+	{
+		return narrow (istream.read_Object (_ForumStub.class));
+	}
+
+	/**
+	 * @param ostream
+	 * @param value
+	 */
+	public static void write (org.omg.CORBA.portable.OutputStream ostream, de.berlios.jmds.generated.Forum value)
+	{
+		ostream.write_Object ((org.omg.CORBA.Object) value);
+	}
+
+	/**
+	 * @param obj
+	 * @return a forum
+	 */
+	public static de.berlios.jmds.generated.Forum narrow (org.omg.CORBA.Object obj)
+	{
+		if (obj == null)
+			return null;
+		else if (obj instanceof de.berlios.jmds.generated.Forum)
+			return (de.berlios.jmds.generated.Forum) obj;
+		else if (!obj._is_a (id ()))
+			throw new org.omg.CORBA.BAD_PARAM ();
+		else
+		{
+			org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+			de.berlios.jmds.generated._ForumStub stub = new de.berlios.jmds.generated._ForumStub ();
+			stub._set_delegate (delegate);
+			return stub;
+		}
+	}
+
+	/**
+	 * @param obj
+	 * @return a forum
+	 */
+	public static de.berlios.jmds.generated.Forum unchecked_narrow (org.omg.CORBA.Object obj)
+	{
+		if (obj == null)
+			return null;
+		else if (obj instanceof de.berlios.jmds.generated.Forum)
+			return (de.berlios.jmds.generated.Forum) obj;
+		else
+		{
+			org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+			de.berlios.jmds.generated._ForumStub stub = new de.berlios.jmds.generated._ForumStub ();
+			stub._set_delegate (delegate);
+			return stub;
+		}
+	}
+
+}

Added: trunk/generated-src/de/berlios/jmds/generated/ForumHolder.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/ForumHolder.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/ForumHolder.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,55 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumHolder.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public final class ForumHolder implements org.omg.CORBA.portable.Streamable
+{
+	/**
+	 * Comment for <code>value</code>
+	 */
+	public de.berlios.jmds.generated.Forum	value	= null;
+
+	/**
+	 * 
+	 */
+	public ForumHolder ()
+	{
+	}
+
+	/**
+	 * @param initialValue
+	 */
+	public ForumHolder (de.berlios.jmds.generated.Forum initialValue)
+	{
+		value = initialValue;
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_read(org.omg.CORBA.portable.InputStream)
+	 */
+	public void _read (org.omg.CORBA.portable.InputStream i)
+	{
+		value = de.berlios.jmds.generated.ForumHelper.read (i);
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_write(org.omg.CORBA.portable.OutputStream)
+	 */
+	public void _write (org.omg.CORBA.portable.OutputStream o)
+	{
+		de.berlios.jmds.generated.ForumHelper.write (o , value);
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_type()
+	 */
+	public org.omg.CORBA.TypeCode _type ()
+	{
+		return de.berlios.jmds.generated.ForumHelper.type ();
+	}
+
+}

Added: trunk/generated-src/de/berlios/jmds/generated/ForumOperations.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/ForumOperations.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/ForumOperations.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,43 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumOperations.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public interface ForumOperations
+{
+	/**
+	 * @return the theme
+	 */
+	String theme ();
+
+	/**
+	 * @return a String 
+	 */
+	String moderator ();
+
+	/**
+	 * @param m
+	 * @return if the operation successfully or not
+	 */
+	boolean postMessage (de.berlios.jmds.generated.Message m);
+
+	/**
+	 * @param title
+	 * @return a message
+	 */
+	de.berlios.jmds.generated.Message getMessage (String title);
+
+	/**
+	 * @return the table of Message
+	 */
+	de.berlios.jmds.generated.Message[] getMessages ();
+
+	/**
+	 * @param title
+	 * @return if the remove operation successfully or not
+	 */
+	boolean removeMessage (String title);
+} // interface ForumOperations

Added: trunk/generated-src/de/berlios/jmds/generated/ForumPOA.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/ForumPOA.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/ForumPOA.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,129 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/ForumPOA.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public abstract class ForumPOA extends org.omg.PortableServer.Servant implements de.berlios.jmds.generated.ForumOperations, org.omg.CORBA.portable.InvokeHandler
+{
+
+	// Constructors
+
+	private static java.util.Hashtable	_methods	= new java.util.Hashtable ();
+	static
+	{
+		_methods.put ("_get_theme" , new java.lang.Integer (0));
+		_methods.put ("_get_moderator" , new java.lang.Integer (1));
+		_methods.put ("postMessage" , new java.lang.Integer (2));
+		_methods.put ("getMessage" , new java.lang.Integer (3));
+		_methods.put ("getMessages" , new java.lang.Integer (4));
+		_methods.put ("removeMessage" , new java.lang.Integer (5));
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.InvokeHandler#_invoke(java.lang.String, org.omg.CORBA.portable.InputStream, org.omg.CORBA.portable.ResponseHandler)
+	 */
+	public org.omg.CORBA.portable.OutputStream _invoke (String $method, org.omg.CORBA.portable.InputStream in, org.omg.CORBA.portable.ResponseHandler $rh)
+	{
+		org.omg.CORBA.portable.OutputStream out = null;
+		java.lang.Integer __method = (java.lang.Integer) _methods.get ($method);
+		if (__method == null)
+			throw new org.omg.CORBA.BAD_OPERATION (0, org.omg.CORBA.CompletionStatus.COMPLETED_MAYBE);
+
+		switch (__method.intValue ())
+		{
+			case 0 : // td2/Forum/_get_theme
+			{
+				String $result = null;
+				$result = this.theme ();
+				out = $rh.createReply ();
+				out.write_string ($result);
+				break;
+			}
+
+			case 1 : // td2/Forum/_get_moderator
+			{
+				String $result = null;
+				$result = this.moderator ();
+				out = $rh.createReply ();
+				out.write_string ($result);
+				break;
+			}
+
+			case 2 : // td2/Forum/postMessage
+			{
+				de.berlios.jmds.generated.Message m = de.berlios.jmds.generated.MessageHelper.read (in);
+				boolean $result = false;
+				$result = this.postMessage (m);
+				out = $rh.createReply ();
+				out.write_boolean ($result);
+				break;
+			}
+
+			case 3 : // td2/Forum/getMessage
+			{
+				String title = in.read_string ();
+				de.berlios.jmds.generated.Message $result = null;
+				$result = this.getMessage (title);
+				out = $rh.createReply ();
+				de.berlios.jmds.generated.MessageHelper.write (out , $result);
+				break;
+			}
+
+			case 4 : // td2/Forum/getMessages
+			{
+				de.berlios.jmds.generated.Message $result[] = null;
+				$result = this.getMessages ();
+				out = $rh.createReply ();
+				de.berlios.jmds.generated.MessageSetHelper.write (out , $result);
+				break;
+			}
+
+			case 5 : // td2/Forum/removeMessage
+			{
+				String title = in.read_string ();
+				boolean $result = false;
+				$result = this.removeMessage (title);
+				out = $rh.createReply ();
+				out.write_boolean ($result);
+				break;
+			}
+
+			default :
+				throw new org.omg.CORBA.BAD_OPERATION (0, org.omg.CORBA.CompletionStatus.COMPLETED_MAYBE);
+		}
+
+		return out;
+	} // _invoke
+
+	// Type-specific CORBA::Object operations
+	private static String []	__ids	= {"IDL:td2/Forum:1.0"};
+
+	/**
+	 * @see org.omg.PortableServer.Servant#_all_interfaces(org.omg.PortableServer.POA, byte[])
+	 */
+	public String [] _all_interfaces (org.omg.PortableServer.POA poa, byte [] objectId)
+	{
+		return (String []) __ids.clone ();
+	}
+
+	/**
+	 * @return the forum
+	 */
+	public Forum _this ()
+	{
+		return ForumHelper.narrow (super._this_object ());
+	}
+
+	/**
+	 * @param orb
+	 * @return a forum
+	 */
+	public Forum _this (org.omg.CORBA.ORB orb)
+	{
+		return ForumHelper.narrow (super._this_object (orb));
+	}
+
+} // class ForumPOA

Added: trunk/generated-src/de/berlios/jmds/generated/Message.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/Message.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/Message.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,53 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/Message.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public final class Message implements org.omg.CORBA.portable.IDLEntity
+{
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+	/**
+	 * Comment for <code>title</code>
+	 */
+	public String	title	= null;
+	/**
+	 * Comment for <code>author</code>
+	 */
+	public String	author	= null;
+	/**
+	 * Comment for <code>date</code>
+	 */
+	public String	date	= null;
+	/**
+	 * Comment for <code>body</code>
+	 */
+	public String	body	= null;
+
+	/**
+	 * 
+	 */
+	public Message ()
+	{
+	} // ctor
+
+	/**
+	 * @param _title
+	 * @param _author
+	 * @param _date
+	 * @param _body
+	 */
+	public Message (String _title, String _author, String _date, String _body)
+	{
+		title = _title;
+		author = _author;
+		date = _date;
+		body = _body;
+	} // ctor
+
+} // class Message

Added: trunk/generated-src/de/berlios/jmds/generated/MessageHelper.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/MessageHelper.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/MessageHelper.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,105 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageHelper.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+abstract public class MessageHelper
+{
+	private static String	_id	= "IDL:td2/Message/Message:1.0";
+
+	/**
+	 * @param a
+	 * @param that
+	 */
+	public static void insert (org.omg.CORBA.Any a, de.berlios.jmds.generated.Message that)
+	{
+		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+		a.type (type ());
+		write (out , that);
+		a.read_value (out.create_input_stream () , type ());
+	}
+
+	/**
+	 * @param a
+	 * @return a Message
+	 */
+	public static de.berlios.jmds.generated.Message extract (org.omg.CORBA.Any a)
+	{
+		return read (a.create_input_stream ());
+	}
+
+	private static org.omg.CORBA.TypeCode	__typeCode	= null;
+	private static boolean					__active	= false;
+
+	/**
+	 * @return a TypeCode
+	 */
+	synchronized public static org.omg.CORBA.TypeCode type ()
+	{
+		if (__typeCode == null)
+		{
+			synchronized (org.omg.CORBA.TypeCode.class)
+			{
+				if (__typeCode == null)
+				{
+					if (__active)
+					{
+						return org.omg.CORBA.ORB.init ().create_recursive_tc (_id);
+					}
+					__active = true;
+					org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [4];
+					org.omg.CORBA.TypeCode _tcOf_members0 = null;
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [0] = new org.omg.CORBA.StructMember ("title", _tcOf_members0, null);
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [1] = new org.omg.CORBA.StructMember ("author", _tcOf_members0, null);
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [2] = new org.omg.CORBA.StructMember ("date", _tcOf_members0, null);
+					_tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+					_members0 [3] = new org.omg.CORBA.StructMember ("body", _tcOf_members0, null);
+					__typeCode = org.omg.CORBA.ORB.init ().create_struct_tc (de.berlios.jmds.generated.MessageHelper.id () , "Message" , _members0);
+					__active = false;
+				}
+			}
+		}
+		return __typeCode;
+	}
+
+	/**
+	 * @return rhe String ID
+	 */
+	public static String id ()
+	{
+		return _id;
+	}
+
+	/**
+	 * @param istream
+	 * @return a Message
+	 */
+	public static de.berlios.jmds.generated.Message read (org.omg.CORBA.portable.InputStream istream)
+	{
+		de.berlios.jmds.generated.Message value = new de.berlios.jmds.generated.Message ();
+		value.title = istream.read_string ();
+		value.author = istream.read_string ();
+		value.date = istream.read_string ();
+		value.body = istream.read_string ();
+		return value;
+	}
+
+	/**
+	 * @param ostream
+	 * @param value
+	 */
+	public static void write (org.omg.CORBA.portable.OutputStream ostream, de.berlios.jmds.generated.Message value)
+	{
+		ostream.write_string (value.title);
+		ostream.write_string (value.author);
+		ostream.write_string (value.date);
+		ostream.write_string (value.body);
+	}
+
+}

Added: trunk/generated-src/de/berlios/jmds/generated/MessageHolder.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/MessageHolder.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/MessageHolder.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,55 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageHolder.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public final class MessageHolder implements org.omg.CORBA.portable.Streamable
+{
+	/**
+	 * Comment for <code>value</code>
+	 */
+	public de.berlios.jmds.generated.Message	value	= null;
+
+	/**
+	 * 
+	 */
+	public MessageHolder ()
+	{
+	}
+
+	/**
+	 * @param initialValue
+	 */
+	public MessageHolder (de.berlios.jmds.generated.Message initialValue)
+	{
+		value = initialValue;
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_read(org.omg.CORBA.portable.InputStream)
+	 */
+	public void _read (org.omg.CORBA.portable.InputStream i)
+	{
+		value = de.berlios.jmds.generated.MessageHelper.read (i);
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_write(org.omg.CORBA.portable.OutputStream)
+	 */
+	public void _write (org.omg.CORBA.portable.OutputStream o)
+	{
+		de.berlios.jmds.generated.MessageHelper.write (o , value);
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_type()
+	 */
+	public org.omg.CORBA.TypeCode _type ()
+	{
+		return de.berlios.jmds.generated.MessageHelper.type ();
+	}
+
+}

Added: trunk/generated-src/de/berlios/jmds/generated/MessageSetHelper.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/MessageSetHelper.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/MessageSetHelper.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,83 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageSetHelper.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+abstract public class MessageSetHelper
+{
+	private static String	_id	= "IDL:td2/MessageSet:1.0";
+
+	/**
+	 * @param a
+	 * @param that
+	 */
+	public static void insert (org.omg.CORBA.Any a, de.berlios.jmds.generated.Message[] that)
+	{
+		org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+		a.type (type ());
+		write (out , that);
+		a.read_value (out.create_input_stream () , type ());
+	}
+
+	/**
+	 * @param a 
+	 * @return a table of message
+	 */
+	public static de.berlios.jmds.generated.Message[] extract (org.omg.CORBA.Any a)
+	{
+		return read (a.create_input_stream ());
+	}
+
+	private static org.omg.CORBA.TypeCode	__typeCode	= null;
+
+	/**
+	 * @return a TypeCode
+	 */
+	synchronized public static org.omg.CORBA.TypeCode type ()
+	{
+		if (__typeCode == null)
+		{
+			__typeCode = de.berlios.jmds.generated.MessageHelper.type ();
+			__typeCode = org.omg.CORBA.ORB.init ().create_sequence_tc (0 , __typeCode);
+			__typeCode = org.omg.CORBA.ORB.init ().create_alias_tc (de.berlios.jmds.generated.MessageSetHelper.id () , "MessageSet" , __typeCode);
+		}
+		return __typeCode;
+	}
+
+	/**
+	 * @return a String ID
+	 */
+	public static String id ()
+	{
+		return _id;
+	}
+
+	/**
+	 * @param istream
+	 * @return a table of Message
+	 */
+	public static de.berlios.jmds.generated.Message[] read (org.omg.CORBA.portable.InputStream istream)
+	{
+		de.berlios.jmds.generated.Message value[] = null;
+		int _len0 = istream.read_long ();
+		value = new de.berlios.jmds.generated.Message [_len0];
+		for (int _o1 = 0; _o1 < value.length; ++_o1)
+			value [_o1] = de.berlios.jmds.generated.MessageHelper.read (istream);
+		return value;
+	}
+
+	/**
+	 * @param ostream
+	 * @param value
+	 */
+	public static void write (org.omg.CORBA.portable.OutputStream ostream, de.berlios.jmds.generated.Message[] value)
+	{
+		ostream.write_long (value.length);
+		for (int _i0 = 0; _i0 < value.length; ++_i0)
+			de.berlios.jmds.generated.MessageHelper.write (ostream , value [_i0]);
+	}
+
+}

Added: trunk/generated-src/de/berlios/jmds/generated/MessageSetHolder.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/MessageSetHolder.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/MessageSetHolder.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,55 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/MessageSetHolder.java . Generated by the
+ * IDL-to-Java compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15
+ * octobre 2004 14 h 06 CEST
+ */
+
+public final class MessageSetHolder implements org.omg.CORBA.portable.Streamable
+{
+	/**
+	 * Comment for <code>value</code>
+	 */
+	public de.berlios.jmds.generated.Message	value[]	= null;
+
+	/**
+	 * 
+	 */
+	public MessageSetHolder ()
+	{
+	}
+
+	/**
+	 * @param initialValue
+	 */
+	public MessageSetHolder (de.berlios.jmds.generated.Message[] initialValue)
+	{
+		value = initialValue;
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_read(org.omg.CORBA.portable.InputStream)
+	 */
+	public void _read (org.omg.CORBA.portable.InputStream i)
+	{
+		value = de.berlios.jmds.generated.MessageSetHelper.read (i);
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_write(org.omg.CORBA.portable.OutputStream)
+	 */
+	public void _write (org.omg.CORBA.portable.OutputStream o)
+	{
+		de.berlios.jmds.generated.MessageSetHelper.write (o , value);
+	}
+
+	/**
+	 * @see org.omg.CORBA.portable.Streamable#_type()
+	 */
+	public org.omg.CORBA.TypeCode _type ()
+	{
+		return de.berlios.jmds.generated.MessageSetHelper.type ();
+	}
+
+}

Added: trunk/generated-src/de/berlios/jmds/generated/_ForumStub.java
===================================================================
--- trunk/generated-src/de/berlios/jmds/generated/_ForumStub.java	2005-02-19 10:36:11 UTC (rev 19)
+++ trunk/generated-src/de/berlios/jmds/generated/_ForumStub.java	2005-02-19 10:46:11 UTC (rev 20)
@@ -0,0 +1,222 @@
+package de.berlios.jmds.generated;
+
+/**
+ * fr/umlv/ir3/corba/sguincha/td2/_ForumStub.java . Generated by the IDL-to-Java
+ * compiler (portable), version "3.2" from IDL/Forum.idl vendredi 15 octobre
+ * 2004 14 h 06 CEST
+ */
+
+public class _ForumStub extends org.omg.CORBA.portable.ObjectImpl implements de.berlios.jmds.generated.Forum
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see de.berlios.jmds.generated.ForumOperations#theme()
+	 */
+	public String theme ()
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("_get_theme" , true);
+			$in = _invoke ($out);
+			String $result = $in.read_string ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return theme ();
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // theme
+
+	/**
+	 * @see de.berlios.jmds.generated.ForumOperations#moderator()
+	 */
+	public String moderator ()
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("_get_moderator" , true);
+			$in = _invoke ($out);
+			String $result = $in.read_string ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return moderator ();
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // moderator
+
+	/**
+	 * @see de.berlios.jmds.generated.ForumOperations#postMessage(de.berlios.jmds.generated.Message)
+	 */
+	public boolean postMessage (de.berlios.jmds.generated.Message m)
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("postMessage" , true);
+			de.berlios.jmds.generated.MessageHelper.write ($out , m);
+			$in = _invoke ($out);
+			boolean $result = $in.read_boolean ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return postMessage (m);
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // postMessage
+
+	/**
+	 * @see de.berlios.jmds.generated.ForumOperations#getMessage(java.lang.String)
+	 */
+	public de.berlios.jmds.generated.Message getMessage (String title)
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("getMessage" , true);
+			$out.write_string (title);
+			$in = _invoke ($out);
+			de.berlios.jmds.generated.Message $result = de.berlios.jmds.generated.MessageHelper.read ($in);
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return getMessage (title);
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // getMessage
+
+	/**
+	 * @see de.berlios.jmds.generated.ForumOperations#getMessages()
+	 */
+	public de.berlios.jmds.generated.Message[] getMessages ()
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("getMessages" , true);
+			$in = _invoke ($out);
+			de.berlios.jmds.generated.Message $result[] = de.berlios.jmds.generated.MessageSetHelper.read ($in);
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return getMessages ();
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // getMessages
+
+	/**
+	 * @see de.berlios.jmds.generated.ForumOperations#removeMessage(java.lang.String)
+	 */
+	public boolean removeMessage (String title)
+	{
+		org.omg.CORBA.portable.InputStream $in = null;
+		try
+		{
+			org.omg.CORBA.portable.OutputStream $out = _request ("removeMessage" , true);
+			$out.write_string (title);
+			$in = _invoke ($out);
+			boolean $result = $in.read_boolean ();
+			return $result;
+		}
+		catch (org.omg.CORBA.portable.ApplicationException $ex)
+		{
+			$in = $ex.getInputStream ();
+			String _id = $ex.getId ();
+			throw new org.omg.CORBA.MARSHAL (_id);
+		}
+		catch (org.omg.CORBA.portable.RemarshalException $rm)
+		{
+			return removeMessage (title);
+		}
+		finally
+		{
+			_releaseReply ($in);
+		}
+	} // removeMessage
+
+	// Type-specific CORBA::Object operations
+	private static String []	__ids	= {"IDL:td2/Forum:1.0"};
+
+	/**
+	 * @see org.omg.CORBA.portable.ObjectImpl#_ids()
+	 */
+	public String [] _ids ()
+	{
+		return (String []) __ids.clone ();
+	}
+
+	private void readObject (java.io.ObjectInputStream s) throws java.io.IOException
+	{
+		String str = s.readUTF ();
+		String [] args = null;
+		java.util.Properties props = null;
+		org.omg.CORBA.Object obj = org.omg.CORBA.ORB.init (args , props).string_to_object (str);
+		org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+		_set_delegate (delegate);
+	}
+
+	private void writeObject (java.io.ObjectOutputStream s) throws java.io.IOException
+	{
+		String [] args = null;
+		java.util.Properties props = null;
+		String str = org.omg.CORBA.ORB.init (args , props).object_to_string (this);
+		s.writeUTF (str);
+	}
+} // class _ForumStub



From sguincha at sheep.berlios.de  Sat Feb 19 19:06:27 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Sat, 19 Feb 2005 19:06:27 +0100
Subject: [Jmds-svn] r21 - in trunk/src/de/berlios/jmds: applet client server/core
Message-ID: <200502191806.j1JI6RCj031022@sheep.berlios.de>

Author: sguincha
Date: 2005-02-19 19:06:26 +0100 (Sat, 19 Feb 2005)
New Revision: 21

Added:
   trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
Modified:
   trunk/src/de/berlios/jmds/client/ForumClient.java
   trunk/src/de/berlios/jmds/server/core/ForumImpl.java
Log:
Ajout de l'applet de securit?\195?\169

Added: trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 10:46:11 UTC (rev 20)
+++ trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:06:26 UTC (rev 21)
@@ -0,0 +1,90 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.applet;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+
+/**
+ * Premi?re classe de test d'une applet JavaCard Renvoie juste les donn?es
+ * envoy?es
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class JmdsSecurityApplet extends Applet {
+
+	private final static byte[] SC = "denise".getBytes();
+	
+	private final static byte CLA_SECURITY = (byte) 0x69;
+    private final static byte ENCODEUR = (byte) 0x10;
+    //private final static byte DECODEUR = (byte) 0x30;
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte messLength;
+
+    /**
+     * Constructeur par d?faut
+     */
+    protected JmdsSecurityApplet() {
+        buffer = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        register();
+    }
+
+    /**
+     * @see javacard.framework.Applet#install(byte[], short, byte)
+     */
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new JmdsSecurityApplet();
+    }
+
+    /**
+     * M?thide appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param apdu
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        byte[] tmpBuffer = apdu.getBuffer();
+
+        // CLA ? 0x80
+        if (tmpBuffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
+            switch (tmpBuffer[ISO7816.OFFSET_INS]) {
+ /*           case ENCODEUR:
+            	apdu.setOutgoingLength((short) messLength);
+            	apdu.sendBytesLong(SC, (short) 0, (short) messLength);
+            	
+            	messLength = (byte)(apdu.setIncomingAndReceive());
+//                if ((byteRead > (byte) BUFFER_LENGTH) || (byteRead <= (byte) 0))
+//                    ISOException.throwIt(ISO7816.SW_WRONG_DATA);
+                for (byte i = (byte) 0; i < messL ength; i++) {
+                    buffer[i] = tmpBuffer[ISO7816.OFFSET_CDATA + i];
+                }
+                break;
+*/
+            case ENCODEUR:
+//            	//Affectration du service context au buffer de la trame
+//            	buffer = SC;
+//                // Le = taille de la r?ponse attendue
+//            	messLength = (byte)(apdu.setIncomingAndReceive());
+//            	short Le = apdu.setOutgoing();
+//                // Verification que Le >= messLength (taille des donn?es envoy?es)
+//                if (Le < messLength)
+//                    ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+                apdu.setOutgoingLength((short) SC.length);
+                apdu.sendBytesLong(SC, (short) 0, (short) SC.length);
+                break;
+            }
+        }
+    }
+}

Modified: trunk/src/de/berlios/jmds/client/ForumClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 10:46:11 UTC (rev 20)
+++ trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 18:06:26 UTC (rev 21)
@@ -9,11 +9,12 @@
 
 import org.omg.CORBA.ORB;
 
-import fr.umlv.ir3.corba.sguincha.td2.Forum;
-import fr.umlv.ir3.corba.sguincha.td2.ForumHelper;
-import fr.umlv.ir3.corba.sguincha.td2.Message;
+import de.berlios.jmds.generated.Forum;
+import de.berlios.jmds.generated.ForumHelper;
+import de.berlios.jmds.generated.Message;
 
 
+
 /**
  * @author jguers
  */

Modified: trunk/src/de/berlios/jmds/server/core/ForumImpl.java
===================================================================
--- trunk/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-19 10:46:11 UTC (rev 20)
+++ trunk/src/de/berlios/jmds/server/core/ForumImpl.java	2005-02-19 18:06:26 UTC (rev 21)
@@ -5,10 +5,11 @@
 
 import java.util.concurrent.ConcurrentHashMap;
 
-import fr.umlv.ir3.corba.sguincha.td2.ForumPOA;
-import fr.umlv.ir3.corba.sguincha.td2.Message;
+import de.berlios.jmds.generated.ForumPOA;
+import de.berlios.jmds.generated.Message;
 
 
+
 /**
  * @author sguinchard
  */
@@ -31,7 +32,7 @@
 	}
 
 	/**
-	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#theme()
+	 * @see de.berlios.jmds.generated.ForumOperations#theme()
 	 */
 	public String theme ()
 	{
@@ -40,7 +41,7 @@
 
 	
 	/**
-	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#moderator()
+	 * @see de.berlios.jmds.generated.ForumOperations#moderator()
 	 */
 	public String moderator ()
 	{
@@ -48,7 +49,7 @@
 	}
 
 	/**
-	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#postMessage(fr.umlv.ir3.corba.sguincha.td2.Message)
+	 * @see de.berlios.jmds.generated.ForumOperations#postMessage(de.berlios.jmds.generated.Message)
 	 */
 	public boolean postMessage (Message m)
 	{
@@ -58,7 +59,7 @@
 	}
 
 	/**
-	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessage(java.lang.String)
+	 * @see de.berlios.jmds.generated.ForumOperations#getMessage(java.lang.String)
 	 */
 	public Message getMessage (String title)
 	{
@@ -66,7 +67,7 @@
 	}
 
 	/**
-	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#getMessages()
+	 * @see de.berlios.jmds.generated.ForumOperations#getMessages()
 	 */
 	public Message [] getMessages ()
 	{
@@ -74,7 +75,7 @@
 	}
 
 	/**
-	 * @see fr.umlv.ir3.corba.sguincha.td2.ForumOperations#removeMessage(java.lang.String)
+	 * @see de.berlios.jmds.generated.ForumOperations#removeMessage(java.lang.String)
 	 */
 	public boolean removeMessage (String title)
 	{



From jguers at sheep.berlios.de  Sat Feb 19 19:26:07 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Sat, 19 Feb 2005 19:26:07 +0100
Subject: [Jmds-svn] r22 - in trunk: . applet applet/de applet/de/berlios applet/de/berlios/jmds applet/de/berlios/jmds/applet applet/de/berlios/jmds/applet/javacard generator src/de/berlios/jmds/applet
Message-ID: <200502191826.j1JIQ7tr000949@sheep.berlios.de>

Author: jguers
Date: 2005-02-19 19:26:03 +0100 (Sat, 19 Feb 2005)
New Revision: 22

Added:
   trunk/applet/
   trunk/applet/de/
   trunk/applet/de/berlios/
   trunk/applet/de/berlios/jmds/
   trunk/applet/de/berlios/jmds/applet/
   trunk/applet/de/berlios/jmds/applet/javacard/
   trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
   trunk/generator/
   trunk/generator/SecurityApplet.pmf
Modified:
   trunk/
   trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
Log:
Ajout du generateur d'applet
Ajout de la premiere version de l'IJC


Property changes on: trunk
___________________________________________________________________
Name: svn:ignore
   + classes


Added: trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
===================================================================
(Binary files differ)


Property changes on: trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
===================================================================
(Binary files differ)


Property changes on: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
===================================================================
--- trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-19 18:06:26 UTC (rev 21)
+++ trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-19 18:26:03 UTC (rev 22)
@@ -0,0 +1,278 @@
+// converted by version 1.3
+// on Sat Feb 19 19:22:00 CET 2005
+
+.package de/berlios/jmds/applet {
+	.aid 0x11:0x22:0x33:0x44:0x55:0x66;
+	.version 1.0;
+
+	.imports {
+		0xA0:0x0:0x0:0x0:0x62:0x1:0x1 1.0;		//javacard/framework
+	}
+
+	.applet {
+		0x11:0x22:0x33:0x44:0x55:0x66:0x77 JmdsSecurityApplet;
+	}
+
+	.constantPool {
+		// 0
+		instanceFieldRef byte[] JmdsSecurityApplet/buffer;
+		// 1
+		instanceFieldRef byte JmdsSecurityApplet/messLength;
+		// 2
+		instanceFieldRef byte[] Ping/buffer;
+		// 3
+		instanceFieldRef byte Ping/messLength;
+		// 4
+		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
+		// 5
+		classRef JmdsSecurityApplet;
+		// 6
+		staticMethodRef JmdsSecurityApplet/<init>()V;
+		// 7
+		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
+		// 8
+		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
+		// 9
+		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
+		// 10
+		staticFieldRef byte[] JmdsSecurityApplet/SC;
+		// 11
+		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
+		// 12
+		classRef Ping;
+		// 13
+		staticMethodRef Ping/<init>()V;
+		// 14
+		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
+		// 15
+		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
+		// 16
+		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+	}
+
+	.class public JmdsSecurityApplet 0 extends 0.3 {		// extends javacard/framework/Applet
+
+		.fields {
+			private byte[] buffer 0;		// [B
+			private byte messLength 1;		// B
+			private static byte[] SC;		// [B
+			private static final byte CLA_SECURITY = 105;		// B
+			private static final byte ENCODEUR = 16;		// B
+			private static final short BUFFER_LENGTH = 255;		// S
+		}
+
+		.publicMethodTable 7 {
+			equals(Ljava/lang/Object;)Z;
+			register()V;
+			register([BSB)V;
+			selectingApplet()Z;
+			deselect()V;
+			getShareableInterfaceObject(Ljavacard/framework/AID;B)Ljavacard/framework/Shareable;;
+			select()Z;
+			process(Ljavacard/framework/APDU;)V;
+		}
+
+		.packageMethodTable 0 {
+		}
+
+		.method protected <init>()V 0 {
+			.stack 3;
+			.locals 0;
+
+				L0:	aload_0;
+					invokespecial 11;		// javacard/framework/Applet.<init>()V
+					aload_0;
+					sspush 255;
+					newarray 11;
+					putfield_a 0;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.buffer
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_0;
+					bspush 100;
+					bastore;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_1;
+					bspush 101;
+					bastore;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_2;
+					bspush 110;
+					bastore;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_3;
+					bspush 105;
+					bastore;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_4;
+					bspush 115;
+					bastore;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_5;
+					bspush 101;
+					bastore;
+					aload_0;
+					sconst_0;
+					putfield_b 1;		// byte de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					aload_0;
+					invokevirtual 4;		// javacard/framework/Applet.register()V
+					return;
+		}
+
+		.method public static install([BSB)V 1 {
+			.stack 1;
+			.locals 0;
+
+				L0:	new 5;		// de/berlios/jmds/applet/JmdsSecurityApplet
+					invokespecial 6;		// de/berlios/jmds/applet/JmdsSecurityApplet.<init>()V
+					return;
+		}
+
+		.method public process(Ljavacard/framework/APDU;)V 7 {
+			.stack 4;
+			.locals 1;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 7;		// javacard/framework/APDU.getBuffer()[B
+					astore_2;
+					aload_2;
+					sconst_0;
+					baload;
+					bspush 105;
+					if_scmpne L3;
+				L1:	aload_2;
+					sconst_1;
+					baload;
+					stableswitch L3 16 16 L2;
+				L2:	aload_1;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					arraylength;
+					invokevirtual 8;		// javacard/framework/APDU.setOutgoingLength(S)V
+					aload_1;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					sconst_0;
+					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					arraylength;
+					invokevirtual 9;		// javacard/framework/APDU.sendBytesLong([BSS)V
+				L3:	return;
+		}
+
+	}
+
+	.class public Ping 1 extends 0.3 {		// extends javacard/framework/Applet
+
+		.fields {
+			private byte[] buffer 0;		// [B
+			private byte messLength 1;		// B
+			private static final byte CLA_PING = -128;		// B
+			private static final byte ECHO_REQUEST = 16;		// B
+			private static final byte ECHO_REPLY = 48;		// B
+			private static final short BUFFER_LENGTH = 255;		// S
+		}
+
+		.publicMethodTable 7 {
+			equals(Ljava/lang/Object;)Z;
+			register()V;
+			register([BSB)V;
+			selectingApplet()Z;
+			deselect()V;
+			getShareableInterfaceObject(Ljavacard/framework/AID;B)Ljavacard/framework/Shareable;;
+			select()Z;
+			process(Ljavacard/framework/APDU;)V;
+		}
+
+		.packageMethodTable 0 {
+		}
+
+		.method protected <init>()V 0 {
+			.stack 2;
+			.locals 0;
+
+				L0:	aload_0;
+					invokespecial 11;		// javacard/framework/Applet.<init>()V
+					aload_0;
+					sspush 255;
+					newarray 11;
+					putfield_a 2;		// reference de/berlios/jmds/applet/Ping.buffer
+					aload_0;
+					sconst_0;
+					putfield_b 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					aload_0;
+					invokevirtual 4;		// javacard/framework/Applet.register()V
+					return;
+		}
+
+		.method public static install([BSB)V 1 {
+			.stack 1;
+			.locals 0;
+
+				L0:	new 12;		// de/berlios/jmds/applet/Ping
+					invokespecial 13;		// de/berlios/jmds/applet/Ping.<init>()V
+					return;
+		}
+
+		.method public process(Ljavacard/framework/APDU;)V 7 {
+			.stack 5;
+			.locals 2;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 7;		// javacard/framework/APDU.getBuffer()[B
+					astore_2;
+					aload_2;
+					sconst_0;
+					baload;
+					bspush -128;
+					if_scmpne L9;
+				L1:	aload_2;
+					sconst_1;
+					baload;
+					slookupswitch L9 2 16 L2 48 L6;
+				L2:	aload_0;
+					aload_1;
+					invokevirtual 14;		// javacard/framework/APDU.setIncomingAndReceive()S
+					s2b;
+					putfield_b 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					sconst_0;
+					sstore_3;
+					goto L4;
+				L3:	getfield_a_this 2;		// reference de/berlios/jmds/applet/Ping.buffer
+					sload_3;
+					aload_2;
+					sconst_5;
+					sload_3;
+					sadd;
+					baload;
+					bastore;
+					sload_3;
+					sconst_1;
+					sadd;
+					s2b;
+					sstore_3;
+				L4:	sload_3;
+					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					if_scmplt L3;
+				L5:	goto L9;
+				L6:	aload_1;
+					invokevirtual 15;		// javacard/framework/APDU.setOutgoing()S
+					sstore_3;
+					sload_3;
+					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					if_scmpge L8;
+				L7:	sspush 26368;
+					invokestatic 16;		// javacard/framework/ISOException.throwIt(S)V
+				L8:	aload_1;
+					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					invokevirtual 8;		// javacard/framework/APDU.setOutgoingLength(S)V
+					aload_1;
+					getfield_a_this 2;		// reference de/berlios/jmds/applet/Ping.buffer
+					sconst_0;
+					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					invokevirtual 9;		// javacard/framework/APDU.sendBytesLong([BSS)V
+				L9:	return;
+		}
+
+	}
+
+}

Added: trunk/generator/SecurityApplet.pmf
===================================================================
--- trunk/generator/SecurityApplet.pmf	2005-02-19 18:06:26 UTC (rev 21)
+++ trunk/generator/SecurityApplet.pmf	2005-02-19 18:26:03 UTC (rev 22)
@@ -0,0 +1,11 @@
+[PrgMaker]
+Package=de.berlios.jmds.applet
+PackageAID=112233445566
+OutputDir=d:\1G2K - SOPRA\IR3\Corba\jmds\SVN\trunk\applet
+ExportDir=C:\PROGRA~1\SCHLUM~1\SMARTC~1\CYBERF~1\v4\Toolkit\prgmaker\Export Files
+Version=1.0
+ClassDir=d:\1G2K - SOPRA\IR3\Corba\jmds\SVN\trunk\classes
+[Applets]
+NumApplets=1
+Applet1=JmdsSecurityApplet.class
+Applet1AID=112233445566

Modified: trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:06:26 UTC (rev 21)
+++ trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:26:03 UTC (rev 22)
@@ -20,21 +20,28 @@
  */
 public class JmdsSecurityApplet extends Applet {
 
-	private final static byte[] SC = "denise".getBytes();
+	private static byte[] SC;
 	
-	private final static byte CLA_SECURITY = (byte) 0x69;
+    private final static byte CLA_SECURITY = (byte) 0x69;
     private final static byte ENCODEUR = (byte) 0x10;
     //private final static byte DECODEUR = (byte) 0x30;
     private final static short BUFFER_LENGTH = (short) 255;
 
     private byte[] buffer;
     private byte messLength;
-
+    
     /**
      * Constructeur par d?faut
      */
     protected JmdsSecurityApplet() {
         buffer = new byte[BUFFER_LENGTH];
+        SC[0] = (byte)'d';
+        SC[1] = (byte)'e';
+        SC[2] = (byte)'n';
+        SC[3] = (byte)'i';
+        SC[4] = (byte)'s';
+        SC[5] = (byte)'e';
+        
         messLength = (byte) 0;
         register();
     }



From jguers at sheep.berlios.de  Sat Feb 19 19:46:23 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Sat, 19 Feb 2005 19:46:23 +0100
Subject: [Jmds-svn] r23 - trunk/src/de/berlios/jmds/applet
Message-ID: <200502191846.j1JIkNBc001799@sheep.berlios.de>

Author: jguers
Date: 2005-02-19 19:46:21 +0100 (Sat, 19 Feb 2005)
New Revision: 23

Modified:
   trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
Log:
Correction de la gestion de l'encode

Modified: trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:26:03 UTC (rev 22)
+++ trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:46:21 UTC (rev 23)
@@ -20,28 +20,23 @@
  */
 public class JmdsSecurityApplet extends Applet {
 
-	private static byte[] SC;
-	
     private final static byte CLA_SECURITY = (byte) 0x69;
-    private final static byte ENCODEUR = (byte) 0x10;
-    //private final static byte DECODEUR = (byte) 0x30;
+    private final static byte CODE = (byte) 0x10;
+    private final static byte GET_CODE = (byte) 0x20;
+    private final static byte DECODE = (byte) 0x30;
+    private final static byte GET_DECODE = (byte) 0x40;
     private final static short BUFFER_LENGTH = (short) 255;
 
     private byte[] buffer;
-    private byte messLength;
+    private byte[] code;
+    private short messLength;
     
     /**
      * Constructeur par d?faut
      */
     protected JmdsSecurityApplet() {
         buffer = new byte[BUFFER_LENGTH];
-        SC[0] = (byte)'d';
-        SC[1] = (byte)'e';
-        SC[2] = (byte)'n';
-        SC[3] = (byte)'i';
-        SC[4] = (byte)'s';
-        SC[5] = (byte)'e';
-        
+        code = new byte[BUFFER_LENGTH];
         messLength = (byte) 0;
         register();
     }
@@ -54,7 +49,7 @@
     }
 
     /**
-     * M?thide appel?e ? l'arriv?e d'une trame APDU
+     * M?thode appel?e ? l'arriv?e d'une trame APDU
      * 
      * @param apdu
      * @throws ISOException
@@ -62,36 +57,41 @@
      * @see javacard.framework.Applet#process(javacard.framework.APDU)
      */
     public void process(APDU apdu) throws ISOException {
-        byte[] tmpBuffer = apdu.getBuffer();
+        byte[] buffer = apdu.getBuffer();
 
-        // CLA ? 0x80
-        if (tmpBuffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
-            switch (tmpBuffer[ISO7816.OFFSET_INS]) {
- /*           case ENCODEUR:
-            	apdu.setOutgoingLength((short) messLength);
-            	apdu.sendBytesLong(SC, (short) 0, (short) messLength);
-            	
-            	messLength = (byte)(apdu.setIncomingAndReceive());
-//                if ((byteRead > (byte) BUFFER_LENGTH) || (byteRead <= (byte) 0))
-//                    ISOException.throwIt(ISO7816.SW_WRONG_DATA);
-                for (byte i = (byte) 0; i < messL ength; i++) {
-                    buffer[i] = tmpBuffer[ISO7816.OFFSET_CDATA + i];
-                }
-                break;
-*/
-            case ENCODEUR:
-//            	//Affectration du service context au buffer de la trame
-//            	buffer = SC;
-//                // Le = taille de la r?ponse attendue
-//            	messLength = (byte)(apdu.setIncomingAndReceive());
-//            	short Le = apdu.setOutgoing();
-//                // Verification que Le >= messLength (taille des donn?es envoy?es)
-//                if (Le < messLength)
-//                    ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
-                apdu.setOutgoingLength((short) SC.length);
-                apdu.sendBytesLong(SC, (short) 0, (short) SC.length);
-                break;
+        // CLA ? 69
+        if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
+            switch (buffer[ISO7816.OFFSET_INS]) {
+                case CODE:
+                    encode(apdu);
+                    break;
+                
+                case GET_CODE:
+                    getEncode(apdu);
+                    break;
+
+                case DECODE:
+                    break;
+                    
+                case GET_DECODE:
+                    break;
             }
         }
     }
+    
+    private void encode(APDU apdu)
+    {
+        messLength = apdu.setIncomingAndReceive();
+        for (int i = 0; i < messLength; i++) {
+            code[i] = (byte)(buffer[i + ISO7816.OFFSET_CDATA] & 0x10);
+        }
+    }
+    
+    private void getEncode(APDU apdu)
+    {
+        if(apdu.setOutgoing() < messLength)
+            ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+        
+        apdu.sendBytesLong(code, (short)0, messLength);
+    }
 }



From jguers at sheep.berlios.de  Sat Feb 19 19:56:08 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Sat, 19 Feb 2005 19:56:08 +0100
Subject: [Jmds-svn] r24 - in trunk: applet/de/berlios/jmds/applet/javacard generator src/de/berlios/jmds/applet
Message-ID: <200502191856.j1JIu8AR002449@sheep.berlios.de>

Author: jguers
Date: 2005-02-19 19:56:06 +0100 (Sat, 19 Feb 2005)
New Revision: 24

Modified:
   trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
   trunk/generator/SecurityApplet.pmf
   trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
Log:
Correction de l'indexation dans le tableau
Modification d'une erreur de generateur

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
===================================================================
--- trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-19 18:46:21 UTC (rev 23)
+++ trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-19 18:56:06 UTC (rev 24)
@@ -1,5 +1,5 @@
 // converted by version 1.3
-// on Sat Feb 19 19:22:00 CET 2005
+// on Sat Feb 19 19:55:27 CET 2005
 
 .package de/berlios/jmds/applet {
 	.aid 0x11:0x22:0x33:0x44:0x55:0x66;
@@ -17,13 +17,13 @@
 		// 0
 		instanceFieldRef byte[] JmdsSecurityApplet/buffer;
 		// 1
-		instanceFieldRef byte JmdsSecurityApplet/messLength;
+		instanceFieldRef byte[] JmdsSecurityApplet/code;
 		// 2
+		instanceFieldRef short JmdsSecurityApplet/messLength;
+		// 3
 		instanceFieldRef byte[] Ping/buffer;
-		// 3
+		// 4
 		instanceFieldRef byte Ping/messLength;
-		// 4
-		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
 		// 5
 		classRef JmdsSecurityApplet;
 		// 6
@@ -31,33 +31,44 @@
 		// 7
 		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
 		// 8
-		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
+		staticMethodRef JmdsSecurityApplet/encode(Ljavacard/framework/APDU;)V;
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
 		// 9
-		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
+		staticMethodRef JmdsSecurityApplet/getEncode(Ljavacard/framework/APDU;)V;
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
 		// 10
-		staticFieldRef byte[] JmdsSecurityApplet/SC;
+		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
 		// 11
-		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
+		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
 		// 12
-		classRef Ping;
+		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
 		// 13
-		staticMethodRef Ping/<init>()V;
+		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
 		// 14
-		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
+		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
 		// 15
-		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
+		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
 		// 16
-		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		classRef Ping;
+		// 17
+		staticMethodRef Ping/<init>()V;
+		// 18
+		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
 	}
 
 	.class public JmdsSecurityApplet 0 extends 0.3 {		// extends javacard/framework/Applet
 
 		.fields {
 			private byte[] buffer 0;		// [B
-			private byte messLength 1;		// B
-			private static byte[] SC;		// [B
+			private byte[] code 1;		// [B
+			private short messLength 2;		// S
 			private static final byte CLA_SECURITY = 105;		// B
-			private static final byte ENCODEUR = 16;		// B
+			private static final byte CODE = 16;		// B
+			private static final byte GET_CODE = 32;		// B
+			private static final byte DECODE = 48;		// B
+			private static final byte GET_DECODE = 64;		// B
 			private static final short BUFFER_LENGTH = 255;		// S
 		}
 
@@ -76,44 +87,24 @@
 		}
 
 		.method protected <init>()V 0 {
-			.stack 3;
+			.stack 2;
 			.locals 0;
 
 				L0:	aload_0;
-					invokespecial 11;		// javacard/framework/Applet.<init>()V
+					invokespecial 14;		// javacard/framework/Applet.<init>()V
 					aload_0;
 					sspush 255;
 					newarray 11;
 					putfield_a 0;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.buffer
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					sconst_0;
-					bspush 100;
-					bastore;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					sconst_1;
-					bspush 101;
-					bastore;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					sconst_2;
-					bspush 110;
-					bastore;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					sconst_3;
-					bspush 105;
-					bastore;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					sconst_4;
-					bspush 115;
-					bastore;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					sconst_5;
-					bspush 101;
-					bastore;
 					aload_0;
+					sspush 255;
+					newarray 11;
+					putfield_a 1;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.code
+					aload_0;
 					sconst_0;
-					putfield_b 1;		// byte de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					putfield_s 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
 					aload_0;
-					invokevirtual 4;		// javacard/framework/Applet.register()V
+					invokevirtual 15;		// javacard/framework/Applet.register()V
 					return;
 		}
 
@@ -127,7 +118,7 @@
 		}
 
 		.method public process(Ljavacard/framework/APDU;)V 7 {
-			.stack 4;
+			.stack 2;
 			.locals 1;
 
 			.descriptor	Ljavacard/framework/APDU;	0.10;
@@ -139,24 +130,73 @@
 					sconst_0;
 					baload;
 					bspush 105;
-					if_scmpne L3;
+					if_scmpne L5;
 				L1:	aload_2;
 					sconst_1;
 					baload;
-					stableswitch L3 16 16 L2;
-				L2:	aload_1;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					arraylength;
-					invokevirtual 8;		// javacard/framework/APDU.setOutgoingLength(S)V
+					slookupswitch L5 4 16 L2 32 L3 48 L4 64 L5;
+				L2:	aload_0;
 					aload_1;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
+					invokespecial 8;		// de/berlios/jmds/applet/JmdsSecurityApplet.encode(Ljavacard/framework/APDU;)V
+					goto L5;
+				L3:	aload_0;
+					aload_1;
+					invokespecial 9;		// de/berlios/jmds/applet/JmdsSecurityApplet.getEncode(Ljavacard/framework/APDU;)V
+					goto L5;
+				L4:	goto L5;
+				L5:	return;
+		}
+
+		.method private encode(Ljavacard/framework/APDU;)V {
+			.stack 5;
+			.locals 1;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_0;
+					aload_1;
+					invokevirtual 10;		// javacard/framework/APDU.setIncomingAndReceive()S
+					putfield_s 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
 					sconst_0;
-					getstatic_a 10;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.SC
-					arraylength;
-					invokevirtual 9;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					sstore_2;
+					goto L2;
+				L1:	getfield_a_this 1;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.code
+					sload_2;
+					getfield_a_this 0;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.buffer
+					sload_2;
+					sconst_5;
+					sadd;
+					baload;
+					bspush 16;
+					sand;
+					bastore;
+					sinc 2 1;
+				L2:	sload_2;
+					getfield_s_this 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					if_scmplt L1;
 				L3:	return;
 		}
 
+		.method private getEncode(Ljavacard/framework/APDU;)V {
+			.stack 4;
+			.locals 0;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 11;		// javacard/framework/APDU.setOutgoing()S
+					getfield_s_this 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					if_scmpge L2;
+				L1:	sspush 26368;
+					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
+				L2:	aload_1;
+					getfield_a_this 1;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.code
+					sconst_0;
+					getfield_s_this 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					invokevirtual 13;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					return;
+		}
+
 	}
 
 	.class public Ping 1 extends 0.3 {		// extends javacard/framework/Applet
@@ -189,16 +229,16 @@
 			.locals 0;
 
 				L0:	aload_0;
-					invokespecial 11;		// javacard/framework/Applet.<init>()V
+					invokespecial 14;		// javacard/framework/Applet.<init>()V
 					aload_0;
 					sspush 255;
 					newarray 11;
-					putfield_a 2;		// reference de/berlios/jmds/applet/Ping.buffer
+					putfield_a 3;		// reference de/berlios/jmds/applet/Ping.buffer
 					aload_0;
 					sconst_0;
-					putfield_b 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					putfield_b 4;		// byte de/berlios/jmds/applet/Ping.messLength
 					aload_0;
-					invokevirtual 4;		// javacard/framework/Applet.register()V
+					invokevirtual 15;		// javacard/framework/Applet.register()V
 					return;
 		}
 
@@ -206,8 +246,8 @@
 			.stack 1;
 			.locals 0;
 
-				L0:	new 12;		// de/berlios/jmds/applet/Ping
-					invokespecial 13;		// de/berlios/jmds/applet/Ping.<init>()V
+				L0:	new 16;		// de/berlios/jmds/applet/Ping
+					invokespecial 17;		// de/berlios/jmds/applet/Ping.<init>()V
 					return;
 		}
 
@@ -231,13 +271,13 @@
 					slookupswitch L9 2 16 L2 48 L6;
 				L2:	aload_0;
 					aload_1;
-					invokevirtual 14;		// javacard/framework/APDU.setIncomingAndReceive()S
+					invokevirtual 10;		// javacard/framework/APDU.setIncomingAndReceive()S
 					s2b;
-					putfield_b 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					putfield_b 4;		// byte de/berlios/jmds/applet/Ping.messLength
 					sconst_0;
 					sstore_3;
 					goto L4;
-				L3:	getfield_a_this 2;		// reference de/berlios/jmds/applet/Ping.buffer
+				L3:	getfield_a_this 3;		// reference de/berlios/jmds/applet/Ping.buffer
 					sload_3;
 					aload_2;
 					sconst_5;
@@ -251,25 +291,25 @@
 					s2b;
 					sstore_3;
 				L4:	sload_3;
-					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
 					if_scmplt L3;
 				L5:	goto L9;
 				L6:	aload_1;
-					invokevirtual 15;		// javacard/framework/APDU.setOutgoing()S
+					invokevirtual 11;		// javacard/framework/APDU.setOutgoing()S
 					sstore_3;
 					sload_3;
-					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
+					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
 					if_scmpge L8;
 				L7:	sspush 26368;
-					invokestatic 16;		// javacard/framework/ISOException.throwIt(S)V
+					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
 				L8:	aload_1;
-					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
-					invokevirtual 8;		// javacard/framework/APDU.setOutgoingLength(S)V
+					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
+					invokevirtual 18;		// javacard/framework/APDU.setOutgoingLength(S)V
 					aload_1;
-					getfield_a_this 2;		// reference de/berlios/jmds/applet/Ping.buffer
+					getfield_a_this 3;		// reference de/berlios/jmds/applet/Ping.buffer
 					sconst_0;
-					getfield_b_this 3;		// byte de/berlios/jmds/applet/Ping.messLength
-					invokevirtual 9;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
+					invokevirtual 13;		// javacard/framework/APDU.sendBytesLong([BSS)V
 				L9:	return;
 		}
 

Modified: trunk/generator/SecurityApplet.pmf
===================================================================
--- trunk/generator/SecurityApplet.pmf	2005-02-19 18:46:21 UTC (rev 23)
+++ trunk/generator/SecurityApplet.pmf	2005-02-19 18:56:06 UTC (rev 24)
@@ -8,4 +8,4 @@
 [Applets]
 NumApplets=1
 Applet1=JmdsSecurityApplet.class
-Applet1AID=112233445566
+Applet1AID=11223344556677

Modified: trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:46:21 UTC (rev 23)
+++ trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 18:56:06 UTC (rev 24)
@@ -82,8 +82,8 @@
     private void encode(APDU apdu)
     {
         messLength = apdu.setIncomingAndReceive();
-        for (int i = 0; i < messLength; i++) {
-            code[i] = (byte)(buffer[i + ISO7816.OFFSET_CDATA] & 0x10);
+        for (short i = 0; i < messLength; i++) {
+            code[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
         }
     }
     



From sguincha at sheep.berlios.de  Sat Feb 19 21:09:34 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Sat, 19 Feb 2005 21:09:34 +0100
Subject: [Jmds-svn] r25 - in trunk/src/de/berlios/jmds: client client/core server server/core
Message-ID: <200502192009.j1JK9YDT006203@sheep.berlios.de>

Author: sguincha
Date: 2005-02-19 21:09:30 +0100 (Sat, 19 Feb 2005)
New Revision: 25

Modified:
   trunk/src/de/berlios/jmds/client/ForumClient.java
   trunk/src/de/berlios/jmds/client/core/ClientInter.java
   trunk/src/de/berlios/jmds/server/ForumServer.java
   trunk/src/de/berlios/jmds/server/core/ServerInter.java
Log:
Mise en place de JacORB pour corrige un bug.. il est toujours la :-(

Modified: trunk/src/de/berlios/jmds/client/ForumClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 18:56:06 UTC (rev 24)
+++ trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 20:09:30 UTC (rev 25)
@@ -29,9 +29,16 @@
 	{
 
 		/* initialisation de l'ORB */
-		Properties prop = new Properties ();
+/*		Properties prop = new Properties ();
 		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.core.ClientORBInitializer" , "");
 		ORB orb = ORB.init (args , prop);
+*/
+		/*Initilisation de JAC ORB*/
+		java.util.Properties props = new java.util.Properties();
+		props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.core.ClientORBInitializer" , "");
+		props.put("jacorb.implname","StandardNS");
+		ORB orb = org.omg.CORBA.ORB.init(args, props);
+		
 		/* R?cup?ration de l'id de l'objet servant */
 		BufferedReader buffer = new BufferedReader (new FileReader ("ObjectRef"));
 		String ior = buffer.readLine ();

Modified: trunk/src/de/berlios/jmds/client/core/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-19 18:56:06 UTC (rev 24)
+++ trunk/src/de/berlios/jmds/client/core/ClientInter.java	2005-02-19 20:09:30 UTC (rev 25)
@@ -27,10 +27,10 @@
 	 */
 	public void send_request (ClientRequestInfo ri) throws ForwardRequest
 	{
-		ServiceContext sc = new ServiceContext ();
-		byte[] scData = "toto".getBytes();
-		sc.context_data = scData;
-		ri.add_request_service_context (sc, true);
+//		ServiceContext sc = new ServiceContext ();
+//		byte[] scData = "toto".getBytes();
+//		sc.context_data = scData;
+//		ri.add_request_service_context (null, true);
 		System.out.println ("ClientInter.send request: " + ri.operation ());
 	}
 
@@ -47,10 +47,9 @@
 	 */
 	public void receive_reply (ClientRequestInfo ri)
 	{
-		ServiceContext sc = ri.get_reply_service_context(0);
-		String sData = new String(sc.context_data);
-		System.out.println ("ClientInter.receive reply: " + sData);
-		
+		System.out.println ("ClientInter.receive reply: " + ri.operation ());
+//		ServiceContext sc = ri.get_reply_service_context(0);
+//		String sData = new String(sc.context_data);		
 	}
 
 	/**
@@ -58,7 +57,7 @@
 	 */
 	public void receive_exception (ClientRequestInfo ri) throws ForwardRequest
 	{
-		System.out.println ("ClientInter.receive exception: " + ri.operation ());
+		System.out.println ("ClientInter.receive exception: " );
 	}
 
 	/**

Modified: trunk/src/de/berlios/jmds/server/ForumServer.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ForumServer.java	2005-02-19 18:56:06 UTC (rev 24)
+++ trunk/src/de/berlios/jmds/server/ForumServer.java	2005-02-19 20:09:30 UTC (rev 25)
@@ -35,10 +35,16 @@
 	public static void main (String [] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive
 	{
 		/* Initialisation de l'ORB */
-		Properties prop = new Properties ();
+/*		Properties prop = new Properties ();
 		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.core.ServerORBInitializer" , "");
 		ORB orb = ORB.init (args , prop);
-
+*/
+		/*Initilisation de JAC ORB*/
+		java.util.Properties props = new java.util.Properties();
+		props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.core.ServerORBInitializer" , "");
+		props.put("jacorb.implname","StandardNS");
+		ORB orb = org.omg.CORBA.ORB.init(args, props);
+		
 		/* R?cup?ration de r?f?rence de l'adaptateur d'objet racine */
 		POA rootPOA = POAHelper.narrow (orb.resolve_initial_references ("RootPOA"));
 

Modified: trunk/src/de/berlios/jmds/server/core/ServerInter.java
===================================================================
--- trunk/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-19 18:56:06 UTC (rev 24)
+++ trunk/src/de/berlios/jmds/server/core/ServerInter.java	2005-02-19 20:09:30 UTC (rev 25)
@@ -27,12 +27,21 @@
 	 */
 	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
 	{
-		ServiceContext sc = ri.get_request_service_context (0);
-		String sData = new String (sc.context_data);
-		System.out.println ("ServerInter.receive request_SC: " + sData);
-		sc.context_data = "titi".getBytes ();
-		ri.add_reply_service_context (sc , true);
-
+		String sData;
+		System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
+		System.out.println ("RI : " + ri);
+//		if(ri.contexts() != null) {
+//			
+//			ServiceContext  sc = ri.get_request_service_context (0);			
+//			if(sc.context_data != null || sc.context_data.length == 0) { 
+//				sData = new String (sc.context_data);
+//			}
+//			else {
+//				System.out.println ("ServerInter.receive request_SC: send Exception");
+//				//send_exception(ri);
+//			}
+//		}
+		
 	}
 
 	/**
@@ -41,6 +50,16 @@
 	public void receive_request (ServerRequestInfo ri) throws ForwardRequest
 	{
 		System.out.println ("ServerInter.receive request: " + ri.operation ());
+		/*System.out.println ("RI : " + ri);
+		String sData;
+		ServiceContext  sc = ri.get_request_service_context (0);			
+		if(sc.context_data != null || sc.context_data.length == 0) { 
+			sData = new String (sc.context_data);
+		}
+		else {
+			System.out.println ("ServerInter.receive request_SC: send Exception");
+			send_exception(ri);
+		}*/
 	}
 
 	/**
@@ -48,9 +67,9 @@
 	 */
 	public void send_reply (ServerRequestInfo ri)
 	{
-		ServiceContext sc = ri.get_request_service_context (0);
+		/*ServiceContext sc = ri.get_request_service_context (0);
 		sc.context_data = "titi".getBytes ();
-		ri.add_reply_service_context (sc , true);
+		ri.add_reply_service_context (sc , true);*/
 		System.out.println ("ServerInter.send_reply: " + ri.operation ());
 
 	}



From jguers at free.fr  Mon Feb 21 15:13:31 2005
From: jguers at free.fr (=?iso-8859-1?Q?GUERS_J=E9r=F4me?=)
Date: Mon, 21 Feb 2005 15:13:31 +0100
Subject: [Jmds-svn] =?iso-8859-1?Q?Blocage_du_r=E9f=E9rentiel?=
Message-ID: <20050221153545.F062F14B5EF@huva.hittite.isp.9tel.net>

Salut les gros
 
Je vous envoie un mail pour vous demander de NE PAS TOUCHER ? la r?po ce PM.
En effet, je veux faire du m?nage pour faire la c?sure entre notre projet et
le forum (qui n'a rien ? faire ds nos paquetages!!) Mais, pour cela, il faut
que je sois le seul ? faire des commit pdt un moment pour que personne ne
ram?ne des src de forum apr?s.
 
=> si vous avez fait des modifs, merci de les commiter
 
Je vous ferais signe qd j'aurais tout fini.
GG
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050221/a2768e90/attachment.html>

From denis.bardin at tiscali.fr  Mon Feb 21 15:22:28 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Mon, 21 Feb 2005 15:22:28 +0100
Subject: [Jmds-svn] JMDS : Reunion
Message-ID: <20050221142236.C054E1734A6@postfix3-1.free.fr>

Ouep les gros !!!

 

Le projt de CORBA avance mais est loin d??tre termin? et le temps passe
vite. Il faut que vendredi le code soit fonctionnel.

 

Je propose une r?union vnr a 18h demain mardi 22 f?vrier 2005 pour faire un
passage de connaissance pour que chacun soit au m?me niveau mais aussi pour
se diviser les t?ches restantes afin de profiter au mieux de toutes les
ressources de notre ?quipe projet
 Il faut am?liorer le parall?lisme dans
nos t?ches !!!

 

Voila j?attends vos r?ponses dans la journ?e,

 

Denis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050221/f11161cd/attachment.html>

From jguers at sheep.berlios.de  Mon Feb 21 16:59:55 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Mon, 21 Feb 2005 16:59:55 +0100
Subject: [Jmds-svn] r26 - in trunk: . .settings generated generated/fr generated/fr/umlv generated/fr/umlv/ir3 generated/fr/umlv/ir3/corba generated/fr/umlv/ir3/corba/forum idl src src/de/berlios/jmds/applet src/de/berlios/jmds/client src/de/berlios/jmds/ior src/de/berlios/jmds/server src/fr src/fr/umlv src/fr/umlv/ir3 src/fr/umlv/ir3/corba src/fr/umlv/ir3/corba/forum
Message-ID: <200502211559.j1LFxttf027811@sheep.berlios.de>

Author: jguers
Date: 2005-02-21 16:59:53 +0100 (Mon, 21 Feb 2005)
New Revision: 26

Added:
   trunk/generated/
   trunk/generated/fr/
   trunk/generated/fr/umlv/
   trunk/generated/fr/umlv/ir3/
   trunk/generated/fr/umlv/ir3/corba/
   trunk/generated/fr/umlv/ir3/corba/forum/
   trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java
   trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/Forum.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java
   trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/Reject.java
   trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java
   trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java
   trunk/idl/forum.idl
   trunk/idl/generate.bat
   trunk/src/de/berlios/jmds/client/ClientInter.java
   trunk/src/de/berlios/jmds/client/ClientORBInitializer.java
   trunk/src/de/berlios/jmds/server/ServerInter.java
   trunk/src/de/berlios/jmds/server/ServerORBInitializer.java
   trunk/src/fr/
   trunk/src/fr/umlv/
   trunk/src/fr/umlv/ir3/
   trunk/src/fr/umlv/ir3/corba/
   trunk/src/fr/umlv/ir3/corba/forum/
   trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
Removed:
   trunk/ObjectRef
   trunk/generated-src/
   trunk/src/de/berlios/jmds/applet/Ping.java
   trunk/src/de/berlios/jmds/client/ForumClient.java
   trunk/src/de/berlios/jmds/client/core/
   trunk/src/de/berlios/jmds/server/ForumServer.java
   trunk/src/de/berlios/jmds/server/core/
Modified:
   trunk/.classpath
   trunk/.settings/org.eclipse.jdt.core.prefs
   trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
   trunk/src/de/berlios/jmds/ior/IORInter.java
Log:
Extraction de forum de nos sources
Creation du generateur de source a partir de l'IDL de forum

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/.classpath	2005-02-21 15:59:53 UTC (rev 26)
@@ -1,8 +1,8 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <classpath>
 	<classpathentry kind="src" path="src"/>
+	<classpathentry kind="src" path="generated"/>
 	<classpathentry kind="src" path="test"/>
-	<classpathentry kind="src" path="generated-src"/>
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
 	<classpathentry kind="lib" path="lib/slbJIop.jar"/>

Modified: trunk/.settings/org.eclipse.jdt.core.prefs
===================================================================
--- trunk/.settings/org.eclipse.jdt.core.prefs	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/.settings/org.eclipse.jdt.core.prefs	2005-02-21 15:59:53 UTC (rev 26)
@@ -1,7 +1,9 @@
-#Fri Feb 18 20:20:20 CET 2005
+#Mon Feb 21 15:53:16 CET 2005
 org.eclipse.jdt.core.compiler.debug.localVariable=generate
+org.eclipse.jdt.core.compiler.taskPriorities=NORMAL,HIGH,LOW,LOW
 org.eclipse.jdt.core.compiler.compliance=1.3
 org.eclipse.jdt.core.compiler.codegen.unusedLocal=preserve
+org.eclipse.jdt.core.compiler.taskCaseSensitive=enabled
 org.eclipse.jdt.core.compiler.debug.sourceFile=generate
 org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.1
 org.eclipse.jdt.core.compiler.problem.enumIdentifier=ignore
@@ -9,4 +11,5 @@
 org.eclipse.jdt.core.compiler.debug.lineNumber=generate
 org.eclipse.jdt.core.compiler.codegen.inlineJsrBytecode=enabled
 org.eclipse.jdt.core.compiler.source=1.3
+org.eclipse.jdt.core.compiler.taskTags=TODO,FIXME,DOCME,AVOIR
 org.eclipse.jdt.core.compiler.problem.assertIdentifier=ignore

Deleted: trunk/ObjectRef
===================================================================
--- trunk/ObjectRef	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/ObjectRef	2005-02-21 15:59:53 UTC (rev 26)
@@ -1 +0,0 @@
-IOR:000000000000001249444c3a7464322f466f72756d3a312e30000000000000010000000000000086000102000000000e38342e39392e3232322e323532000f1700000031afabcb0000000020279dc83800000001000000000000000100000008526f6f74504f410000000008000000010000000014000000000000020000000100000020000000000001000100000002050100010001002000010109000000010001010000000026000000020002
\ No newline at end of file

Added: trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,30 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/AudioMessage.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class AudioMessage implements org.omg.CORBA.portable.IDLEntity
+{
+  public String title = null;
+  public String author = null;
+  public String date = null;
+  public String body = null;
+
+  public AudioMessage ()
+  {
+  } // ctor
+
+  public AudioMessage (String _title, String _author, String _date, String _body)
+  {
+    title = _title;
+    author = _author;
+    date = _date;
+    body = _body;
+  } // ctor
+
+} // class AudioMessage

Added: trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,96 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/AudioMessageHelper.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+abstract public class AudioMessageHelper
+{
+  private static String  _id = "IDL:forum/AudioMessage/AudioMessage:1.0";
+
+  public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.forum.AudioMessage that)
+  {
+    org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+    a.type (type ());
+    write (out, that);
+    a.read_value (out.create_input_stream (), type ());
+  }
+
+  public static fr.umlv.ir3.corba.forum.AudioMessage extract (org.omg.CORBA.Any a)
+  {
+    return read (a.create_input_stream ());
+  }
+
+  private static org.omg.CORBA.TypeCode __typeCode = null;
+  private static boolean __active = false;
+  synchronized public static org.omg.CORBA.TypeCode type ()
+  {
+    if (__typeCode == null)
+    {
+      synchronized (org.omg.CORBA.TypeCode.class)
+      {
+        if (__typeCode == null)
+        {
+          if (__active)
+          {
+            return org.omg.CORBA.ORB.init().create_recursive_tc ( _id );
+          }
+          __active = true;
+          org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [4];
+          org.omg.CORBA.TypeCode _tcOf_members0 = null;
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[0] = new org.omg.CORBA.StructMember (
+            "title",
+            _tcOf_members0,
+            null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[1] = new org.omg.CORBA.StructMember (
+            "author",
+            _tcOf_members0,
+            null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[2] = new org.omg.CORBA.StructMember (
+            "date",
+            _tcOf_members0,
+            null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[3] = new org.omg.CORBA.StructMember (
+            "body",
+            _tcOf_members0,
+            null);
+          __typeCode = org.omg.CORBA.ORB.init ().create_struct_tc (fr.umlv.ir3.corba.forum.AudioMessageHelper.id (), "AudioMessage", _members0);
+          __active = false;
+        }
+      }
+    }
+    return __typeCode;
+  }
+
+  public static String id ()
+  {
+    return _id;
+  }
+
+  public static fr.umlv.ir3.corba.forum.AudioMessage read (org.omg.CORBA.portable.InputStream istream)
+  {
+    fr.umlv.ir3.corba.forum.AudioMessage value = new fr.umlv.ir3.corba.forum.AudioMessage ();
+    value.title = istream.read_string ();
+    value.author = istream.read_string ();
+    value.date = istream.read_string ();
+    value.body = istream.read_string ();
+    return value;
+  }
+
+  public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.forum.AudioMessage value)
+  {
+    ostream.write_string (value.title);
+    ostream.write_string (value.author);
+    ostream.write_string (value.date);
+    ostream.write_string (value.body);
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,38 @@
+package fr.umlv.ir3.corba.forum;
+
+/**
+* fr/umlv/ir3/corba/forum/AudioMessageHolder.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class AudioMessageHolder implements org.omg.CORBA.portable.Streamable
+{
+  public fr.umlv.ir3.corba.forum.AudioMessage value = null;
+
+  public AudioMessageHolder ()
+  {
+  }
+
+  public AudioMessageHolder (fr.umlv.ir3.corba.forum.AudioMessage initialValue)
+  {
+    value = initialValue;
+  }
+
+  public void _read (org.omg.CORBA.portable.InputStream i)
+  {
+    value = fr.umlv.ir3.corba.forum.AudioMessageHelper.read (i);
+  }
+
+  public void _write (org.omg.CORBA.portable.OutputStream o)
+  {
+    fr.umlv.ir3.corba.forum.AudioMessageHelper.write (o, value);
+  }
+
+  public org.omg.CORBA.TypeCode _type ()
+  {
+    return fr.umlv.ir3.corba.forum.AudioMessageHelper.type ();
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/Forum.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/Forum.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/Forum.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,13 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/Forum.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public interface Forum extends ForumOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity 
+{
+} // interface Forum

Added: trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,85 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/ForumHelper.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+abstract public class ForumHelper
+{
+  private static String  _id = "IDL:forum/Forum:1.0";
+
+  public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.forum.Forum that)
+  {
+    org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+    a.type (type ());
+    write (out, that);
+    a.read_value (out.create_input_stream (), type ());
+  }
+
+  public static fr.umlv.ir3.corba.forum.Forum extract (org.omg.CORBA.Any a)
+  {
+    return read (a.create_input_stream ());
+  }
+
+  private static org.omg.CORBA.TypeCode __typeCode = null;
+  synchronized public static org.omg.CORBA.TypeCode type ()
+  {
+    if (__typeCode == null)
+    {
+      __typeCode = org.omg.CORBA.ORB.init ().create_interface_tc (fr.umlv.ir3.corba.forum.ForumHelper.id (), "Forum");
+    }
+    return __typeCode;
+  }
+
+  public static String id ()
+  {
+    return _id;
+  }
+
+  public static fr.umlv.ir3.corba.forum.Forum read (org.omg.CORBA.portable.InputStream istream)
+  {
+    return narrow (istream.read_Object (_ForumStub.class));
+  }
+
+  public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.forum.Forum value)
+  {
+    ostream.write_Object ((org.omg.CORBA.Object) value);
+  }
+
+  public static fr.umlv.ir3.corba.forum.Forum narrow (org.omg.CORBA.Object obj)
+  {
+    if (obj == null)
+      return null;
+    else if (obj instanceof fr.umlv.ir3.corba.forum.Forum)
+      return (fr.umlv.ir3.corba.forum.Forum)obj;
+    else if (!obj._is_a (id ()))
+      throw new org.omg.CORBA.BAD_PARAM ();
+    else
+    {
+      org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl)obj)._get_delegate ();
+      fr.umlv.ir3.corba.forum._ForumStub stub = new fr.umlv.ir3.corba.forum._ForumStub ();
+      stub._set_delegate(delegate);
+      return stub;
+    }
+  }
+
+  public static fr.umlv.ir3.corba.forum.Forum unchecked_narrow (org.omg.CORBA.Object obj)
+  {
+    if (obj == null)
+      return null;
+    else if (obj instanceof fr.umlv.ir3.corba.forum.Forum)
+      return (fr.umlv.ir3.corba.forum.Forum)obj;
+    else
+    {
+      org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl)obj)._get_delegate ();
+      fr.umlv.ir3.corba.forum._ForumStub stub = new fr.umlv.ir3.corba.forum._ForumStub ();
+      stub._set_delegate(delegate);
+      return stub;
+    }
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,38 @@
+package fr.umlv.ir3.corba.forum;
+
+/**
+* fr/umlv/ir3/corba/forum/ForumHolder.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class ForumHolder implements org.omg.CORBA.portable.Streamable
+{
+  public fr.umlv.ir3.corba.forum.Forum value = null;
+
+  public ForumHolder ()
+  {
+  }
+
+  public ForumHolder (fr.umlv.ir3.corba.forum.Forum initialValue)
+  {
+    value = initialValue;
+  }
+
+  public void _read (org.omg.CORBA.portable.InputStream i)
+  {
+    value = fr.umlv.ir3.corba.forum.ForumHelper.read (i);
+  }
+
+  public void _write (org.omg.CORBA.portable.OutputStream o)
+  {
+    fr.umlv.ir3.corba.forum.ForumHelper.write (o, value);
+  }
+
+  public org.omg.CORBA.TypeCode _type ()
+  {
+    return fr.umlv.ir3.corba.forum.ForumHelper.type ();
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,20 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/ForumOperations.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public interface ForumOperations 
+{
+  String theme ();
+  String moderator ();
+  void postMessage (String title, org.omg.CORBA.Any m) throws fr.umlv.ir3.corba.forum.Reject;
+  org.omg.CORBA.Any getMessage (String title) throws fr.umlv.ir3.corba.forum.Reject;
+  void removeMessage (String title) throws fr.umlv.ir3.corba.forum.Reject;
+  org.omg.CORBA.Any[] messageList ();
+  void getInfo (org.omg.CORBA.StringHolder theme, org.omg.CORBA.StringHolder moderator, org.omg.CORBA.IntHolder size);
+} // interface ForumOperations

Added: trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,151 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/ForumPOA.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public abstract class ForumPOA extends org.omg.PortableServer.Servant
+ implements fr.umlv.ir3.corba.forum.ForumOperations, org.omg.CORBA.portable.InvokeHandler
+{
+
+  // Constructors
+
+  private static java.util.Hashtable _methods = new java.util.Hashtable ();
+  static
+  {
+    _methods.put ("_get_theme", new java.lang.Integer (0));
+    _methods.put ("_get_moderator", new java.lang.Integer (1));
+    _methods.put ("postMessage", new java.lang.Integer (2));
+    _methods.put ("getMessage", new java.lang.Integer (3));
+    _methods.put ("removeMessage", new java.lang.Integer (4));
+    _methods.put ("messageList", new java.lang.Integer (5));
+    _methods.put ("getInfo", new java.lang.Integer (6));
+  }
+
+  public org.omg.CORBA.portable.OutputStream _invoke (String $method,
+                                org.omg.CORBA.portable.InputStream in,
+                                org.omg.CORBA.portable.ResponseHandler $rh)
+  {
+    org.omg.CORBA.portable.OutputStream out = null;
+    java.lang.Integer __method = (java.lang.Integer)_methods.get ($method);
+    if (__method == null)
+      throw new org.omg.CORBA.BAD_OPERATION (0, org.omg.CORBA.CompletionStatus.COMPLETED_MAYBE);
+
+    switch (__method.intValue ())
+    {
+       case 0:  // forum/Forum/_get_theme
+       {
+         String $result = null;
+         $result = this.theme ();
+         out = $rh.createReply();
+         out.write_string ($result);
+         break;
+       }
+
+       case 1:  // forum/Forum/_get_moderator
+       {
+         String $result = null;
+         $result = this.moderator ();
+         out = $rh.createReply();
+         out.write_string ($result);
+         break;
+       }
+
+       case 2:  // forum/Forum/postMessage
+       {
+         try {
+           String title = in.read_string ();
+           org.omg.CORBA.Any m = in.read_any ();
+           this.postMessage (title, m);
+           out = $rh.createReply();
+         } catch (fr.umlv.ir3.corba.forum.Reject $ex) {
+           out = $rh.createExceptionReply ();
+           fr.umlv.ir3.corba.forum.RejectHelper.write (out, $ex);
+         }
+         break;
+       }
+
+       case 3:  // forum/Forum/getMessage
+       {
+         try {
+           String title = in.read_string ();
+           org.omg.CORBA.Any $result = null;
+           $result = this.getMessage (title);
+           out = $rh.createReply();
+           out.write_any ($result);
+         } catch (fr.umlv.ir3.corba.forum.Reject $ex) {
+           out = $rh.createExceptionReply ();
+           fr.umlv.ir3.corba.forum.RejectHelper.write (out, $ex);
+         }
+         break;
+       }
+
+       case 4:  // forum/Forum/removeMessage
+       {
+         try {
+           String title = in.read_string ();
+           this.removeMessage (title);
+           out = $rh.createReply();
+         } catch (fr.umlv.ir3.corba.forum.Reject $ex) {
+           out = $rh.createExceptionReply ();
+           fr.umlv.ir3.corba.forum.RejectHelper.write (out, $ex);
+         }
+         break;
+       }
+
+       case 5:  // forum/Forum/messageList
+       {
+         org.omg.CORBA.Any $result[] = null;
+         $result = this.messageList ();
+         out = $rh.createReply();
+         fr.umlv.ir3.corba.forum.MessageSetHelper.write (out, $result);
+         break;
+       }
+
+       case 6:  // forum/Forum/getInfo
+       {
+         org.omg.CORBA.StringHolder theme = new org.omg.CORBA.StringHolder ();
+         org.omg.CORBA.StringHolder moderator = new org.omg.CORBA.StringHolder ();
+         org.omg.CORBA.IntHolder size = new org.omg.CORBA.IntHolder ();
+         this.getInfo (theme, moderator, size);
+         out = $rh.createReply();
+         out.write_string (theme.value);
+         out.write_string (moderator.value);
+         out.write_long (size.value);
+         break;
+       }
+
+       default:
+         throw new org.omg.CORBA.BAD_OPERATION (0, org.omg.CORBA.CompletionStatus.COMPLETED_MAYBE);
+    }
+
+    return out;
+  } // _invoke
+
+  // Type-specific CORBA::Object operations
+  private static String[] __ids = {
+    "IDL:forum/Forum:1.0"};
+
+  public String[] _all_interfaces (org.omg.PortableServer.POA poa, byte[] objectId)
+  {
+    return (String[])__ids.clone ();
+  }
+
+  public Forum _this() 
+  {
+    return ForumHelper.narrow(
+    super._this_object());
+  }
+
+  public Forum _this(org.omg.CORBA.ORB orb) 
+  {
+    return ForumHelper.narrow(
+    super._this_object(orb));
+  }
+
+
+} // class ForumPOA

Added: trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,62 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/MessageSetHelper.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+abstract public class MessageSetHelper
+{
+  private static String  _id = "IDL:forum/MessageSet:1.0";
+
+  public static void insert (org.omg.CORBA.Any a, org.omg.CORBA.Any[] that)
+  {
+    org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+    a.type (type ());
+    write (out, that);
+    a.read_value (out.create_input_stream (), type ());
+  }
+
+  public static org.omg.CORBA.Any[] extract (org.omg.CORBA.Any a)
+  {
+    return read (a.create_input_stream ());
+  }
+
+  private static org.omg.CORBA.TypeCode __typeCode = null;
+  synchronized public static org.omg.CORBA.TypeCode type ()
+  {
+    if (__typeCode == null)
+    {
+      __typeCode = org.omg.CORBA.ORB.init ().get_primitive_tc (org.omg.CORBA.TCKind.tk_any);
+      __typeCode = org.omg.CORBA.ORB.init ().create_sequence_tc (0, __typeCode);
+      __typeCode = org.omg.CORBA.ORB.init ().create_alias_tc (fr.umlv.ir3.corba.forum.MessageSetHelper.id (), "MessageSet", __typeCode);
+    }
+    return __typeCode;
+  }
+
+  public static String id ()
+  {
+    return _id;
+  }
+
+  public static org.omg.CORBA.Any[] read (org.omg.CORBA.portable.InputStream istream)
+  {
+    org.omg.CORBA.Any value[] = null;
+    int _len0 = istream.read_long ();
+    value = new org.omg.CORBA.Any[_len0];
+    for (int _o1 = 0;_o1 < value.length; ++_o1)
+      value[_o1] = istream.read_any ();
+    return value;
+  }
+
+  public static void write (org.omg.CORBA.portable.OutputStream ostream, org.omg.CORBA.Any[] value)
+  {
+    ostream.write_long (value.length);
+    for (int _i0 = 0;_i0 < value.length; ++_i0)
+      ostream.write_any (value[_i0]);
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,39 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/MessageSetHolder.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class MessageSetHolder implements org.omg.CORBA.portable.Streamable
+{
+  public org.omg.CORBA.Any value[] = null;
+
+  public MessageSetHolder ()
+  {
+  }
+
+  public MessageSetHolder (org.omg.CORBA.Any[] initialValue)
+  {
+    value = initialValue;
+  }
+
+  public void _read (org.omg.CORBA.portable.InputStream i)
+  {
+    value = fr.umlv.ir3.corba.forum.MessageSetHelper.read (i);
+  }
+
+  public void _write (org.omg.CORBA.portable.OutputStream o)
+  {
+    fr.umlv.ir3.corba.forum.MessageSetHelper.write (o, value);
+  }
+
+  public org.omg.CORBA.TypeCode _type ()
+  {
+    return fr.umlv.ir3.corba.forum.MessageSetHelper.type ();
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/Reject.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/Reject.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/Reject.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,33 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/Reject.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class Reject extends org.omg.CORBA.UserException
+{
+  public String message = null;
+
+  public Reject ()
+  {
+    super(RejectHelper.id());
+  } // ctor
+
+  public Reject (String _message)
+  {
+    super(RejectHelper.id());
+    message = _message;
+  } // ctor
+
+
+  public Reject (String $reason, String _message)
+  {
+    super(RejectHelper.id() + "  " + $reason);
+    message = _message;
+  } // ctor
+
+} // class Reject

Added: trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,79 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/RejectHelper.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+abstract public class RejectHelper
+{
+  private static String  _id = "IDL:forum/Reject:1.0";
+
+  public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.forum.Reject that)
+  {
+    org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+    a.type (type ());
+    write (out, that);
+    a.read_value (out.create_input_stream (), type ());
+  }
+
+  public static fr.umlv.ir3.corba.forum.Reject extract (org.omg.CORBA.Any a)
+  {
+    return read (a.create_input_stream ());
+  }
+
+  private static org.omg.CORBA.TypeCode __typeCode = null;
+  private static boolean __active = false;
+  synchronized public static org.omg.CORBA.TypeCode type ()
+  {
+    if (__typeCode == null)
+    {
+      synchronized (org.omg.CORBA.TypeCode.class)
+      {
+        if (__typeCode == null)
+        {
+          if (__active)
+          {
+            return org.omg.CORBA.ORB.init().create_recursive_tc ( _id );
+          }
+          __active = true;
+          org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [1];
+          org.omg.CORBA.TypeCode _tcOf_members0 = null;
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[0] = new org.omg.CORBA.StructMember (
+            "message",
+            _tcOf_members0,
+            null);
+          __typeCode = org.omg.CORBA.ORB.init ().create_exception_tc (fr.umlv.ir3.corba.forum.RejectHelper.id (), "Reject", _members0);
+          __active = false;
+        }
+      }
+    }
+    return __typeCode;
+  }
+
+  public static String id ()
+  {
+    return _id;
+  }
+
+  public static fr.umlv.ir3.corba.forum.Reject read (org.omg.CORBA.portable.InputStream istream)
+  {
+    fr.umlv.ir3.corba.forum.Reject value = new fr.umlv.ir3.corba.forum.Reject ();
+    // read and discard the repository ID
+    istream.read_string ();
+    value.message = istream.read_string ();
+    return value;
+  }
+
+  public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.forum.Reject value)
+  {
+    // write the repository ID
+    ostream.write_string (id ());
+    ostream.write_string (value.message);
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,38 @@
+package fr.umlv.ir3.corba.forum;
+
+/**
+* fr/umlv/ir3/corba/forum/RejectHolder.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class RejectHolder implements org.omg.CORBA.portable.Streamable
+{
+  public fr.umlv.ir3.corba.forum.Reject value = null;
+
+  public RejectHolder ()
+  {
+  }
+
+  public RejectHolder (fr.umlv.ir3.corba.forum.Reject initialValue)
+  {
+    value = initialValue;
+  }
+
+  public void _read (org.omg.CORBA.portable.InputStream i)
+  {
+    value = fr.umlv.ir3.corba.forum.RejectHelper.read (i);
+  }
+
+  public void _write (org.omg.CORBA.portable.OutputStream o)
+  {
+    fr.umlv.ir3.corba.forum.RejectHelper.write (o, value);
+  }
+
+  public org.omg.CORBA.TypeCode _type ()
+  {
+    return fr.umlv.ir3.corba.forum.RejectHelper.type ();
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,30 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/TextMessage.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class TextMessage implements org.omg.CORBA.portable.IDLEntity
+{
+  public String title = null;
+  public String author = null;
+  public String date = null;
+  public String body = null;
+
+  public TextMessage ()
+  {
+  } // ctor
+
+  public TextMessage (String _title, String _author, String _date, String _body)
+  {
+    title = _title;
+    author = _author;
+    date = _date;
+    body = _body;
+  } // ctor
+
+} // class TextMessage

Added: trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,96 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/TextMessageHelper.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+abstract public class TextMessageHelper
+{
+  private static String  _id = "IDL:forum/TextMessage/TextMessage:1.0";
+
+  public static void insert (org.omg.CORBA.Any a, fr.umlv.ir3.corba.forum.TextMessage that)
+  {
+    org.omg.CORBA.portable.OutputStream out = a.create_output_stream ();
+    a.type (type ());
+    write (out, that);
+    a.read_value (out.create_input_stream (), type ());
+  }
+
+  public static fr.umlv.ir3.corba.forum.TextMessage extract (org.omg.CORBA.Any a)
+  {
+    return read (a.create_input_stream ());
+  }
+
+  private static org.omg.CORBA.TypeCode __typeCode = null;
+  private static boolean __active = false;
+  synchronized public static org.omg.CORBA.TypeCode type ()
+  {
+    if (__typeCode == null)
+    {
+      synchronized (org.omg.CORBA.TypeCode.class)
+      {
+        if (__typeCode == null)
+        {
+          if (__active)
+          {
+            return org.omg.CORBA.ORB.init().create_recursive_tc ( _id );
+          }
+          __active = true;
+          org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [4];
+          org.omg.CORBA.TypeCode _tcOf_members0 = null;
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[0] = new org.omg.CORBA.StructMember (
+            "title",
+            _tcOf_members0,
+            null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[1] = new org.omg.CORBA.StructMember (
+            "author",
+            _tcOf_members0,
+            null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[2] = new org.omg.CORBA.StructMember (
+            "date",
+            _tcOf_members0,
+            null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[3] = new org.omg.CORBA.StructMember (
+            "body",
+            _tcOf_members0,
+            null);
+          __typeCode = org.omg.CORBA.ORB.init ().create_struct_tc (fr.umlv.ir3.corba.forum.TextMessageHelper.id (), "TextMessage", _members0);
+          __active = false;
+        }
+      }
+    }
+    return __typeCode;
+  }
+
+  public static String id ()
+  {
+    return _id;
+  }
+
+  public static fr.umlv.ir3.corba.forum.TextMessage read (org.omg.CORBA.portable.InputStream istream)
+  {
+    fr.umlv.ir3.corba.forum.TextMessage value = new fr.umlv.ir3.corba.forum.TextMessage ();
+    value.title = istream.read_string ();
+    value.author = istream.read_string ();
+    value.date = istream.read_string ();
+    value.body = istream.read_string ();
+    return value;
+  }
+
+  public static void write (org.omg.CORBA.portable.OutputStream ostream, fr.umlv.ir3.corba.forum.TextMessage value)
+  {
+    ostream.write_string (value.title);
+    ostream.write_string (value.author);
+    ostream.write_string (value.date);
+    ostream.write_string (value.body);
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,38 @@
+package fr.umlv.ir3.corba.forum;
+
+/**
+* fr/umlv/ir3/corba/forum/TextMessageHolder.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public final class TextMessageHolder implements org.omg.CORBA.portable.Streamable
+{
+  public fr.umlv.ir3.corba.forum.TextMessage value = null;
+
+  public TextMessageHolder ()
+  {
+  }
+
+  public TextMessageHolder (fr.umlv.ir3.corba.forum.TextMessage initialValue)
+  {
+    value = initialValue;
+  }
+
+  public void _read (org.omg.CORBA.portable.InputStream i)
+  {
+    value = fr.umlv.ir3.corba.forum.TextMessageHelper.read (i);
+  }
+
+  public void _write (org.omg.CORBA.portable.OutputStream o)
+  {
+    fr.umlv.ir3.corba.forum.TextMessageHelper.write (o, value);
+  }
+
+  public org.omg.CORBA.TypeCode _type ()
+  {
+    return fr.umlv.ir3.corba.forum.TextMessageHelper.type ();
+  }
+
+}

Added: trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,186 @@
+package fr.umlv.ir3.corba.forum;
+
+
+/**
+* fr/umlv/ir3/corba/forum/_ForumStub.java .
+* Generated by the IDL-to-Java compiler (portable), version "3.2"
+* from forum.idl
+* lundi 21 f?vrier 2005 16 h 44 CET
+*/
+
+public class _ForumStub extends org.omg.CORBA.portable.ObjectImpl implements fr.umlv.ir3.corba.forum.Forum
+{
+
+  public String theme ()
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("_get_theme", true);
+                $in = _invoke ($out);
+                String $result = $in.read_string ();
+                return $result;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                return theme (        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // theme
+
+  public String moderator ()
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("_get_moderator", true);
+                $in = _invoke ($out);
+                String $result = $in.read_string ();
+                return $result;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                return moderator (        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // moderator
+
+  public void postMessage (String title, org.omg.CORBA.Any m) throws fr.umlv.ir3.corba.forum.Reject
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("postMessage", true);
+                $out.write_string (title);
+                $out.write_any (m);
+                $in = _invoke ($out);
+                return;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                if (_id.equals ("IDL:forum/Reject:1.0"))
+                    throw fr.umlv.ir3.corba.forum.RejectHelper.read ($in);
+                else
+                    throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                postMessage (title, m        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // postMessage
+
+  public org.omg.CORBA.Any getMessage (String title) throws fr.umlv.ir3.corba.forum.Reject
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("getMessage", true);
+                $out.write_string (title);
+                $in = _invoke ($out);
+                org.omg.CORBA.Any $result = $in.read_any ();
+                return $result;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                if (_id.equals ("IDL:forum/Reject:1.0"))
+                    throw fr.umlv.ir3.corba.forum.RejectHelper.read ($in);
+                else
+                    throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                return getMessage (title        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // getMessage
+
+  public void removeMessage (String title) throws fr.umlv.ir3.corba.forum.Reject
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("removeMessage", true);
+                $out.write_string (title);
+                $in = _invoke ($out);
+                return;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                if (_id.equals ("IDL:forum/Reject:1.0"))
+                    throw fr.umlv.ir3.corba.forum.RejectHelper.read ($in);
+                else
+                    throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                removeMessage (title        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // removeMessage
+
+  public org.omg.CORBA.Any[] messageList ()
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("messageList", true);
+                $in = _invoke ($out);
+                org.omg.CORBA.Any $result[] = fr.umlv.ir3.corba.forum.MessageSetHelper.read ($in);
+                return $result;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                return messageList (        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // messageList
+
+  public void getInfo (org.omg.CORBA.StringHolder theme, org.omg.CORBA.StringHolder moderator, org.omg.CORBA.IntHolder size)
+  {
+            org.omg.CORBA.portable.InputStream $in = null;
+            try {
+                org.omg.CORBA.portable.OutputStream $out = _request ("getInfo", true);
+                $in = _invoke ($out);
+                theme.value = $in.read_string ();
+                moderator.value = $in.read_string ();
+                size.value = $in.read_long ();
+                return;
+            } catch (org.omg.CORBA.portable.ApplicationException $ex) {
+                $in = $ex.getInputStream ();
+                String _id = $ex.getId ();
+                throw new org.omg.CORBA.MARSHAL (_id);
+            } catch (org.omg.CORBA.portable.RemarshalException $rm) {
+                getInfo (theme, moderator, size        );
+            } finally {
+                _releaseReply ($in);
+            }
+  } // getInfo
+
+  // Type-specific CORBA::Object operations
+  private static String[] __ids = {
+    "IDL:forum/Forum:1.0"};
+
+  public String[] _ids ()
+  {
+    return (String[])__ids.clone ();
+  }
+
+  private void readObject (java.io.ObjectInputStream s) throws java.io.IOException
+  {
+     String str = s.readUTF ();
+     String[] args = null;
+     java.util.Properties props = null;
+     org.omg.CORBA.Object obj = org.omg.CORBA.ORB.init (args, props).string_to_object (str);
+     org.omg.CORBA.portable.Delegate delegate = ((org.omg.CORBA.portable.ObjectImpl) obj)._get_delegate ();
+     _set_delegate (delegate);
+  }
+
+  private void writeObject (java.io.ObjectOutputStream s) throws java.io.IOException
+  {
+     String[] args = null;
+     java.util.Properties props = null;
+     String str = org.omg.CORBA.ORB.init (args, props).object_to_string (this);
+     s.writeUTF (str);
+  }
+} // class _ForumStub

Added: trunk/idl/forum.idl
===================================================================
--- trunk/idl/forum.idl	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/idl/forum.idl	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,28 @@
+module forum {
+  struct TextMessage {
+    string title;
+    string author;
+    string date;
+    string body;
+  };
+	
+  struct AudioMessage {
+    string title;
+    string author;
+    string date;
+    string body;
+  };
+  typedef sequence <any> MessageSet;
+  exception Reject { string message; };
+	 
+  interface Forum {
+    readonly attribute string theme;
+    readonly attribute string moderator;
+    void postMessage(in string title,in any m) raises (Reject); 
+    any getMessage(in string title) raises (Reject);
+    void removeMessage(in string title) raises (Reject);
+    MessageSet messageList();
+    void getInfo(out string theme, out string moderator,
+                 out long size);
+  };
+};

Added: trunk/idl/generate.bat
===================================================================
--- trunk/idl/generate.bat	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/idl/generate.bat	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1 @@
+"%JAVA_HOME%\bin\idlj" -td ../generated/ -pkgPrefix forum fr.umlv.ir3.corba  -fall forum.idl
\ No newline at end of file

Modified: trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -11,8 +11,7 @@
 import javacard.framework.ISO7816;
 
 /**
- * Premi?re classe de test d'une applet JavaCard Renvoie juste les donn?es
- * envoy?es
+ * DOCME
  * 
  * @version 0.1
  * 

Deleted: trunk/src/de/berlios/jmds/applet/Ping.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/Ping.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/applet/Ping.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -1,82 +0,0 @@
-/*
- * Created on 8 f?vr. 2005
- * by J?r?me GUERS
- * Copyright: GPL - UMLV(FR) - 2004/2005
- */
-package de.berlios.jmds.applet;
-
-import javacard.framework.APDU;
-import javacard.framework.Applet;
-import javacard.framework.ISOException;
-import javacard.framework.ISO7816;
-
-/**
- * Premi?re classe de test d'une applet JavaCard Renvoie juste les donn?es
- * envoy?es
- * 
- * @version 0.1
- * 
- * @author J?r?me GUERS
- */
-public class Ping extends Applet {
-
-    private final static byte CLA_PING = (byte) 0x80;
-    private final static byte ECHO_REQUEST = (byte) 0x10;
-    private final static byte ECHO_REPLY = (byte) 0x30;
-    private final static short BUFFER_LENGTH = (short) 255;
-
-    private byte[] buffer;
-    private byte messLength;
-
-    /**
-     * Constructeur par d?faut
-     */
-    protected Ping() {
-        buffer = new byte[BUFFER_LENGTH];
-        messLength = (byte) 0;
-        register();
-    }
-
-    /**
-     * @see javacard.framework.Applet#install(byte[], short, byte)
-     */
-    public static void install(byte[] bArray, short bOffset, byte bLength) {
-        new Ping();
-    }
-
-    /**
-     * M?thide appel?e ? l'arriv?e d'une trame APDU
-     * 
-     * @param apdu
-     * @throws ISOException
-     * 
-     * @see javacard.framework.Applet#process(javacard.framework.APDU)
-     */
-    public void process(APDU apdu) throws ISOException {
-        byte[] tmpBuffer = apdu.getBuffer();
-
-        // CLA ? 0x80
-        if (tmpBuffer[ISO7816.OFFSET_CLA] == CLA_PING) {
-            switch (tmpBuffer[ISO7816.OFFSET_INS]) {
-            case ECHO_REQUEST:
-                messLength = (byte)(apdu.setIncomingAndReceive());
-//                if ((byteRead > (byte) BUFFER_LENGTH) || (byteRead <= (byte) 0))
-//                    ISOException.throwIt(ISO7816.SW_WRONG_DATA);
-                for (byte i = (byte) 0; i < messLength; i++) {
-                    buffer[i] = tmpBuffer[ISO7816.OFFSET_CDATA + i];
-                }
-                break;
-
-            case ECHO_REPLY:
-                // Le = taille de la r?ponse attendue
-                short Le = apdu.setOutgoing();
-                // Verification que Le >= Lc (taille des donn?es envoy?es)
-                if (Le < messLength)
-                    ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
-                apdu.setOutgoingLength((short) messLength);
-                apdu.sendBytesLong(buffer, (short) 0, (short) messLength);
-                break;
-            }
-        }
-    }
-}

Added: trunk/src/de/berlios/jmds/client/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,79 @@
+/*
+ * Created on 18 f?vr. 2005
+ * by S?bastien GUINCHARD
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.client;
+
+import org.omg.PortableInterceptor.*;
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author S?bastien GUINCHARD
+ */
+public class ClientInter extends org.omg.CORBA.LocalObject implements
+        ClientRequestInterceptor {
+
+    /**
+     * Comment for <code>serialVersionUID</code>
+     */
+    private static final long serialVersionUID = 1L;
+
+    /**
+     * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
+     */
+    public void send_request(ClientRequestInfo ri) throws ForwardRequest {
+        // ServiceContext sc = new ServiceContext ();
+        // byte[] scData = "toto".getBytes();
+        // sc.context_data = scData;
+        // ri.add_request_service_context (null, true);
+        System.out.println("ClientInter.send request: " + ri.operation());
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_poll(org.omg.PortableInterceptor.ClientRequestInfo)
+     */
+    public void send_poll(ClientRequestInfo ri) {
+        System.out.println("ClientInter.send poll: " + ri.operation());
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_reply(org.omg.PortableInterceptor.ClientRequestInfo)
+     */
+    public void receive_reply(ClientRequestInfo ri) {
+        System.out.println("ClientInter.receive reply: " + ri.operation());
+        // ServiceContext sc = ri.get_reply_service_context(0);
+        // String sData = new String(sc.context_data);
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_exception(org.omg.PortableInterceptor.ClientRequestInfo)
+     */
+    public void receive_exception(ClientRequestInfo ri) throws ForwardRequest {
+        System.out.println("ClientInter.receive exception: ");
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_other(org.omg.PortableInterceptor.ClientRequestInfo)
+     */
+    public void receive_other(ClientRequestInfo ri) throws ForwardRequest {
+        System.out.println("ClientInter.receive other: " + ri.operation());
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+     */
+    public String name() {
+        return "Mon intercepteur";
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+     */
+    public void destroy() {
+    }
+
+}

Added: trunk/src/de/berlios/jmds/client/ClientORBInitializer.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientORBInitializer.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/client/ClientORBInitializer.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,46 @@
+/*
+ * Created on 18 f?vr. 2005
+ * by S?bastien GUINCHARD
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.client;
+
+import org.omg.CORBA.LocalObject;
+import org.omg.PortableInterceptor.ORBInitInfo;
+import org.omg.PortableInterceptor.ORBInitializer;
+import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author S?bastien GUINCHARD
+ */
+public class ClientORBInitializer extends LocalObject implements ORBInitializer {
+
+    /**
+     * Comment for <code>serialVersionUID</code>
+     */
+    private static final long serialVersionUID = 1L;
+
+    /**
+     * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
+     */
+    public void pre_init(ORBInitInfo info) {
+        System.out.println("MonORBInitializer.pre_init: ORB ID: " + info);
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.ORBInitializerOperations#post_init(org.omg.PortableInterceptor.ORBInitInfo)
+     */
+    public void post_init(ORBInitInfo info) {
+        System.out.println("MonORBInitializer.post_init: ORB ID: " + info);
+        ClientInter client = new ClientInter();
+        try {
+            info.add_client_request_interceptor(client);
+        } catch (DuplicateName e) {
+            e.printStackTrace();
+        }
+    }
+}

Deleted: trunk/src/de/berlios/jmds/client/ForumClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/client/ForumClient.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -1,105 +0,0 @@
-/*
- * Created on 1 oct. 2004
- */
-package de.berlios.jmds.client;
-
-import java.io.*;
-import java.util.Date;
-import java.util.Properties;
-
-import org.omg.CORBA.ORB;
-
-import de.berlios.jmds.generated.Forum;
-import de.berlios.jmds.generated.ForumHelper;
-import de.berlios.jmds.generated.Message;
-
-
-
-/**
- * @author jguers
- */
-public class ForumClient
-{
-
-	/**
-	 * @param args
-	 * @throws IOException
-	 */
-	public static void main (String [] args) throws IOException
-	{
-
-		/* initialisation de l'ORB */
-/*		Properties prop = new Properties ();
-		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.core.ClientORBInitializer" , "");
-		ORB orb = ORB.init (args , prop);
-*/
-		/*Initilisation de JAC ORB*/
-		java.util.Properties props = new java.util.Properties();
-		props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.core.ClientORBInitializer" , "");
-		props.put("jacorb.implname","StandardNS");
-		ORB orb = org.omg.CORBA.ORB.init(args, props);
-		
-		/* R?cup?ration de l'id de l'objet servant */
-		BufferedReader buffer = new BufferedReader (new FileReader ("ObjectRef"));
-		String ior = buffer.readLine ();
-
-		BufferedReader in = new BufferedReader (new InputStreamReader (System.in));
-
-		/* Cr?ation d'un objet Forum */
-		Forum forumProxy = ForumHelper.narrow (orb.string_to_object (ior));
-		while (true)
-		{
-			System.out.println ("Que voulez-vous faire ?");
-			System.out.println ("a - ajouter un message");
-			System.out.println ("v - voir les messages");
-			System.out.println ("l - lire un message");
-			System.out.println ("r - retirer un message");
-
-			int choix = System.in.read ();
-			in.readLine ();
-			switch (choix)
-			{
-				case 'a' :
-				{
-					/*System.out.print ("Votre nom: ");
-					String auth = in.readLine ();
-					System.out.print ("Titre du message: ");
-					String title = in.readLine ();
-					System.out.print ("Message: ");
-					String mess = in.readLine ();
-					forumProxy.postMessage (new Message (title, auth, (new Date ()).toString (), mess));*/
-					forumProxy.postMessage (new Message ("toto", "titi", (new Date ()).toString (), "tutu"));
-				}
-					break;
-
-				case 'l' :
-				{
-					System.out.print ("Titre du message: ");
-					String title = in.readLine ();
-					Message m = forumProxy.getMessage (title);
-					System.out.println (m.author + " a ?crit ? " + m.date.toString ());
-					System.out.println ("Titre: " + m.title);
-					System.out.println (m.body + "\n");
-				}
-					break;
-
-				case 'r' :
-				{
-					System.out.print ("Titre du message: ");
-					String title = in.readLine ();
-				}
-					break;
-
-				case 'v' :
-				{
-					Message [] tab = forumProxy.getMessages ();
-
-					for (int i = 0; i < tab.length; i++)
-					{
-						System.out.println (tab [i].author + "\t" + tab [i].date + "\t" + tab [i].title + "\n");
-					}
-				}
-			}
-		}
-	}
-}

Modified: trunk/src/de/berlios/jmds/ior/IORInter.java
===================================================================
--- trunk/src/de/berlios/jmds/ior/IORInter.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/ior/IORInter.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -1,6 +1,7 @@
 /*
- * Created on 18 f?vr. 2005 TODO To change the template for this generated file
- * go to Window - Preferences - Java - Code Style - Code Templates
+ * Created on 18 f?vr. 2005
+ * by S?bastien GUINCHARD
+ * Copyright: GPL - UMLV(FR) - 2004/2005
  */
 package de.berlios.jmds.ior;
 
@@ -9,8 +10,11 @@
 
 
 /**
- * @author sguincha TODO To change the template for this generated type comment
- *         go to Window - Preferences - Java - Code Style - Code Templates
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author S?bastien GUINCHARD
  */
 public class IORInter extends org.omg.CORBA.LocalObject implements IORInterceptor
 {
@@ -45,5 +49,4 @@
 		// TODO Auto-generated method stub
 
 	}
-
 }

Deleted: trunk/src/de/berlios/jmds/server/ForumServer.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ForumServer.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/server/ForumServer.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -1,72 +0,0 @@
-/*
- * Created on 1 oct. 2004
- */
-package de.berlios.jmds.server;
-
-import java.io.*;
-import java.util.Properties;
-
-import org.omg.CORBA.*;
-import org.omg.CORBA.Object;
-import org.omg.CORBA.ORBPackage.InvalidName;
-import org.omg.PortableServer.*;
-import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
-import org.omg.PortableServer.POAPackage.*;
-
-import de.berlios.jmds.server.core.ForumImpl;
-
-
-
-/**
- * @author jguers
- */
-public class ForumServer
-{
-
-	/**
-	 * @param args
-	 * @throws InvalidName
-	 * @throws ServantAlreadyActive
-	 * @throws ObjectNotActive
-	 * @throws WrongPolicy
-	 * @throws IOException
-	 * @throws AdapterInactive
-	 */
-	public static void main (String [] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive
-	{
-		/* Initialisation de l'ORB */
-/*		Properties prop = new Properties ();
-		prop.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.core.ServerORBInitializer" , "");
-		ORB orb = ORB.init (args , prop);
-*/
-		/*Initilisation de JAC ORB*/
-		java.util.Properties props = new java.util.Properties();
-		props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.core.ServerORBInitializer" , "");
-		props.put("jacorb.implname","StandardNS");
-		ORB orb = org.omg.CORBA.ORB.init(args, props);
-		
-		/* R?cup?ration de r?f?rence de l'adaptateur d'objet racine */
-		POA rootPOA = POAHelper.narrow (orb.resolve_initial_references ("RootPOA"));
-
-		/* Cr?ation de l'objet SERVANT */
-		ForumImpl forum = new ForumImpl ("Forum de Test", "GG");
-
-		/* Enregistrement et activation de l'objet servant dans le POA */
-		byte [] objectID = rootPOA.activate_object (forum);
-
-		/* R?cup?ration de la r?f?rence du servant */
-		Object obj = rootPOA.id_to_reference (objectID);
-
-		/* Enregistrement de l'ID de l'objet dans un fichier */
-		FileOutputStream file = new FileOutputStream ("ObjectRef");
-		file.write (orb.object_to_string (obj).getBytes ());
-
-		/* Activation du POA */
-		rootPOA.the_POAManager ().activate ();
-
-		/* Lancement de l'ORB */
-		System.out.println ("Server started");
-		orb.run ();
-
-	}
-}

Added: trunk/src/de/berlios/jmds/server/ServerInter.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,110 @@
+/*
+ * Created on 18 f?vr. 2005
+ * by S?bastien GUINCHARD
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.server;
+
+import org.omg.PortableInterceptor.*;
+
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author S?bastien GUINCHARD
+ */
+public class ServerInter extends org.omg.CORBA.LocalObject implements ServerRequestInterceptor
+{
+
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 1L;
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request_service_contexts(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
+	{
+		String sData;
+		System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
+		System.out.println ("RI : " + ri);
+//		if(ri.contexts() != null) {
+//			
+//			ServiceContext  sc = ri.get_request_service_context (0);			
+//			if(sc.context_data != null || sc.context_data.length == 0) { 
+//				sData = new String (sc.context_data);
+//			}
+//			else {
+//				System.out.println ("ServerInter.receive request_SC: send Exception");
+//				//send_exception(ri);
+//			}
+//		}
+		
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void receive_request (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.receive request: " + ri.operation ());
+		/*System.out.println ("RI : " + ri);
+		String sData;
+		ServiceContext  sc = ri.get_request_service_context (0);			
+		if(sc.context_data != null || sc.context_data.length == 0) { 
+			sData = new String (sc.context_data);
+		}
+		else {
+			System.out.println ("ServerInter.receive request_SC: send Exception");
+			send_exception(ri);
+		}*/
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_reply(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_reply (ServerRequestInfo ri)
+	{
+		/*ServiceContext sc = ri.get_request_service_context (0);
+		sc.context_data = "titi".getBytes ();
+		ri.add_reply_service_context (sc , true);*/
+		System.out.println ("ServerInter.send_reply: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_exception(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_exception (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.send_exception: " + ri.operation ());
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#send_other(org.omg.PortableInterceptor.ServerRequestInfo)
+	 */
+	public void send_other (ServerRequestInfo ri) throws ForwardRequest
+	{
+		System.out.println ("ServerInter.send_other: " + ri.operation ());
+
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#name()
+	 */
+	public String name ()
+	{
+		return "Mon Intercepteur Serveur";
+	}
+
+	/**
+	 * @see org.omg.PortableInterceptor.InterceptorOperations#destroy()
+	 */
+	public void destroy ()
+	{
+	}
+
+}

Added: trunk/src/de/berlios/jmds/server/ServerORBInitializer.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ServerORBInitializer.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/de/berlios/jmds/server/ServerORBInitializer.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,49 @@
+/*
+ * Created on 18 f?vr. 2005
+ * by S?bastien GUINCHARD
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.server;
+
+import org.omg.CORBA.LocalObject;
+import org.omg.PortableInterceptor.*;
+import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author S?bastien GUINCHARD
+ */
+public class ServerORBInitializer extends LocalObject implements ORBInitializer {
+
+    /**
+     * Comment for <code>serialVersionUID</code>
+     */
+    private static final long serialVersionUID = 1L;
+
+    /**
+     * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
+     */
+    public void pre_init(ORBInitInfo info) {
+        System.out.println("MonORBInitializer.pre_init: ORB ID: " + info);
+    }
+
+    /**
+     * @see org.omg.PortableInterceptor.ORBInitializerOperations#post_init(org.omg.PortableInterceptor.ORBInitInfo)
+     */
+    public void post_init(ORBInitInfo info) {
+        System.out.println("MonORBInitializer.post_init: ORB ID: " + info);
+        // ClientInter client = new ClientInter();
+        ServerInter server = new ServerInter();
+        // IORInter ior = new IORInter();
+        try {
+            // info.add_client_request_interceptor(client);
+            info.add_server_request_interceptor(server);
+            // info.add_ior_interceptor(ior);
+        } catch (DuplicateName e) {
+            e.printStackTrace();
+        }
+    }
+}

Added: trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,62 @@
+package fr.umlv.ir3.corba.forum;
+
+import java.util.Date;
+import org.omg.CORBA.*;
+import org.omg.CosNaming.*;
+
+public class ForumClient {
+
+  public static void printMessage(Any a) throws Reject {
+    if (a == null) {
+      System.out.println(a);
+      return;
+    }
+    if (a.type().equal(AudioMessageHelper.type())) {
+      AudioMessage m = AudioMessageHelper.extract(a);
+      System.out.println("Message audio: ");
+      System.out.println("\tTitre : "+m.title);
+      System.out.println("\tAuteur : "+m.author);
+      System.out.println("\tDate : "+m.date);
+      System.out.println("\tTexte : "+m.body);
+      return;
+    }
+    if (a.type().equal(TextMessageHelper.type())) {
+      TextMessage m = TextMessageHelper.extract(a);
+      System.out.println("Message texte : ");
+      System.out.println("\tTitre : "+m.title);
+      System.out.println("\tAuteur : "+m.author);
+      System.out.println("\tDate : "+m.date);
+      System.out.println("\tTexte : "+m.body);
+      return;
+    }
+    throw new Reject("Unknown message type.");
+  }
+  public static void main(String[] args) throws Exception { 
+    try {
+      ORB orb = ORB.init(args,null);
+      NamingContextExt context = NamingContextExtHelper.narrow(
+          orb.resolve_initial_references("NameService"));
+      NameComponent[] name = context.to_name("Forum");
+      Forum forum = ForumHelper.narrow(context.resolve(name));
+     
+      Any a = orb.create_any();
+      AudioMessageHelper.insert(a,
+          new AudioMessage("Titre1","Auteur1",
+              (new Date()).toString(),"audio.wav"));
+      forum.postMessage("Titre1",a);
+
+      TextMessageHelper.insert(a,
+          new TextMessage("Titre2","Auteur2",
+              (new Date()).toString(),"file.txt"));
+      forum.postMessage("Titre2",a);
+
+      System.out.println("MessageList");
+      Any[] messages = forum.messageList();
+      for(int i = 0; i<messages.length; i++) {
+        printMessage(messages[i]);
+      }
+    } catch (Reject e){
+      System.out.println(e.message);
+    }
+  }
+}
\ No newline at end of file

Added: trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,77 @@
+package fr.umlv.ir3.corba.forum;
+
+import org.omg.CORBA.*;
+import org.omg.CORBA.Object;
+import org.omg.CosNaming.*;
+
+public class ForumDynClient {
+  public static void main(String[] args) throws Exception {
+    // Initialisation de l'ORB
+    ORB orb = ORB.init(args, null);
+    // R?cup?ration du service de nommage
+    NamingContextExt context = NamingContextExtHelper.narrow(orb
+        .resolve_initial_references("NameService"));
+    // R?cup?ration de l'objet forum
+    Object o = context.resolve_str("Forum");
+    // Construction d'un objet requ?te vide
+    Request request = o._request("getMessage");
+    // Sp?cification du type de retour de la requ?te
+    request.set_return_type(orb.get_primitive_tc(TCKind.tk_any));
+    // Sp?cification de l'argument
+    Any arg = request.add_named_in_arg("title");
+    arg.insert_string("Titre1");
+    // Sp?cification du type de l'exception
+    ExceptionList exceptionList = request.exceptions();
+    exceptionList.add(RejectHelper.type());
+    // Appel synchrone de la requ?te
+    request.invoke();
+//    // Appel synchrone diff?r?
+//    request.send_deferred();
+//    while (!request.poll_response()) {
+//      Thread.sleep(1000);
+//    }
+//    request.get_response();
+    // R?cup?ration de l'environnement
+    Environment env = request.env();
+    // Si pas d'exception
+    if (env.exception() == null) {
+      // R?cup?ration du r?sultat
+      Any result = request.return_value();
+      printMessage(result.extract_any());
+      return;
+    }    
+    // Extraction des exceptions
+    Any ex = ((UnknownUserException)env.exception()).except;
+    if (ex.type().equals(RejectHelper.type())) {
+      throw RejectHelper.extract(ex);
+    } else {
+      throw env.exception();
+  	}
+  }
+
+  public static void printMessage(Any a) throws Reject {
+    if (a == null) {
+      System.out.println(a);
+      return;
+    }
+    if (a.type().equal(AudioMessageHelper.type())) {
+      AudioMessage m = AudioMessageHelper.extract(a);
+      System.out.println("Message audio: ");
+      System.out.println("\tTitre : "+m.title);
+      System.out.println("\tAuteur : "+m.author);
+      System.out.println("\tDate : "+m.date);
+      System.out.println("\tTexte : "+m.body);
+      return;
+    }
+    if (a.type().equal(TextMessageHelper.type())) {
+      TextMessage m = TextMessageHelper.extract(a);
+      System.out.println("Message texte : ");
+      System.out.println("\tTitre : "+m.title);
+      System.out.println("\tAuteur : "+m.author);
+      System.out.println("\tDate : "+m.date);
+      System.out.println("\tTexte : "+m.body);
+      return;
+    }
+    throw new Reject("Unknown message type.");
+  }
+}
\ No newline at end of file

Added: trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,99 @@
+package fr.umlv.ir3.corba.forum;
+
+import java.util.concurrent.ConcurrentHashMap;
+
+import org.omg.CORBA.*;
+
+public class ForumImpl extends ForumPOA {
+  /**
+   * Table de hachage contenant l'assocication entre un nom
+   * et un message.
+   * L'acc?s concurrent ? la table est permis.
+   */
+  private ConcurrentHashMap messages = new ConcurrentHashMap();
+  /** Th?me du forum */
+  private String theme;
+  /** Nom de l'administrateur */
+  private String moderator;
+  
+  /** 
+   * Constructeur d'un forum appel? par la fabrique.
+   * @param name nom du forum cr??.
+   * @param theme th?me du forum.
+   * @param moderator nom de l'administrateur du forum.
+   */
+  ForumImpl(String theme, String moderator) {
+    this.theme = theme;
+    this.moderator = moderator;
+  }
+  
+  /** 
+   * Retourne le th?me du forum.
+   */
+  public String theme() {
+    return theme;
+  }
+
+  /** 
+   * Retourne le nom de l'administrateur du forum.
+   */
+  public String moderator() {
+    return moderator;
+  }
+  /**
+   * Poste un message dans le forum.
+   * @param m le message ? poster.
+   * @return false s'il y a d?j? un message avec le m?me titre.
+   */
+  public void postMessage(String title, Any m) throws Reject {
+    Any mInMap = (Any)messages.putIfAbsent(title,m);
+    if (mInMap != null) {
+      throw new Reject("PostMessage : message with title "+
+		       title + " already exists!");
+    }
+  }
+  /** 
+   * R?cup?re le message dont le titre est pass? en argument.
+   * @param title le titre du message ? r?cup?rer.
+   * @return le message ou null s'il n'existe pas de message
+   * ayant ce titre.
+   */
+  public Any getMessage(String title) throws Reject{
+    Any m = (Any)messages.get(title);
+    if (m == null) {
+      throw new Reject("GetMessage : message with title "+title+
+		       " does not exist!");
+    }
+    return m;
+  }
+  
+  /** 
+   * Supprime un message du forum.
+   * @param title le titre du message ? retirer du forum.
+   * @return false si le message n'est pas pr?sent dans le forum.
+   */
+  public void removeMessage(String title) throws Reject {
+    if (messages.remove(title) == null) {
+      throw new Reject("RemoveMessage : message " + title +
+		       " does not exist!");
+    }
+  }
+    
+  /**
+   * Retourne la liste des messages du forum.
+   * @return la liste des messages
+   */
+  public Any[] messageList() {
+    return (Any[]) messages.values().toArray(new Any[messages.size()]);
+  }
+  
+  /**
+   * Retourne dans les arguments les informations sur le forum.
+   */
+  public void getInfo(StringHolder theme, StringHolder moderator,
+		      IntHolder size) {
+    theme.value = this.theme;
+    moderator.value = this.moderator;
+    size.value = messages.size();
+  }
+}

Added: trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-19 20:09:30 UTC (rev 25)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-21 15:59:53 UTC (rev 26)
@@ -0,0 +1,49 @@
+package fr.umlv.ir3.corba.forum;
+
+import java.io.FileNotFoundException;
+
+import org.omg.CORBA.ORB;
+import org.omg.CosNaming.*;
+import org.omg.CosNaming.NamingContextPackage.*;
+import org.omg.PortableServer.*;
+import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
+import org.omg.PortableServer.POAPackage.*;
+
+public class ForumServer {
+  public static void main(String args[]) throws ServantAlreadyActive,
+      ObjectNotActive, WrongPolicy, FileNotFoundException,
+      AdapterInactive, org.omg.CORBA.ORBPackage.InvalidName, 
+      NotFound, CannotProceed, InvalidName {
+
+    //  Initialisation de l'ORB
+    ORB orb = ORB.init(args, null);
+
+    // R?cup?ration de r?f?rence de l'adaptateur d'objets racine
+    POA rootPOA = POAHelper.narrow(
+        orb.resolve_initial_references("RootPOA"));
+
+    // Initialisation de l'objet servant
+    ForumImpl servant = new ForumImpl("java","forax");
+
+    // Enregistrement du servant
+    byte[] servantId = rootPOA.activate_object(servant);
+
+    // R?cup?ration de la r?f?rence du servant
+    Forum forum = ForumHelper.narrow(
+        rootPOA.id_to_reference(servantId));
+    
+    // Enregistrement dans le service de nommage
+    NamingContextExt context = NamingContextExtHelper.narrow(
+        orb.resolve_initial_references("NameService"));
+    NameComponent[] name = context.to_name("Forum");
+    context.rebind(name,forum);
+    
+    // Activation des servants
+    rootPOA.the_POAManager().activate();
+
+    System.out.println("Server is ready");
+
+    // Mise en attente des requ?tes
+    orb.run();
+  }
+}



From sguinchard at gmail.com  Mon Feb 21 17:27:10 2005
From: sguinchard at gmail.com (=?windows-1252?Q?S=E9bastien_Guinchard?=)
Date: Mon, 21 Feb 2005 17:27:10 +0100
Subject: [Jmds-svn] JMDS : Reunion
In-Reply-To: <20050221142236.C054E1734A6@postfix3-1.free.fr>
References: <20050221142236.C054E1734A6@postfix3-1.free.fr>
Message-ID: <421A0BDE.6000004@gmail.com>

Pa de probl?me pour moi.... mardi 18 heures !!


bardin a ?crit :

> Ouep les gros !!!
>
> Le projt de CORBA avance mais est loin d??tre termin? et le temps 
> passe vite. Il faut que vendredi le code soit fonctionnel.
>
> Je propose une* r?union vnr a 18h demain mardi 22 f?vrier 2005 *pour 
> faire un passage de connaissance pour que chacun soit au m?me niveau 
> mais aussi pour se diviser les t?ches restantes afin de profiter au 
> mieux de toutes les ressources de notre ?quipe projet? Il faut 
> am?liorer le parall?lisme dans nos t?ches !!!
>
> Voila j?attends vos r?ponses dans la journ?e,
>
> Denis
>


From jguers at sheep.berlios.de  Mon Feb 21 17:52:03 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Mon, 21 Feb 2005 17:52:03 +0100
Subject: [Jmds-svn] r27 - in trunk: . generated/fr/umlv/ir3/corba/forum idl lib src/fr/umlv/ir3/corba/forum
Message-ID: <200502211652.j1LGq32S031931@sheep.berlios.de>

Author: jguers
Date: 2005-02-21 17:52:00 +0100 (Mon, 21 Feb 2005)
New Revision: 27

Added:
   trunk/lib/openorb-1.3.1.jar
   trunk/lib/xerces.jar
Removed:
   trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java
Modified:
   trunk/.classpath
   trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java
   trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/Forum.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java
   trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java
   trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/Reject.java
   trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java
   trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java
   trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java
   trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java
   trunk/idl/forum.idl
   trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
Log:
Remplacement par notre forum (je comprends pas tout dans celui du prof !!)
Il reste une erreur pour le serveur que je n'ai pas le temps de corriger

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/.classpath	2005-02-21 16:52:00 UTC (rev 27)
@@ -6,5 +6,7 @@
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
 	<classpathentry kind="lib" path="lib/slbJIop.jar"/>
+	<classpathentry kind="lib" path="lib/openorb-1.3.1.jar"/>
+	<classpathentry kind="lib" path="lib/xerces.jar"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Modified: trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/AudioMessage.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/AudioMessage.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class AudioMessage implements org.omg.CORBA.portable.IDLEntity
@@ -14,17 +14,19 @@
   public String author = null;
   public String date = null;
   public String body = null;
+  public String paroles = null;
 
   public AudioMessage ()
   {
   } // ctor
 
-  public AudioMessage (String _title, String _author, String _date, String _body)
+  public AudioMessage (String _title, String _author, String _date, String _body, String _paroles)
   {
     title = _title;
     author = _author;
     date = _date;
     body = _body;
+    paroles = _paroles;
   } // ctor
 
 } // class AudioMessage

Modified: trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHelper.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/AudioMessageHelper.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 abstract public class AudioMessageHelper
@@ -40,7 +40,7 @@
             return org.omg.CORBA.ORB.init().create_recursive_tc ( _id );
           }
           __active = true;
-          org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [4];
+          org.omg.CORBA.StructMember[] _members0 = new org.omg.CORBA.StructMember [5];
           org.omg.CORBA.TypeCode _tcOf_members0 = null;
           _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
           _members0[0] = new org.omg.CORBA.StructMember (
@@ -62,6 +62,11 @@
             "body",
             _tcOf_members0,
             null);
+          _tcOf_members0 = org.omg.CORBA.ORB.init ().create_string_tc (0);
+          _members0[4] = new org.omg.CORBA.StructMember (
+            "paroles",
+            _tcOf_members0,
+            null);
           __typeCode = org.omg.CORBA.ORB.init ().create_struct_tc (fr.umlv.ir3.corba.forum.AudioMessageHelper.id (), "AudioMessage", _members0);
           __active = false;
         }
@@ -82,6 +87,7 @@
     value.author = istream.read_string ();
     value.date = istream.read_string ();
     value.body = istream.read_string ();
+    value.paroles = istream.read_string ();
     return value;
   }
 
@@ -91,6 +97,7 @@
     ostream.write_string (value.author);
     ostream.write_string (value.date);
     ostream.write_string (value.body);
+    ostream.write_string (value.paroles);
   }
 
 }

Modified: trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/AudioMessageHolder.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -4,7 +4,7 @@
 * fr/umlv/ir3/corba/forum/AudioMessageHolder.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class AudioMessageHolder implements org.omg.CORBA.portable.Streamable

Modified: trunk/generated/fr/umlv/ir3/corba/forum/Forum.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/Forum.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/Forum.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/Forum.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public interface Forum extends ForumOperations, org.omg.CORBA.Object, org.omg.CORBA.portable.IDLEntity 

Modified: trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumHelper.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/ForumHelper.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 abstract public class ForumHelper

Modified: trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumHolder.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -4,7 +4,7 @@
 * fr/umlv/ir3/corba/forum/ForumHolder.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class ForumHolder implements org.omg.CORBA.portable.Streamable

Modified: trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumOperations.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,16 +5,16 @@
 * fr/umlv/ir3/corba/forum/ForumOperations.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public interface ForumOperations 
 {
   String theme ();
   String moderator ();
-  void postMessage (String title, org.omg.CORBA.Any m) throws fr.umlv.ir3.corba.forum.Reject;
+  boolean postMessage (String title, org.omg.CORBA.Any m) throws fr.umlv.ir3.corba.forum.Reject;
   org.omg.CORBA.Any getMessage (String title) throws fr.umlv.ir3.corba.forum.Reject;
+  org.omg.CORBA.Any[] getMessages ();
   void removeMessage (String title) throws fr.umlv.ir3.corba.forum.Reject;
-  org.omg.CORBA.Any[] messageList ();
   void getInfo (org.omg.CORBA.StringHolder theme, org.omg.CORBA.StringHolder moderator, org.omg.CORBA.IntHolder size);
 } // interface ForumOperations

Modified: trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/ForumPOA.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/ForumPOA.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public abstract class ForumPOA extends org.omg.PortableServer.Servant
@@ -21,8 +21,8 @@
     _methods.put ("_get_moderator", new java.lang.Integer (1));
     _methods.put ("postMessage", new java.lang.Integer (2));
     _methods.put ("getMessage", new java.lang.Integer (3));
-    _methods.put ("removeMessage", new java.lang.Integer (4));
-    _methods.put ("messageList", new java.lang.Integer (5));
+    _methods.put ("getMessages", new java.lang.Integer (4));
+    _methods.put ("removeMessage", new java.lang.Integer (5));
     _methods.put ("getInfo", new java.lang.Integer (6));
   }
 
@@ -60,8 +60,10 @@
          try {
            String title = in.read_string ();
            org.omg.CORBA.Any m = in.read_any ();
-           this.postMessage (title, m);
+           boolean $result = false;
+           $result = this.postMessage (title, m);
            out = $rh.createReply();
+           out.write_boolean ($result);
          } catch (fr.umlv.ir3.corba.forum.Reject $ex) {
            out = $rh.createExceptionReply ();
            fr.umlv.ir3.corba.forum.RejectHelper.write (out, $ex);
@@ -84,8 +86,17 @@
          break;
        }
 
-       case 4:  // forum/Forum/removeMessage
+       case 4:  // forum/Forum/getMessages
        {
+         org.omg.CORBA.Any $result[] = null;
+         $result = this.getMessages ();
+         out = $rh.createReply();
+         fr.umlv.ir3.corba.forum.MessageSetHelper.write (out, $result);
+         break;
+       }
+
+       case 5:  // forum/Forum/removeMessage
+       {
          try {
            String title = in.read_string ();
            this.removeMessage (title);
@@ -97,15 +108,6 @@
          break;
        }
 
-       case 5:  // forum/Forum/messageList
-       {
-         org.omg.CORBA.Any $result[] = null;
-         $result = this.messageList ();
-         out = $rh.createReply();
-         fr.umlv.ir3.corba.forum.MessageSetHelper.write (out, $result);
-         break;
-       }
-
        case 6:  // forum/Forum/getInfo
        {
          org.omg.CORBA.StringHolder theme = new org.omg.CORBA.StringHolder ();

Modified: trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHelper.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/MessageSetHelper.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 abstract public class MessageSetHelper

Modified: trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/MessageSetHolder.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/MessageSetHolder.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class MessageSetHolder implements org.omg.CORBA.portable.Streamable

Modified: trunk/generated/fr/umlv/ir3/corba/forum/Reject.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/Reject.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/Reject.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/Reject.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class Reject extends org.omg.CORBA.UserException

Modified: trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/RejectHelper.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/RejectHelper.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 abstract public class RejectHelper

Modified: trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/RejectHolder.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -4,7 +4,7 @@
 * fr/umlv/ir3/corba/forum/RejectHolder.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class RejectHolder implements org.omg.CORBA.portable.Streamable

Modified: trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/TextMessage.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/TextMessage.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class TextMessage implements org.omg.CORBA.portable.IDLEntity

Modified: trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHelper.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/TextMessageHelper.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 abstract public class TextMessageHelper

Modified: trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/TextMessageHolder.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -4,7 +4,7 @@
 * fr/umlv/ir3/corba/forum/TextMessageHolder.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public final class TextMessageHolder implements org.omg.CORBA.portable.Streamable

Modified: trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java
===================================================================
--- trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/generated/fr/umlv/ir3/corba/forum/_ForumStub.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -5,7 +5,7 @@
 * fr/umlv/ir3/corba/forum/_ForumStub.java .
 * Generated by the IDL-to-Java compiler (portable), version "3.2"
 * from forum.idl
-* lundi 21 f?vrier 2005 16 h 44 CET
+* lundi 21 f?vrier 2005 17 h 35 CET
 */
 
 public class _ForumStub extends org.omg.CORBA.portable.ObjectImpl implements fr.umlv.ir3.corba.forum.Forum
@@ -49,7 +49,7 @@
             }
   } // moderator
 
-  public void postMessage (String title, org.omg.CORBA.Any m) throws fr.umlv.ir3.corba.forum.Reject
+  public boolean postMessage (String title, org.omg.CORBA.Any m) throws fr.umlv.ir3.corba.forum.Reject
   {
             org.omg.CORBA.portable.InputStream $in = null;
             try {
@@ -57,7 +57,8 @@
                 $out.write_string (title);
                 $out.write_any (m);
                 $in = _invoke ($out);
-                return;
+                boolean $result = $in.read_boolean ();
+                return $result;
             } catch (org.omg.CORBA.portable.ApplicationException $ex) {
                 $in = $ex.getInputStream ();
                 String _id = $ex.getId ();
@@ -66,7 +67,7 @@
                 else
                     throw new org.omg.CORBA.MARSHAL (_id);
             } catch (org.omg.CORBA.portable.RemarshalException $rm) {
-                postMessage (title, m        );
+                return postMessage (title, m        );
             } finally {
                 _releaseReply ($in);
             }
@@ -95,46 +96,46 @@
             }
   } // getMessage
 
-  public void removeMessage (String title) throws fr.umlv.ir3.corba.forum.Reject
+  public org.omg.CORBA.Any[] getMessages ()
   {
             org.omg.CORBA.portable.InputStream $in = null;
             try {
-                org.omg.CORBA.portable.OutputStream $out = _request ("removeMessage", true);
-                $out.write_string (title);
+                org.omg.CORBA.portable.OutputStream $out = _request ("getMessages", true);
                 $in = _invoke ($out);
-                return;
+                org.omg.CORBA.Any $result[] = fr.umlv.ir3.corba.forum.MessageSetHelper.read ($in);
+                return $result;
             } catch (org.omg.CORBA.portable.ApplicationException $ex) {
                 $in = $ex.getInputStream ();
                 String _id = $ex.getId ();
-                if (_id.equals ("IDL:forum/Reject:1.0"))
-                    throw fr.umlv.ir3.corba.forum.RejectHelper.read ($in);
-                else
-                    throw new org.omg.CORBA.MARSHAL (_id);
+                throw new org.omg.CORBA.MARSHAL (_id);
             } catch (org.omg.CORBA.portable.RemarshalException $rm) {
-                removeMessage (title        );
+                return getMessages (        );
             } finally {
                 _releaseReply ($in);
             }
-  } // removeMessage
+  } // getMessages
 
-  public org.omg.CORBA.Any[] messageList ()
+  public void removeMessage (String title) throws fr.umlv.ir3.corba.forum.Reject
   {
             org.omg.CORBA.portable.InputStream $in = null;
             try {
-                org.omg.CORBA.portable.OutputStream $out = _request ("messageList", true);
+                org.omg.CORBA.portable.OutputStream $out = _request ("removeMessage", true);
+                $out.write_string (title);
                 $in = _invoke ($out);
-                org.omg.CORBA.Any $result[] = fr.umlv.ir3.corba.forum.MessageSetHelper.read ($in);
-                return $result;
+                return;
             } catch (org.omg.CORBA.portable.ApplicationException $ex) {
                 $in = $ex.getInputStream ();
                 String _id = $ex.getId ();
-                throw new org.omg.CORBA.MARSHAL (_id);
+                if (_id.equals ("IDL:forum/Reject:1.0"))
+                    throw fr.umlv.ir3.corba.forum.RejectHelper.read ($in);
+                else
+                    throw new org.omg.CORBA.MARSHAL (_id);
             } catch (org.omg.CORBA.portable.RemarshalException $rm) {
-                return messageList (        );
+                removeMessage (title        );
             } finally {
                 _releaseReply ($in);
             }
-  } // messageList
+  } // removeMessage
 
   public void getInfo (org.omg.CORBA.StringHolder theme, org.omg.CORBA.StringHolder moderator, org.omg.CORBA.IntHolder size)
   {

Modified: trunk/idl/forum.idl
===================================================================
--- trunk/idl/forum.idl	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/idl/forum.idl	2005-02-21 16:52:00 UTC (rev 27)
@@ -1,28 +1,30 @@
 module forum {
-  struct TextMessage {
-    string title;
-    string author;
-    string date;
-    string body;
-  };
+	struct TextMessage {
+		string title;
+		string author;
+		string date;
+		string body;
+	};
 	
-  struct AudioMessage {
-    string title;
-    string author;
-    string date;
-    string body;
-  };
-  typedef sequence <any> MessageSet;
-  exception Reject { string message; };
-	 
-  interface Forum {
-    readonly attribute string theme;
-    readonly attribute string moderator;
-    void postMessage(in string title,in any m) raises (Reject); 
-    any getMessage(in string title) raises (Reject);
-    void removeMessage(in string title) raises (Reject);
-    MessageSet messageList();
-    void getInfo(out string theme, out string moderator,
-                 out long size);
-  };
+	struct AudioMessage {
+		string title;
+		string author;
+		string date;
+		string body;
+		string paroles;
+	};
+	
+	typedef sequence <any> MessageSet;
+	exception Reject { string message; };
+	
+	interface Forum {
+		readonly attribute string theme;
+		readonly attribute string moderator;
+		boolean postMessage(in string title, in any m) raises (Reject);
+		any getMessage(in string title) raises (Reject);
+		MessageSet getMessages();
+		void removeMessage(in string title) raises (Reject);
+		void getInfo (out string theme, out string moderator, out long size);
+	};
 };
+

Added: trunk/lib/openorb-1.3.1.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/openorb-1.3.1.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/lib/xerces.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/xerces.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -1,62 +1,203 @@
-package fr.umlv.ir3.corba.forum;
-
-import java.util.Date;
-import org.omg.CORBA.*;
-import org.omg.CosNaming.*;
-
-public class ForumClient {
-
-  public static void printMessage(Any a) throws Reject {
-    if (a == null) {
-      System.out.println(a);
-      return;
-    }
-    if (a.type().equal(AudioMessageHelper.type())) {
-      AudioMessage m = AudioMessageHelper.extract(a);
-      System.out.println("Message audio: ");
-      System.out.println("\tTitre : "+m.title);
-      System.out.println("\tAuteur : "+m.author);
-      System.out.println("\tDate : "+m.date);
-      System.out.println("\tTexte : "+m.body);
-      return;
-    }
-    if (a.type().equal(TextMessageHelper.type())) {
-      TextMessage m = TextMessageHelper.extract(a);
-      System.out.println("Message texte : ");
-      System.out.println("\tTitre : "+m.title);
-      System.out.println("\tAuteur : "+m.author);
-      System.out.println("\tDate : "+m.date);
-      System.out.println("\tTexte : "+m.body);
-      return;
-    }
-    throw new Reject("Unknown message type.");
-  }
-  public static void main(String[] args) throws Exception { 
-    try {
-      ORB orb = ORB.init(args,null);
-      NamingContextExt context = NamingContextExtHelper.narrow(
-          orb.resolve_initial_references("NameService"));
-      NameComponent[] name = context.to_name("Forum");
-      Forum forum = ForumHelper.narrow(context.resolve(name));
-     
-      Any a = orb.create_any();
-      AudioMessageHelper.insert(a,
-          new AudioMessage("Titre1","Auteur1",
-              (new Date()).toString(),"audio.wav"));
-      forum.postMessage("Titre1",a);
-
-      TextMessageHelper.insert(a,
-          new TextMessage("Titre2","Auteur2",
-              (new Date()).toString(),"file.txt"));
-      forum.postMessage("Titre2",a);
-
-      System.out.println("MessageList");
-      Any[] messages = forum.messageList();
-      for(int i = 0; i<messages.length; i++) {
-        printMessage(messages[i]);
-      }
-    } catch (Reject e){
-      System.out.println(e.message);
-    }
-  }
-}
\ No newline at end of file
+/*
+ * Created on 1 oct. 2004
+ */
+package fr.umlv.ir3.corba.forum;
+
+import java.io.*;
+import java.util.Date;
+
+import org.omg.CORBA.*;
+import org.omg.CORBA.Object;
+import org.omg.CORBA.UnknownUserException;
+import org.omg.CosNaming.*;
+
+/**
+ * @author jguers
+ */
+public class ForumClient {
+
+	public static void main(String[] args) throws Exception {
+		ORB orb = ORB.init(args, null);
+        
+        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
+        
+        //Cr?ation du service d'annuaire
+        Object ns = orb.resolve_initial_references("NameService");
+        NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
+        
+        NameComponent[] name=null;
+        try {
+            name = nc.to_name("forumGG");
+        } catch (org.omg.CosNaming.NamingContextPackage.InvalidName e2) {e2.printStackTrace();}
+        
+        Object objProxy = nc.resolve(name);
+        
+        Forum forumProxy = ForumHelper.narrow(objProxy);
+
+		while(true)
+		{
+			System.out.println("Que voulez-vous faire ?");
+			System.out.println("a - ajouter un message");
+			System.out.println("v - voir les messages");
+			System.out.println("l - lire un message");
+			System.out.println("r - retirer un message");
+			
+			int choix = System.in.read();
+			in.readLine();
+			switch(choix)
+			{
+				case 'a' :
+				{
+					System.out.println("Quel type de message voulez-vous poster ?\n1: Texte\n2: Audio");
+					int type = Integer.parseInt(in.readLine());					
+					System.out.print("Votre nom: ");
+					String auth = in.readLine();
+					System.out.print("Titre du message: ");
+					String title = in.readLine();
+					System.out.print("Message: ");
+					String mess = in.readLine();
+					
+					Any any = orb.create_any();
+					
+					if(type == 1)
+					{
+						TextMessage message = new TextMessage(title, auth, (new Date()).toString(), mess);
+						TextMessageHelper.insert(any, message);
+					}else
+					{
+						System.out.print("Parole: ");
+						String paroles = in.readLine();
+						AudioMessage message =  new AudioMessage(title, auth, (new Date()).toString(), mess, paroles);
+						AudioMessageHelper.insert(any, message);
+					}
+					try {
+						forumProxy.postMessage(title, any);
+					} catch (Reject e) {
+						System.out.println("Message non ajout? pour cette raison:\n" + e.message);
+					}
+					
+				}
+					break;
+					
+				case 'l' :
+				{
+					System.out.print("Titre du message: ");
+					String title = in.readLine();
+					
+					Any lany;
+					/*V1
+					try {
+						lany = forumProxy.getMessage(title);
+						
+						TypeCode tc = lany.type();
+						
+						if(tc.equal(AudioMessageHelper.type()))
+						{
+							AudioMessage m = AudioMessageHelper.extract(lany);
+							System.out.println("Message Audio");
+							System.out.println(m.author + " a ?crit ? " + m.date.toString());
+							System.out.println("Titre: " + m.title);
+							System.out.println(m.body);
+							System.out.println(m.paroles + "\n");
+						}
+						else
+						{
+							TextMessage m = TextMessageHelper.extract(lany);
+							System.out.println("Message Texte");
+							System.out.println(m.author + " a ?crit ? " + m.date.toString());
+							System.out.println("Titre: " + m.title);
+							System.out.println(m.body + "\n");
+						}
+					} catch (Reject e) {
+						System.out.println("Message non trouv? pour cette raison:\n" + e.message);
+					}*/
+						
+					//V2
+					// Construction d'un objet requ?te vide
+				    Request request = forumProxy._request("getMessage");
+				    // Sp?cification du type de retour de la requ?te
+				    request.set_return_type(orb.get_primitive_tc(TCKind.tk_any));
+				    // Sp?cification de l'argument
+				    Any arg = request.add_named_in_arg("title");
+				    arg.insert_string(title);
+				    // Sp?cification du type de l'exception
+				    ExceptionList exceptionList = request.exceptions();
+				    exceptionList.add(RejectHelper.type());
+				    // Appel synchrone de la requ?te
+				    request.invoke();
+				    
+				    // R?cup?ration de l'environnement
+				    Environment env = request.env();
+				    // Si pas d'exception
+				    if (env.exception() == null) {
+				    	// R?cup?ration du r?sultat
+				    	lany = request.return_value().extract_any();
+				    	TypeCode tc = lany.type();
+						
+						if(tc.equal(AudioMessageHelper.type()))
+						{
+							AudioMessage m = AudioMessageHelper.extract(lany);
+							System.out.println("Message Audio");
+							System.out.println(m.author + " a ?crit ? " + m.date.toString());
+							System.out.println("Titre: " + m.title);
+							System.out.println(m.body);
+							System.out.println(m.paroles + "\n");
+						}
+						else
+						{
+							TextMessage m = TextMessageHelper.extract(lany);
+							System.out.println("Message Texte");
+							System.out.println(m.author + " a ?crit ? " + m.date.toString());
+							System.out.println("Titre: " + m.title);
+							System.out.println(m.body + "\n");
+						}
+				    }else
+				    {
+					    // Extraction des exceptions
+					    Any ex = ((UnknownUserException)env.exception()).except;
+					    if (ex.type().equals(RejectHelper.type())) {
+					    	System.out.println("Message non trouv? pour cette raison:\n" + RejectHelper.extract(ex).message);
+					    } else {
+					      throw env.exception();
+					  	}
+				    }
+				}
+					break;
+					
+				case 'r' :
+				{
+					System.out.print("Titre du message: ");
+					String title = in.readLine();
+					try {
+						forumProxy.removeMessage(title);
+					} catch (Reject e) {
+						System.out.println("Message non retir? pour cette raison:\n" + e.message);
+					}
+				}
+					break;
+					
+				case 'v' :
+				{
+					Any[] tab = forumProxy.getMessages();
+					
+					TypeCode tc = null;
+					
+					for (int i = 0; i < tab.length; i++) {
+						tc = tab[i].type();
+						
+						if(tc.equal(AudioMessageHelper.type()))
+						{
+							AudioMessage m = AudioMessageHelper.extract(tab[i]);
+							System.out.println("Message audio: " + m.author + "\t" + m.date + "\t" + m.title + "\n");
+						}
+						else
+						{
+							TextMessage m = TextMessageHelper.extract(tab[i]);
+							System.out.println("Message texte: " + m.author + "\t" + m.date + "\t" + m.title + "\n");
+						} 
+					}
+				}
+			}
+		}
+	}
+}

Deleted: trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumDynClient.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -1,77 +0,0 @@
-package fr.umlv.ir3.corba.forum;
-
-import org.omg.CORBA.*;
-import org.omg.CORBA.Object;
-import org.omg.CosNaming.*;
-
-public class ForumDynClient {
-  public static void main(String[] args) throws Exception {
-    // Initialisation de l'ORB
-    ORB orb = ORB.init(args, null);
-    // R?cup?ration du service de nommage
-    NamingContextExt context = NamingContextExtHelper.narrow(orb
-        .resolve_initial_references("NameService"));
-    // R?cup?ration de l'objet forum
-    Object o = context.resolve_str("Forum");
-    // Construction d'un objet requ?te vide
-    Request request = o._request("getMessage");
-    // Sp?cification du type de retour de la requ?te
-    request.set_return_type(orb.get_primitive_tc(TCKind.tk_any));
-    // Sp?cification de l'argument
-    Any arg = request.add_named_in_arg("title");
-    arg.insert_string("Titre1");
-    // Sp?cification du type de l'exception
-    ExceptionList exceptionList = request.exceptions();
-    exceptionList.add(RejectHelper.type());
-    // Appel synchrone de la requ?te
-    request.invoke();
-//    // Appel synchrone diff?r?
-//    request.send_deferred();
-//    while (!request.poll_response()) {
-//      Thread.sleep(1000);
-//    }
-//    request.get_response();
-    // R?cup?ration de l'environnement
-    Environment env = request.env();
-    // Si pas d'exception
-    if (env.exception() == null) {
-      // R?cup?ration du r?sultat
-      Any result = request.return_value();
-      printMessage(result.extract_any());
-      return;
-    }    
-    // Extraction des exceptions
-    Any ex = ((UnknownUserException)env.exception()).except;
-    if (ex.type().equals(RejectHelper.type())) {
-      throw RejectHelper.extract(ex);
-    } else {
-      throw env.exception();
-  	}
-  }
-
-  public static void printMessage(Any a) throws Reject {
-    if (a == null) {
-      System.out.println(a);
-      return;
-    }
-    if (a.type().equal(AudioMessageHelper.type())) {
-      AudioMessage m = AudioMessageHelper.extract(a);
-      System.out.println("Message audio: ");
-      System.out.println("\tTitre : "+m.title);
-      System.out.println("\tAuteur : "+m.author);
-      System.out.println("\tDate : "+m.date);
-      System.out.println("\tTexte : "+m.body);
-      return;
-    }
-    if (a.type().equal(TextMessageHelper.type())) {
-      TextMessage m = TextMessageHelper.extract(a);
-      System.out.println("Message texte : ");
-      System.out.println("\tTitre : "+m.title);
-      System.out.println("\tAuteur : "+m.author);
-      System.out.println("\tDate : "+m.date);
-      System.out.println("\tTexte : "+m.body);
-      return;
-    }
-    throw new Reject("Unknown message type.");
-  }
-}
\ No newline at end of file

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -1,99 +1,61 @@
-package fr.umlv.ir3.corba.forum;
-
-import java.util.concurrent.ConcurrentHashMap;
-
-import org.omg.CORBA.*;
-
-public class ForumImpl extends ForumPOA {
-  /**
-   * Table de hachage contenant l'assocication entre un nom
-   * et un message.
-   * L'acc?s concurrent ? la table est permis.
-   */
-  private ConcurrentHashMap messages = new ConcurrentHashMap();
-  /** Th?me du forum */
-  private String theme;
-  /** Nom de l'administrateur */
-  private String moderator;
-  
-  /** 
-   * Constructeur d'un forum appel? par la fabrique.
-   * @param name nom du forum cr??.
-   * @param theme th?me du forum.
-   * @param moderator nom de l'administrateur du forum.
-   */
-  ForumImpl(String theme, String moderator) {
-    this.theme = theme;
-    this.moderator = moderator;
-  }
-  
-  /** 
-   * Retourne le th?me du forum.
-   */
-  public String theme() {
-    return theme;
-  }
-
-  /** 
-   * Retourne le nom de l'administrateur du forum.
-   */
-  public String moderator() {
-    return moderator;
-  }
-  /**
-   * Poste un message dans le forum.
-   * @param m le message ? poster.
-   * @return false s'il y a d?j? un message avec le m?me titre.
-   */
-  public void postMessage(String title, Any m) throws Reject {
-    Any mInMap = (Any)messages.putIfAbsent(title,m);
-    if (mInMap != null) {
-      throw new Reject("PostMessage : message with title "+
-		       title + " already exists!");
-    }
-  }
-  /** 
-   * R?cup?re le message dont le titre est pass? en argument.
-   * @param title le titre du message ? r?cup?rer.
-   * @return le message ou null s'il n'existe pas de message
-   * ayant ce titre.
-   */
-  public Any getMessage(String title) throws Reject{
-    Any m = (Any)messages.get(title);
-    if (m == null) {
-      throw new Reject("GetMessage : message with title "+title+
-		       " does not exist!");
-    }
-    return m;
-  }
-  
-  /** 
-   * Supprime un message du forum.
-   * @param title le titre du message ? retirer du forum.
-   * @return false si le message n'est pas pr?sent dans le forum.
-   */
-  public void removeMessage(String title) throws Reject {
-    if (messages.remove(title) == null) {
-      throw new Reject("RemoveMessage : message " + title +
-		       " does not exist!");
-    }
-  }
-    
-  /**
-   * Retourne la liste des messages du forum.
-   * @return la liste des messages
-   */
-  public Any[] messageList() {
-    return (Any[]) messages.values().toArray(new Any[messages.size()]);
-  }
-  
-  /**
-   * Retourne dans les arguments les informations sur le forum.
-   */
-  public void getInfo(StringHolder theme, StringHolder moderator,
-		      IntHolder size) {
-    theme.value = this.theme;
-    moderator.value = this.moderator;
-    size.value = messages.size();
-  }
-}
+/*
+ * Created on 1 oct. 2004
+ */
+package fr.umlv.ir3.corba.forum;
+
+import java.util.concurrent.ConcurrentHashMap;
+import org.omg.CORBA.*;
+
+/**
+ * @author jguers
+ */
+public class ForumImpl extends ForumPOA {
+
+	private String theme;
+	private String moderator;
+	private ConcurrentHashMap discussion;
+	
+	public ForumImpl(String theme, String moderator)
+	{
+		this.theme = theme;
+		this.moderator = moderator;
+		discussion = new ConcurrentHashMap();
+	}
+	
+	public String theme() {
+		return theme;
+	}
+
+	public String moderator() {
+		return moderator;
+	}
+
+	public boolean postMessage(String title, org.omg.CORBA.Any m) throws Reject{
+		if(discussion.putIfAbsent(title, m) == null)
+			return true;
+		return false;
+	}
+
+	public Any getMessage(String title)  throws Reject{
+		if(!discussion.containsKey(title))
+			throw new Reject("Title unknow", "Pas de message ayant ce titre: " + title);
+		return (Any) discussion.get(title);
+	}
+
+	public void removeMessage(String title) throws Reject {
+		if(discussion.containsKey(title))
+		{
+			discussion.remove(title);
+		}
+	}
+	
+	 public Any[] getMessages () {
+	 	return (Any[]) discussion.values().toArray(new Any[discussion.size()]);
+	 }
+	 
+	 public void getInfo (StringHolder theme, StringHolder moderator, IntHolder size) {
+	 	theme.value = this.theme;
+	 	moderator.value = this.moderator;
+	 	size.value = discussion.size();
+	 }
+}

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-21 15:59:53 UTC (rev 26)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-21 16:52:00 UTC (rev 27)
@@ -1,49 +1,64 @@
-package fr.umlv.ir3.corba.forum;
-
-import java.io.FileNotFoundException;
-
-import org.omg.CORBA.ORB;
-import org.omg.CosNaming.*;
-import org.omg.CosNaming.NamingContextPackage.*;
-import org.omg.PortableServer.*;
-import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
-import org.omg.PortableServer.POAPackage.*;
-
-public class ForumServer {
-  public static void main(String args[]) throws ServantAlreadyActive,
-      ObjectNotActive, WrongPolicy, FileNotFoundException,
-      AdapterInactive, org.omg.CORBA.ORBPackage.InvalidName, 
-      NotFound, CannotProceed, InvalidName {
-
-    //  Initialisation de l'ORB
-    ORB orb = ORB.init(args, null);
-
-    // R?cup?ration de r?f?rence de l'adaptateur d'objets racine
-    POA rootPOA = POAHelper.narrow(
-        orb.resolve_initial_references("RootPOA"));
-
-    // Initialisation de l'objet servant
-    ForumImpl servant = new ForumImpl("java","forax");
-
-    // Enregistrement du servant
-    byte[] servantId = rootPOA.activate_object(servant);
-
-    // R?cup?ration de la r?f?rence du servant
-    Forum forum = ForumHelper.narrow(
-        rootPOA.id_to_reference(servantId));
-    
-    // Enregistrement dans le service de nommage
-    NamingContextExt context = NamingContextExtHelper.narrow(
-        orb.resolve_initial_references("NameService"));
-    NameComponent[] name = context.to_name("Forum");
-    context.rebind(name,forum);
-    
-    // Activation des servants
-    rootPOA.the_POAManager().activate();
-
-    System.out.println("Server is ready");
-
-    // Mise en attente des requ?tes
-    orb.run();
-  }
-}
+/*
+ * Created on 1 oct. 2004
+ */
+package fr.umlv.ir3.corba.forum;
+
+import java.io.*;
+
+import org.omg.CORBA.*;
+import org.omg.CORBA.Object;
+import org.omg.CORBA.ORBPackage.InvalidName;
+import org.omg.CosNaming.*;
+import org.omg.CosNaming.NamingContextPackage.*;
+import org.omg.PortableServer.*;
+import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
+import org.omg.PortableServer.POAPackage.*;
+
+/**
+ * @author jguers
+ */
+public class ForumServer {
+
+	public static void main(String[] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive, NotFound, AlreadyBound, CannotProceed, org.omg.CosNaming.NamingContextPackage.InvalidName {
+		ORB orb = ORB.init(args, null);
+		POA rootPOA = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
+		
+		ForumImpl forum = new ForumImpl("Forum de Test", "GG");
+		
+		byte [] objectID = rootPOA.activate_object(forum);
+		Object obj = rootPOA.id_to_reference(objectID);
+		
+        //Cr?ation du service d'annuaire
+        Object ns = orb.resolve_initial_references("NameService");
+        NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
+        
+        NameComponent[] name=null;
+        NamingContext ctxNC = null;
+        
+        try
+        {
+             ctxNC = nc.bind_new_context(nc.to_name("CTX"));
+        }
+        catch (AlreadyBound e) {
+            Object objTemp = nc.resolve(nc.to_name("CTX"));
+            if (objTemp instanceof NamingContext) {
+                nc.rebind(nc.to_name("CTX"), objTemp);
+            }
+            else throw e;
+        }
+        name = nc.to_name("CTX/forumGG");
+        
+        try {
+            nc.bind(name,obj);
+        } 
+        catch (AlreadyBound e) {
+            e.printStackTrace();
+            nc.rebind(name,obj);
+        }
+        
+		rootPOA.the_POAManager().activate();
+		orb.run();
+        
+        System.out.println("Server ready");
+	}
+}



From jguers at sheep.berlios.de  Tue Feb 22 01:41:34 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Tue, 22 Feb 2005 01:41:34 +0100
Subject: [Jmds-svn] r28 - in trunk: . lib src/de/berlios/jmds/client src/de/berlios/jmds/server src/fr/umlv/ir3/corba/forum
Message-ID: <200502220041.j1M0fYBA017060@sheep.berlios.de>

Author: jguers
Date: 2005-02-22 01:41:31 +0100 (Tue, 22 Feb 2005)
New Revision: 28

Removed:
   trunk/lib/openorb-1.3.1.jar
   trunk/lib/xerces.jar
Modified:
   trunk/.classpath
   trunk/src/de/berlios/jmds/client/ClientInter.java
   trunk/src/de/berlios/jmds/server/ServerInter.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
Log:
Pb du service contexte vide regle
Identifiant de la trame trouv?\195?\169 (ce ne sera pas l'heure qui n'est en fait pas transmise)
En revanche : AUCUNE IDEE de comment d?\195?\169truire une requete qui n'est pas bonne ...

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-21 16:52:00 UTC (rev 27)
+++ trunk/.classpath	2005-02-22 00:41:31 UTC (rev 28)
@@ -6,7 +6,5 @@
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
 	<classpathentry kind="lib" path="lib/slbJIop.jar"/>
-	<classpathentry kind="lib" path="lib/openorb-1.3.1.jar"/>
-	<classpathentry kind="lib" path="lib/xerces.jar"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Deleted: trunk/lib/openorb-1.3.1.jar
===================================================================
(Binary files differ)

Deleted: trunk/lib/xerces.jar
===================================================================
(Binary files differ)

Modified: trunk/src/de/berlios/jmds/client/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-21 16:52:00 UTC (rev 27)
+++ trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-22 00:41:31 UTC (rev 28)
@@ -5,6 +5,7 @@
  */
 package de.berlios.jmds.client;
 
+import org.omg.IOP.ServiceContext;
 import org.omg.PortableInterceptor.*;
 
 /**
@@ -20,7 +21,7 @@
     /**
      * Comment for <code>serialVersionUID</code>
      */
-    private static final long serialVersionUID = 1L;
+    private static final long serialVersionUID = 3618417146430765111L;
 
     /**
      * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
@@ -29,8 +30,9 @@
         // ServiceContext sc = new ServiceContext ();
         // byte[] scData = "toto".getBytes();
         // sc.context_data = scData;
-        // ri.add_request_service_context (null, true);
-        System.out.println("ClientInter.send request: " + ri.operation());
+        // ri.add_request_service_context (sc, true);
+        System.out.println("ClientInter.send request: " + ri.operation()
+                + " number: " + ri.request_id());
     }
 
     /**
@@ -44,7 +46,8 @@
      * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_reply(org.omg.PortableInterceptor.ClientRequestInfo)
      */
     public void receive_reply(ClientRequestInfo ri) {
-        System.out.println("ClientInter.receive reply: " + ri.operation());
+        System.out.println("ClientInter.receive reply: " + ri.operation()
+                + " number: " + ri.request_id());
         // ServiceContext sc = ri.get_reply_service_context(0);
         // String sData = new String(sc.context_data);
     }

Modified: trunk/src/de/berlios/jmds/server/ServerInter.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-21 16:52:00 UTC (rev 27)
+++ trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-22 00:41:31 UTC (rev 28)
@@ -5,9 +5,9 @@
  */
 package de.berlios.jmds.server;
 
+import org.omg.IOP.ServiceContext;
 import org.omg.PortableInterceptor.*;
 
-
 /**
  * DOCME
  * 
@@ -18,31 +18,27 @@
 public class ServerInter extends org.omg.CORBA.LocalObject implements ServerRequestInterceptor
 {
 
-	/**
-	 * Comment for <code>serialVersionUID</code>
-	 */
-	private static final long	serialVersionUID	= 1L;
+    /**
+     * Comment for <code>serialVersionUID</code>
+     */
+    private static final long serialVersionUID = 3689630311277277232L;
 
-	/**
+    /**
 	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request_service_contexts(org.omg.PortableInterceptor.ServerRequestInfo)
 	 */
 	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
 	{
 		String sData;
-		System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
-		System.out.println ("RI : " + ri);
-//		if(ri.contexts() != null) {
-//			
-//			ServiceContext  sc = ri.get_request_service_context (0);			
-//			if(sc.context_data != null || sc.context_data.length == 0) { 
-//				sData = new String (sc.context_data);
-//			}
-//			else {
-//				System.out.println ("ServerInter.receive request_SC: send Exception");
-//				//send_exception(ri);
-//			}
-//		}
-		
+        System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
+        try
+        {
+            ServiceContext sc = ri.get_request_service_context (0);
+            sData = new String (sc.context_data);
+            System.out.println(sData);
+        }catch (org.omg.CORBA.BAD_PARAM bad_param)
+        {
+            System.err.println("Pas de service contexte");
+        }
 	}
 
 	/**
@@ -51,16 +47,6 @@
 	public void receive_request (ServerRequestInfo ri) throws ForwardRequest
 	{
 		System.out.println ("ServerInter.receive request: " + ri.operation ());
-		/*System.out.println ("RI : " + ri);
-		String sData;
-		ServiceContext  sc = ri.get_request_service_context (0);			
-		if(sc.context_data != null || sc.context_data.length == 0) { 
-			sData = new String (sc.context_data);
-		}
-		else {
-			System.out.println ("ServerInter.receive request_SC: send Exception");
-			send_exception(ri);
-		}*/
 	}
 
 	/**
@@ -106,5 +92,4 @@
 	public void destroy ()
 	{
 	}
-
 }

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-21 16:52:00 UTC (rev 27)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-22 00:41:31 UTC (rev 28)
@@ -16,188 +16,186 @@
  */
 public class ForumClient {
 
-	public static void main(String[] args) throws Exception {
-		ORB orb = ORB.init(args, null);
-        
+    public static void main(String[] args) throws Exception {
+        java.util.Properties props = System.getProperties();
+        // props.put( "org.omg.CORBA.ORBClass", "org.openorb.CORBA.ORB" );
+        // props.put("org.omg.CORBA.ORBSingletonClass","org.openorb.CORBA.ORBSingleton" );
+        // props.put( "verbose", "5" );
+        props.put("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.ClientORBInitializer", "");
+
+        ORB orb = ORB.init(args, props);
+
         BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
-        
-        //Cr?ation du service d'annuaire
+
+        // Cr?ation du service d'annuaire
         Object ns = orb.resolve_initial_references("NameService");
-        NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
-        
-        NameComponent[] name=null;
+        NamingContextExt nc = NamingContextExtHelper.narrow(ns);
+
+        NameComponent[] name = null;
         try {
-            name = nc.to_name("forumGG");
-        } catch (org.omg.CosNaming.NamingContextPackage.InvalidName e2) {e2.printStackTrace();}
-        
+            name = nc.to_name("jmdsForum");
+        } catch (org.omg.CosNaming.NamingContextPackage.InvalidName e2) {
+            e2.printStackTrace();
+        }
+
         Object objProxy = nc.resolve(name);
-        
+
         Forum forumProxy = ForumHelper.narrow(objProxy);
 
-		while(true)
-		{
-			System.out.println("Que voulez-vous faire ?");
-			System.out.println("a - ajouter un message");
-			System.out.println("v - voir les messages");
-			System.out.println("l - lire un message");
-			System.out.println("r - retirer un message");
-			
-			int choix = System.in.read();
-			in.readLine();
-			switch(choix)
-			{
-				case 'a' :
-				{
-					System.out.println("Quel type de message voulez-vous poster ?\n1: Texte\n2: Audio");
-					int type = Integer.parseInt(in.readLine());					
-					System.out.print("Votre nom: ");
-					String auth = in.readLine();
-					System.out.print("Titre du message: ");
-					String title = in.readLine();
-					System.out.print("Message: ");
-					String mess = in.readLine();
-					
-					Any any = orb.create_any();
-					
-					if(type == 1)
-					{
-						TextMessage message = new TextMessage(title, auth, (new Date()).toString(), mess);
-						TextMessageHelper.insert(any, message);
-					}else
-					{
-						System.out.print("Parole: ");
-						String paroles = in.readLine();
-						AudioMessage message =  new AudioMessage(title, auth, (new Date()).toString(), mess, paroles);
-						AudioMessageHelper.insert(any, message);
-					}
-					try {
-						forumProxy.postMessage(title, any);
-					} catch (Reject e) {
-						System.out.println("Message non ajout? pour cette raison:\n" + e.message);
-					}
-					
-				}
-					break;
-					
-				case 'l' :
-				{
-					System.out.print("Titre du message: ");
-					String title = in.readLine();
-					
-					Any lany;
-					/*V1
-					try {
-						lany = forumProxy.getMessage(title);
-						
-						TypeCode tc = lany.type();
-						
-						if(tc.equal(AudioMessageHelper.type()))
-						{
-							AudioMessage m = AudioMessageHelper.extract(lany);
-							System.out.println("Message Audio");
-							System.out.println(m.author + " a ?crit ? " + m.date.toString());
-							System.out.println("Titre: " + m.title);
-							System.out.println(m.body);
-							System.out.println(m.paroles + "\n");
-						}
-						else
-						{
-							TextMessage m = TextMessageHelper.extract(lany);
-							System.out.println("Message Texte");
-							System.out.println(m.author + " a ?crit ? " + m.date.toString());
-							System.out.println("Titre: " + m.title);
-							System.out.println(m.body + "\n");
-						}
-					} catch (Reject e) {
-						System.out.println("Message non trouv? pour cette raison:\n" + e.message);
-					}*/
-						
-					//V2
-					// Construction d'un objet requ?te vide
-				    Request request = forumProxy._request("getMessage");
-				    // Sp?cification du type de retour de la requ?te
-				    request.set_return_type(orb.get_primitive_tc(TCKind.tk_any));
-				    // Sp?cification de l'argument
-				    Any arg = request.add_named_in_arg("title");
-				    arg.insert_string(title);
-				    // Sp?cification du type de l'exception
-				    ExceptionList exceptionList = request.exceptions();
-				    exceptionList.add(RejectHelper.type());
-				    // Appel synchrone de la requ?te
-				    request.invoke();
-				    
-				    // R?cup?ration de l'environnement
-				    Environment env = request.env();
-				    // Si pas d'exception
-				    if (env.exception() == null) {
-				    	// R?cup?ration du r?sultat
-				    	lany = request.return_value().extract_any();
-				    	TypeCode tc = lany.type();
-						
-						if(tc.equal(AudioMessageHelper.type()))
-						{
-							AudioMessage m = AudioMessageHelper.extract(lany);
-							System.out.println("Message Audio");
-							System.out.println(m.author + " a ?crit ? " + m.date.toString());
-							System.out.println("Titre: " + m.title);
-							System.out.println(m.body);
-							System.out.println(m.paroles + "\n");
-						}
-						else
-						{
-							TextMessage m = TextMessageHelper.extract(lany);
-							System.out.println("Message Texte");
-							System.out.println(m.author + " a ?crit ? " + m.date.toString());
-							System.out.println("Titre: " + m.title);
-							System.out.println(m.body + "\n");
-						}
-				    }else
-				    {
-					    // Extraction des exceptions
-					    Any ex = ((UnknownUserException)env.exception()).except;
-					    if (ex.type().equals(RejectHelper.type())) {
-					    	System.out.println("Message non trouv? pour cette raison:\n" + RejectHelper.extract(ex).message);
-					    } else {
-					      throw env.exception();
-					  	}
-				    }
-				}
-					break;
-					
-				case 'r' :
-				{
-					System.out.print("Titre du message: ");
-					String title = in.readLine();
-					try {
-						forumProxy.removeMessage(title);
-					} catch (Reject e) {
-						System.out.println("Message non retir? pour cette raison:\n" + e.message);
-					}
-				}
-					break;
-					
-				case 'v' :
-				{
-					Any[] tab = forumProxy.getMessages();
-					
-					TypeCode tc = null;
-					
-					for (int i = 0; i < tab.length; i++) {
-						tc = tab[i].type();
-						
-						if(tc.equal(AudioMessageHelper.type()))
-						{
-							AudioMessage m = AudioMessageHelper.extract(tab[i]);
-							System.out.println("Message audio: " + m.author + "\t" + m.date + "\t" + m.title + "\n");
-						}
-						else
-						{
-							TextMessage m = TextMessageHelper.extract(tab[i]);
-							System.out.println("Message texte: " + m.author + "\t" + m.date + "\t" + m.title + "\n");
-						} 
-					}
-				}
-			}
-		}
-	}
+        while (true) {
+            System.out.println("Que voulez-vous faire ?");
+            System.out.println("a - ajouter un message");
+            System.out.println("v - voir les messages");
+            System.out.println("l - lire un message");
+            System.out.println("r - retirer un message");
+
+            int choix = System.in.read();
+            in.readLine();
+            switch (choix) {
+            case 'a': {
+                System.out
+                        .println("Quel type de message voulez-vous poster ?\n1: Texte\n2: Audio");
+                int type = Integer.parseInt(in.readLine());
+                System.out.print("Votre nom: ");
+                String auth = in.readLine();
+                System.out.print("Titre du message: ");
+                String title = in.readLine();
+                System.out.print("Message: ");
+                String mess = in.readLine();
+
+                Any any = orb.create_any();
+
+                if (type == 1) {
+                    TextMessage message = new TextMessage(title, auth,
+                            (new Date()).toString(), mess);
+                    TextMessageHelper.insert(any, message);
+                } else {
+                    System.out.print("Parole: ");
+                    String paroles = in.readLine();
+                    AudioMessage message = new AudioMessage(title, auth,
+                            (new Date()).toString(), mess, paroles);
+                    AudioMessageHelper.insert(any, message);
+                }
+                try {
+                    forumProxy.postMessage(title, any);
+                } catch (Reject e) {
+                    System.out
+                            .println("Message non ajout? pour cette raison:\n"
+                                    + e.message);
+                }
+
+            }
+                break;
+
+            case 'l': {
+                System.out.print("Titre du message: ");
+                String title = in.readLine();
+
+                Any lany;
+                /*
+                 * V1 try { lany = forumProxy.getMessage(title);
+                 * 
+                 * TypeCode tc = lany.type();
+                 * 
+                 * if(tc.equal(AudioMessageHelper.type())) { AudioMessage m =
+                 * AudioMessageHelper.extract(lany); System.out.println("Message
+                 * Audio"); System.out.println(m.author + " a ?crit ? " +
+                 * m.date.toString()); System.out.println("Titre: " + m.title);
+                 * System.out.println(m.body); System.out.println(m.paroles +
+                 * "\n"); } else { TextMessage m =
+                 * TextMessageHelper.extract(lany); System.out.println("Message
+                 * Texte"); System.out.println(m.author + " a ?crit ? " +
+                 * m.date.toString()); System.out.println("Titre: " + m.title);
+                 * System.out.println(m.body + "\n"); } } catch (Reject e) {
+                 * System.out.println("Message non trouv? pour cette raison:\n" +
+                 * e.message); }
+                 */
+
+                // V2
+                // Construction d'un objet requ?te vide
+                Request request = forumProxy._request("getMessage");
+                // Sp?cification du type de retour de la requ?te
+                request.set_return_type(orb.get_primitive_tc(TCKind.tk_any));
+                // Sp?cification de l'argument
+                Any arg = request.add_named_in_arg("title");
+                arg.insert_string(title);
+                // Sp?cification du type de l'exception
+                ExceptionList exceptionList = request.exceptions();
+                exceptionList.add(RejectHelper.type());
+                // Appel synchrone de la requ?te
+                request.invoke();
+
+                // R?cup?ration de l'environnement
+                Environment env = request.env();
+                // Si pas d'exception
+                if (env.exception() == null) {
+                    // R?cup?ration du r?sultat
+                    lany = request.return_value().extract_any();
+                    TypeCode tc = lany.type();
+
+                    if (tc.equal(AudioMessageHelper.type())) {
+                        AudioMessage m = AudioMessageHelper.extract(lany);
+                        System.out.println("Message Audio");
+                        System.out.println(m.author + " a ?crit ? "
+                                + m.date.toString());
+                        System.out.println("Titre: " + m.title);
+                        System.out.println(m.body);
+                        System.out.println(m.paroles + "\n");
+                    } else {
+                        TextMessage m = TextMessageHelper.extract(lany);
+                        System.out.println("Message Texte");
+                        System.out.println(m.author + " a ?crit ? "
+                                + m.date.toString());
+                        System.out.println("Titre: " + m.title);
+                        System.out.println(m.body + "\n");
+                    }
+                } else {
+                    // Extraction des exceptions
+                    Any ex = ((UnknownUserException) env.exception()).except;
+                    if (ex.type().equals(RejectHelper.type())) {
+                        System.out
+                                .println("Message non trouv? pour cette raison:\n"
+                                        + RejectHelper.extract(ex).message);
+                    } else {
+                        throw env.exception();
+                    }
+                }
+            }
+                break;
+
+            case 'r': {
+                System.out.print("Titre du message: ");
+                String title = in.readLine();
+                try {
+                    forumProxy.removeMessage(title);
+                } catch (Reject e) {
+                    System.out
+                            .println("Message non retir? pour cette raison:\n"
+                                    + e.message);
+                }
+            }
+                break;
+
+            case 'v': {
+                Any[] tab = forumProxy.getMessages();
+
+                TypeCode tc = null;
+
+                for (int i = 0; i < tab.length; i++) {
+                    tc = tab[i].type();
+
+                    if (tc.equal(AudioMessageHelper.type())) {
+                        AudioMessage m = AudioMessageHelper.extract(tab[i]);
+                        System.out.println("Message audio: " + m.author + "\t"
+                                + m.date + "\t" + m.title + "\n");
+                    } else {
+                        TextMessage m = TextMessageHelper.extract(tab[i]);
+                        System.out.println("Message texte: " + m.author + "\t"
+                                + m.date + "\t" + m.title + "\n");
+                    }
+                }
+            }
+            }
+        }
+    }
 }

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-21 16:52:00 UTC (rev 27)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-22 00:41:31 UTC (rev 28)
@@ -20,7 +20,14 @@
 public class ForumServer {
 
 	public static void main(String[] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive, NotFound, AlreadyBound, CannotProceed, org.omg.CosNaming.NamingContextPackage.InvalidName {
-		ORB orb = ORB.init(args, null);
+        
+        java.util.Properties props = System.getProperties();
+//        props.put( "org.omg.CORBA.ORBClass", "org.openorb.CORBA.ORB" );
+//        props.put( "org.omg.CORBA.ORBSingletonClass", "org.openorb.CORBA.ORBSingleton" );
+//        props.put( "verbose", "5" );
+        props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.ServerORBInitializer" , "");
+
+		ORB orb = ORB.init(args, props);
 		POA rootPOA = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
 		
 		ForumImpl forum = new ForumImpl("Forum de Test", "GG");
@@ -32,33 +39,14 @@
         Object ns = orb.resolve_initial_references("NameService");
         NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
         
-        NameComponent[] name=null;
-        NamingContext ctxNC = null;
+        NameComponent[] name = nc.to_name("jmdsForum");
         
-        try
-        {
-             ctxNC = nc.bind_new_context(nc.to_name("CTX"));
-        }
-        catch (AlreadyBound e) {
-            Object objTemp = nc.resolve(nc.to_name("CTX"));
-            if (objTemp instanceof NamingContext) {
-                nc.rebind(nc.to_name("CTX"), objTemp);
-            }
-            else throw e;
-        }
-        name = nc.to_name("CTX/forumGG");
+        nc.rebind(name,obj);
         
-        try {
-            nc.bind(name,obj);
-        } 
-        catch (AlreadyBound e) {
-            e.printStackTrace();
-            nc.rebind(name,obj);
-        }
-        
 		rootPOA.the_POAManager().activate();
-		orb.run();
         
         System.out.println("Server ready");
+        
+		orb.run();
 	}
 }



From dbardin at sheep.berlios.de  Wed Feb 23 18:41:06 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Wed, 23 Feb 2005 18:41:06 +0100
Subject: [Jmds-svn] r29 - in trunk: . lib src src/de/berlios/jmds/client src/de/berlios/jmds/server
Message-ID: <200502231741.j1NHf6Su012624@sheep.berlios.de>

Author: dbardin
Date: 2005-02-23 18:40:46 +0100 (Wed, 23 Feb 2005)
New Revision: 29

Added:
   trunk/lib/commons-configuration-1.0.jar
   trunk/lib/commons-lang-2.0.jar
   trunk/src/de/berlios/jmds/client/SCAppletClient.java
   trunk/src/de/berlios/jmds/server/RightsManager.java
   trunk/src/de/berlios/jmds/server/SCManager.java
   trunk/src/rights.xml
   trunk/src/security.xml
Modified:
   trunk/.classpath
Log:
Ajout de objets presente hier soir + debut d implantation de l objet RightsManager.java

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-22 00:41:31 UTC (rev 28)
+++ trunk/.classpath	2005-02-23 17:40:46 UTC (rev 29)
@@ -6,5 +6,7 @@
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
 	<classpathentry kind="lib" path="lib/slbJIop.jar"/>
+	<classpathentry kind="lib" path="lib/commons-configuration-1.0.jar"/>
+	<classpathentry kind="lib" path="lib/commons-lang-2.0.jar"/>	
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Added: trunk/lib/commons-configuration-1.0.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/commons-configuration-1.0.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/lib/commons-lang-2.0.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/commons-lang-2.0.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/src/de/berlios/jmds/client/SCAppletClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-22 00:41:31 UTC (rev 28)
+++ trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-23 17:40:46 UTC (rev 29)
@@ -0,0 +1,72 @@
+/* 
+ * File    : SCManager.java
+ * Created : 22 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+
+package de.berlios.jmds.client;
+
+/**
+ * @author Denis
+ * 
+ */
+public class SCAppletClient {
+	
+	/** The singleton instance * */
+	private static SCAppletClient INSTANCE = null;
+	
+	//----------------------------------------------------------//
+	//------------------- CONSTRUCTORS -------------------------//
+	//----------------------------------------------------------//
+	
+	/**
+	 * Constructor
+	 *  
+	 */
+	private SCAppletClient ()
+	{
+		// TODO Implante le contructeur
+	}
+	
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+
+	
+	/**
+	 * To get the singleton instance of LDAP
+	 * 
+	 * @return the singleton instance of LDAP
+	 */
+	public static SCAppletClient getInstance ()
+	{
+		if (INSTANCE == null)
+			INSTANCE = new SCAppletClient ();
+		
+		return INSTANCE;
+	}
+	
+	/**
+	 * @param iRequest_ID as id of the request message
+	 * @return The array byte which contains the encoding servec context
+	 */
+	public byte[] code (int iRequest_ID)
+	{
+		// TODO
+		return null;
+	}
+	
+	/**
+	 * @param SC as the message service context
+	 * @return the request id of the message
+	 */
+	public int decode (byte[] SC)
+	{
+		// TODO
+		return 0;		
+	}
+}

Added: trunk/src/de/berlios/jmds/server/RightsManager.java
===================================================================
--- trunk/src/de/berlios/jmds/server/RightsManager.java	2005-02-22 00:41:31 UTC (rev 28)
+++ trunk/src/de/berlios/jmds/server/RightsManager.java	2005-02-23 17:40:46 UTC (rev 29)
@@ -0,0 +1,88 @@
+/* 
+ * File    : RightsManager.java
+ * Created : 22 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+
+package de.berlios.jmds.server;
+
+import org.apache.commons.configuration.ConfigurationException;
+import org.apache.commons.configuration.XMLConfiguration;
+
+/**
+ * @author Denis
+ *
+ */
+public class RightsManager {
+	
+	/** The security configuration **/
+	private XMLConfiguration securityConfig;
+	
+	/** The rights configuration **/
+	private XMLConfiguration rightsConfig;
+	
+	/** The security config file **/
+	private static final String SECURITY_FILE = "security.xml";
+	
+	/** The rigts config file **/
+	private static final String RIGHTS_FILE = "rights.xml";
+	
+	/** The singleton instance * */
+	private static RightsManager INSTANCE = null;
+	
+	//----------------------------------------------------------//
+	//------------------- CONSTRUCTORS -------------------------//
+	//----------------------------------------------------------//
+	
+	/**
+	 * Constructor
+	 *  
+	 */
+	private RightsManager ()
+	{
+		try
+		{
+			XMLConfiguration.setDelimiter('\n');
+			this.securityConfig = new XMLConfiguration (SECURITY_FILE);
+			this.rightsConfig = new XMLConfiguration (RIGHTS_FILE);				
+		}
+		catch (ConfigurationException e)
+		{
+			throw new RuntimeException (e);
+		}			
+	}
+	
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+
+	
+	/**
+	 * To get the singleton instance of LDAP
+	 * 
+	 * @return the singleton instance of LDAP
+	 */
+	public static RightsManager getInstance ()
+	{
+		if (INSTANCE == null)
+			INSTANCE = new RightsManager ();
+		
+		return INSTANCE;
+	}
+	
+	/**
+	 * @param szUserId 		the user who would like to access to server objects
+	 * @param szIOR			the reference of object
+	 * @param szFonction	the fonction of object
+	 * @return				the valid or refuse access 
+	 */
+	public boolean canUse (String szUserId, String szIOR, String szFonction)
+	{
+		// TODO
+		return false;		
+	}
+}
\ No newline at end of file

Added: trunk/src/de/berlios/jmds/server/SCManager.java
===================================================================
--- trunk/src/de/berlios/jmds/server/SCManager.java	2005-02-22 00:41:31 UTC (rev 28)
+++ trunk/src/de/berlios/jmds/server/SCManager.java	2005-02-23 17:40:46 UTC (rev 29)
@@ -0,0 +1,72 @@
+/* 
+ * File    : SCManager.java
+ * Created : 22 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+
+package de.berlios.jmds.server;
+
+
+/**
+ * @author Denis
+ *
+ */
+public class SCManager {
+	/** The singleton instance * */
+	private static SCManager INSTANCE = null;
+	
+	//----------------------------------------------------------//
+	//------------------- CONSTRUCTORS -------------------------//
+	//----------------------------------------------------------//
+	
+	/**
+	 * Constructor
+	 *  
+	 */
+	private SCManager ()
+	{
+		// TODO Implante le contructeur
+	}
+	
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+
+	
+	/**
+	 * To get the singleton instance of LDAP
+	 * 
+	 * @return the singleton instance of LDAP
+	 */
+	public static SCManager getInstance ()
+	{
+		if (INSTANCE == null)
+			INSTANCE = new SCManager ();
+		
+		return INSTANCE;
+	}
+	
+	/**
+	 * @param iRequest_ID as id of the request message
+	 * @return The array byte which contains the encoding servec context
+	 */
+	public byte[] code (int iRequest_ID)
+	{
+		// TODO
+		return null;
+	}
+	
+	/**
+	 * @param SC as the message service context
+	 * @return the request id of the message
+	 */
+	public int decode (byte[] SC)
+	{
+		// TODO
+		return 0;		
+	}
+}

Added: trunk/src/rights.xml
===================================================================
--- trunk/src/rights.xml	2005-02-22 00:41:31 UTC (rev 28)
+++ trunk/src/rights.xml	2005-02-23 17:40:46 UTC (rev 29)
@@ -0,0 +1,25 @@
+<?xml version="1.0" encoding="ISO-8859-1" ?>
+
+<jmds>
+	<ior id = "ior_1">
+         <fonction id = "fct_1">
+         	<group id = "grp_1"/>
+         	<group id = "grp_2"/>
+         </fonction>
+         <fonction id = "fct_2">
+         	<group id = "grp_1"/>
+         </fonction>
+         <fonction id = "fct_3">
+         	<group id = "grp_2"/>
+         </fonction>
+         <fonction id = "fct_4"/>
+     <ior id = "ior_2">
+     	<fonction id = "fct_1">
+         	<group id = "grp_1"/>
+         </fonction>
+         <fonction id = "fct_2">
+         	<group id = "grp_2"/>
+         </fonction>
+         <fonction id = "fct_3"/>
+	</ior>
+</jmds>

Added: trunk/src/security.xml
===================================================================
--- trunk/src/security.xml	2005-02-22 00:41:31 UTC (rev 28)
+++ trunk/src/security.xml	2005-02-23 17:40:46 UTC (rev 29)
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="ISO-8859-1" ?>
+
+<jmds>
+   <server key = "serverKey" />
+   <clients>
+      <client id = "id1" key = "clinetKey1" groupe = "grp_1"/>
+      <client id = "id2" key = "clinetKey2" groupe = "grp_2"/>
+      <client id = "id3" key = "clinetKey3" groupe = "grp_1"/>
+   </ clients >
+</jmds>



From dbardin at sheep.berlios.de  Wed Feb 23 21:38:59 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Wed, 23 Feb 2005 21:38:59 +0100
Subject: [Jmds-svn] r30 - in trunk: . src/de/berlios/jmds/client src/de/berlios/jmds/server test/de/berlios/jmds/test/clients
Message-ID: <200502232038.j1NKcxBc030048@sheep.berlios.de>

Author: dbardin
Date: 2005-02-23 21:38:55 +0100 (Wed, 23 Feb 2005)
New Revision: 30

Added:
   trunk/.umlproject
   trunk/codeClient.gif
   trunk/codeClient.usd
   trunk/codeServeur.gif
   trunk/codeServeur.usd
   trunk/decodeClient.gif
   trunk/decodeClient.usd
   trunk/decodeServeur.gif
   trunk/decodeServeur.usd
Modified:
   trunk/src/de/berlios/jmds/client/SCAppletClient.java
   trunk/src/de/berlios/jmds/server/SCManager.java
   trunk/test/de/berlios/jmds/test/clients/ClientPing.java
Log:
Creation des diag de sequence de codage et decodage cote client et cote serveur + export en gif

Added: trunk/.umlproject
===================================================================
--- trunk/.umlproject	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/.umlproject	2005-02-23 20:38:55 UTC (rev 30)
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="ASCII"?>
+<properties:ProjectDescription xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:properties="properties.xmi" modelDir="model" libraryDir="libraries" profileDir="profiles" templateDir="templates">
+  <profiles id="org.eclipse.uml2.resources.BasicProfile" description="Basic Profile" uri="platform:/plugin/org.eclipse.uml2.resources/profiles/Basic.profile.uml2" exported="false" kind="system"/>
+  <profiles id="org.eclipse.uml2.resources.IntermediateProfile" description="Intermediate Profile" uri="platform:/plugin/org.eclipse.uml2.resources/profiles/Intermediate.profile.uml2" exported="false" kind="system"/>
+  <profiles id="org.eclipse.uml2.resources.CompleteProfile" description="Complete Profile" uri="platform:/plugin/org.eclipse.uml2.resources/profiles/Complete.profile.uml2" exported="false" kind="system"/>
+  <profiles id="com.omondo.uml.core.JavaProfile" description="Java Profile" uri="platform:/plugin/com.omondo.uml.core/profiles/Java.profile.uml2" exported="false" kind="system"/>
+  <profiles id="com.omondo.uml2.core.OmondoProfile" description="Omondo Profile" uri="platform:/plugin/com.omondo.uml.core/profiles/Omondo.profile.uml2" exported="false" kind="system"/>
+</properties:ProjectDescription>

Added: trunk/codeClient.gif
===================================================================
(Binary files differ)


Property changes on: trunk/codeClient.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/codeClient.usd
===================================================================
--- trunk/codeClient.usd	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/codeClient.usd	2005-02-23 20:38:55 UTC (rev 30)
@@ -0,0 +1,128 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeClient" size="805,530" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:InstanceEditModel" name="ClientInter" location="210,20" size="100,588" id="de.berlios.jmds.client/ClientInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.3/@children.0/@sourceConnections.0 //@children.1/@children.1/@sourceConnections.2" location="42,125" size="16,343" sequenceItemContainer="//@children.0" recursiveChildren="//@children.0/@children.1" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.client/SCAppletClient#getInstance()" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCAppletClient" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,2" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCAppletClient" size="142,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="code" source="//@children.0/@children.0" target="//@children.1/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="code(ResquestInfo:byte[]): byte[]" associatedSequenceNumber="1.2" associatedReturnArrow="//@children.1/@children.1/@sourceConnections.2" shouldShowReturnArrow="true">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,62" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="code(ResquestInfo:byte[]): byte[]" size="160,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.0/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,348" size="16,40" sequenceItemContainer="//@children.0" associatedActivation="//@children.0/@children.0" relativeLocation="8,223">
+      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.0/@children.1" target="//@children.0/@children.1" targetEnd="//@children.0/@children.1/@sourceConnections.0/@children.1" label="//@children.0/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.0/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="coding impossible">
+        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" userLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:WireLabelEditModel" name="if (coding impossible)" size="103,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCAppletClient" location="380,20" size="100,588" id="de.berlios.jmds.client/SCAppletClient">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,127" size="16,40" sequenceItemContainer="//@children.1"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.1" location="42,187" size="16,111" sequenceItemContainer="//@children.1" length="111">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send (Code:APDU) APDU" associatedSequenceNumber="1.2.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,11" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (Code:APDU) APDU" size="123,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.1" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="send (get:APDU) APDU" associatedSequenceNumber="1.2.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,71" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (get:APDU) APDU" size="113,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.2" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:ReturnArrowEditModel" source="//@children.1/@children.1" target="//@children.0/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.2/@children.0" connectionRouterKind="Manual">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,111" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,173" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="JmdsSecurityApplet" location="540,20" size="121,588" id="de.berlios.jmds.applet/JmdsSecurityApplet">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" location="52,198" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.1" location="52,258" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,588" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,125" size="16,343" sequenceItemContainer="//@children.3" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.3/@children.0" target="//@children.0/@children.0" targetEnd="//@children.3/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.3/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="sendRequest(ri:ClientRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="sendRequest(ri:ClientRequestInfo)" size="166,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="289,380" size="92,14" fontInfo="Arial-8-0"/>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="289,440" size="66,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Added: trunk/codeServeur.gif
===================================================================
(Binary files differ)


Property changes on: trunk/codeServeur.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/codeServeur.usd
===================================================================
--- trunk/codeServeur.usd	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/codeServeur.usd	2005-02-23 20:38:55 UTC (rev 30)
@@ -0,0 +1,48 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeServeur" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,378" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,152" size="16,106" sequenceItemContainer="//@children.0" length="106">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send_reply (ri:ServerRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send_reply (ri:ServerRequestInfo)" size="166,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="267,20" size="100,378" id="de.berlios.jmds.server/ServerInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,152" size="16,106" sequenceItemContainer="//@children.1" length="106">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="code(RequestID:byte[]): byte[]" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,22" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="code(RequestID:byte[]): byte[]" size="145,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,378" id="de.berlios.jmds.server/SCManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,174" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="350,250" size="66,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Added: trunk/decodeClient.gif
===================================================================
(Binary files differ)


Property changes on: trunk/decodeClient.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/decodeClient.usd
===================================================================
--- trunk/decodeClient.usd	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/decodeClient.usd	2005-02-23 20:38:55 UTC (rev 30)
@@ -0,0 +1,144 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeClient" size="922,623" metadata="uml2-1.0" initialized="true" scrolledY="23" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:InstanceEditModel" name="ClientInter" location="210,20" size="100,588" id="de.berlios.jmds.client/ClientInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.3/@children.0/@sourceConnections.0 //@children.1/@children.1/@sourceConnections.2" location="42,125" size="16,343" sequenceItemContainer="//@children.0" recursiveChildren="//@children.0/@children.2 //@children.0/@children.1" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.client/SCAppletClient#getInstance()" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCAppletClient" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,2" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCAppletClient" size="142,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="code" source="//@children.0/@children.0" target="//@children.1/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): byte[]" associatedSequenceNumber="1.2" associatedReturnArrow="//@children.1/@children.1/@sourceConnections.2" shouldShowReturnArrow="true">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,62" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): byte[]" size="122,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SelfSequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.0/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.2/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.2/@children.0" connectionRouterKind="Manual" associatedMethod="check_ResquestId(RequestId:byte[]):boolean" associatedSequenceNumber="1.3">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="14,200" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="check_ResquestId(RequestId:byte[]):boolean" size="217,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.3" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="16,0" userLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <bendpoints secondRelativeDimension="51,-9" firstRelativeDimension="58,0"/>
+        <bendpoints secondRelativeDimension="50,0" firstRelativeDimension="58,9"/>
+      </sourceConnections>
+    </children>
+    <children xsi:type="editmodel:RecursiveActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.2" location="50,335" size="16,29" sequenceItemContainer="//@children.0" length="29" associatedActivation="//@children.0/@children.0" relativeLocation="8,210"/>
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.0/@children.2/@sourceConnections.0" backgroundRGB="128,128,128" location="50,399" size="16,40" sequenceItemContainer="//@children.0" associatedActivation="//@children.0/@children.0" relativeLocation="8,223">
+      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.0/@children.2" target="//@children.0/@children.2" targetEnd="//@children.0/@children.2/@sourceConnections.0/@children.1" label="//@children.0/@children.2/@sourceConnections.0/@children.2" sourceEnd="//@children.0/@children.2/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="Resquest_ID incorrect">
+        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" userLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:WireLabelEditModel" name="if (Resquest_ID incorrect)" size="125,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCAppletClient" location="380,20" size="100,588" id="de.berlios.jmds.client/SCAppletClient">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,127" size="16,40" sequenceItemContainer="//@children.1"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.1" location="42,187" size="16,111" sequenceItemContainer="//@children.1" length="111">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send (Decode:APDU) APDU" associatedSequenceNumber="1.2.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,11" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (Decode:APDU) APDU" size="135,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.1" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="send (get:APDU) APDU" associatedSequenceNumber="1.2.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,71" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (get:APDU) APDU" size="113,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.2" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:ReturnArrowEditModel" source="//@children.1/@children.1" target="//@children.0/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.2/@children.0" connectionRouterKind="Manual">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,111" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,173" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="JmdsSecurityApplet" location="540,20" size="121,588" id="de.berlios.jmds.applet/JmdsSecurityApplet">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" location="52,198" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.1" location="52,258" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,588" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,125" size="16,343" sequenceItemContainer="//@children.3" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.3/@children.0" target="//@children.0/@children.0" targetEnd="//@children.3/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.3/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_reply(ri:ClientRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="receive_reply(ri:ClientRequestInfo)" size="168,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="289,380" size="92,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Added: trunk/decodeServeur.gif
===================================================================
(Binary files differ)


Property changes on: trunk/decodeServeur.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/decodeServeur.usd
===================================================================
--- trunk/decodeServeur.usd	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/decodeServeur.usd	2005-02-23 20:38:55 UTC (rev 30)
@@ -0,0 +1,82 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeServeur" size="922,535" metadata="uml2-1.0" initialized="true" scrolledY="72" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:ActorEditModel" location="40,20" size="101,449" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,140" size="16,189" sequenceItemContainer="//@children.0" length="189">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_request_service_contexts (ri:ServerRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="receive_request_service_contexts (ri:ServerRequestInfo)" size="281,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="340,20" size="100,449" id="de.berlios.jmds.server/ServerInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,140" size="16,189" sequenceItemContainer="//@children.1" recursiveChildren="//@children.1/@children.1" length="189">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): int" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,15" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): int" size="106,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.3/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" associatedSequenceNumber="1.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,79" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" size="320,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,279" size="16,40" sequenceItemContainer="//@children.1" associatedActivation="//@children.1/@children.0" relativeLocation="8,132">
+      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.1/@children.1" target="//@children.1/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" label="//@children.1/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="le user n'a pas acces a la fonction de l'objet">
+        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,1" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:WireLabelEditModel" name="if (le user n'a pas acces a la fonction de l'objet)" size="229,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,449" id="de.berlios.jmds.server/SCManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,155" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="RightsManager" location="690,20" size="100,449" id="de.berlios.jmds.server/RightsManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,219" size="16,40" sequenceItemContainer="//@children.3"/>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="420,310" size="92,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Modified: trunk/src/de/berlios/jmds/client/SCAppletClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-23 20:38:55 UTC (rev 30)
@@ -54,7 +54,7 @@
 	 * @param iRequest_ID as id of the request message
 	 * @return The array byte which contains the encoding servec context
 	 */
-	public byte[] code (int iRequest_ID)
+	public byte[] code (byte[] RequestId)
 	{
 		// TODO
 		return null;
@@ -64,9 +64,9 @@
 	 * @param SC as the message service context
 	 * @return the request id of the message
 	 */
-	public int decode (byte[] SC)
+	public byte[] decode (byte[] SC)
 	{
 		// TODO
-		return 0;		
+		return SC;			
 	}
 }

Modified: trunk/src/de/berlios/jmds/server/SCManager.java
===================================================================
--- trunk/src/de/berlios/jmds/server/SCManager.java	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/src/de/berlios/jmds/server/SCManager.java	2005-02-23 20:38:55 UTC (rev 30)
@@ -54,7 +54,7 @@
 	 * @param iRequest_ID as id of the request message
 	 * @return The array byte which contains the encoding servec context
 	 */
-	public byte[] code (int iRequest_ID)
+	public byte[] code (byte[] RequestId)
 	{
 		// TODO
 		return null;

Modified: trunk/test/de/berlios/jmds/test/clients/ClientPing.java
===================================================================
--- trunk/test/de/berlios/jmds/test/clients/ClientPing.java	2005-02-23 17:40:46 UTC (rev 29)
+++ trunk/test/de/berlios/jmds/test/clients/ClientPing.java	2005-02-23 20:38:55 UTC (rev 30)
@@ -11,8 +11,6 @@
 import slb.iop.SmartCard;
 import de.berlios.jmds.tools.Convertor;
 
-
-
 /**
  * Teste la classe Ping charg?e sur la carte
  * 
@@ -22,131 +20,131 @@
  */
 public class ClientPing {
 
-    private static class jmdsIOPListener implements IOPListener {
+	private static class jmdsIOPListener implements IOPListener {
 
-        /**
-         * DOCME
-         * 
-         * @param event
-         * 
-         * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
-         */
-        public void CardRemoved(IOPEvent event) {
-            System.out.println("Carte retir?e de ");
-            System.out.println(event.getReaderName());
-        }
+		/**
+		 * DOCME
+		 * 
+		 * @param event
+		 * 
+		 * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
+		 */
+		public void CardRemoved(IOPEvent event) {
+			System.out.println("Carte retir?e de ");
+			System.out.println(event.getReaderName());
+		}
 
-        /**
-         * DOCME
-         * 
-         * @param event
-         * 
-         * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
-         */
-        public void CardInserted(IOPEvent event) {
-            System.out.print("Carte ins?r?e dans ");
-            System.out.println(event.getReaderName());
-        }
+		/**
+		 * DOCME
+		 * 
+		 * @param event
+		 * 
+		 * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
+		 */
+		public void CardInserted(IOPEvent event) {
+			System.out.print("Carte ins?r?e dans ");
+			System.out.println(event.getReaderName());
+		}
 
-        /**
-         * DOCME
-         * 
-         * @param event
-         * 
-         * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
-         */
-        public void ReaderRemoved(IOPEvent event) {
-            System.out.println("Lecteur d?connect?");
-        }
+		/**
+		 * DOCME
+		 * 
+		 * @param event
+		 * 
+		 * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
+		 */
+		public void ReaderRemoved(IOPEvent event) {
+			System.out.println("Lecteur d?connect?");
+		}
 
-        /**
-         * DOCME
-         * 
-         * @param event
-         * 
-         * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
-         */
-        public void ReaderInserted(IOPEvent event) {
-            System.out.println("Lecteur connect?");
-        }
-    }
+		/**
+		 * DOCME
+		 * 
+		 * @param event
+		 * 
+		 * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
+		 */
+		public void ReaderInserted(IOPEvent event) {
+			System.out.println("Lecteur connect?");
+		}
+	}
 
-    /**
-     * @param args
-     */
-    public static void main(String[] args) {
-        IOP sIOP = new IOP();
+	/**
+	 * @param args
+	 */
+	public static void main(String[] args) {
+		IOP sIOP = new IOP();
 
-        jmdsIOPListener listener = new jmdsIOPListener();
-        sIOP.addIOPListener(listener);
+		jmdsIOPListener listener = new jmdsIOPListener();
+		sIOP.addIOPListener(listener);
 
-        String[] lstReaders = sIOP.ListReaders();
+		String[] lstReaders = sIOP.ListReaders();
 
-        for (int i = 0; i < lstReaders.length; i++) {
-            System.out.println(lstReaders[i]);
-        }
+		for (int i = 0; i < lstReaders.length; i++) {
+			System.out.println(lstReaders[i]);
+		}
 
-        SmartCard card = new SmartCard();
-        if (lstReaders.length > 0) {
-            boolean result = sIOP.Connect(card, lstReaders[0], false);
-            if (result) {
-                System.out.println("Carte connectee");
+		SmartCard card = new SmartCard();
+		if (lstReaders.length > 0) {
+			boolean result = sIOP.Connect(card, lstReaders[0], false);
+			if (result) {
+				System.out.println("Carte connectee");
 
-                int CLA = Integer.parseInt("00", 16);
-                int INS = Integer.parseInt("A4", 16);
-                int P1 = Integer.parseInt("04", 16);
-                int P2 = Integer.parseInt("00", 16);
-                int[] body = Convertor.stringToIntArray("11223344556677");
-                int LE = Integer.parseInt("00", 16);
-                try {
-                    System.out.println("Applet Selection");
-                    card.BeginTransaction();
-                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-                    System.out.println("Applet selected");
-                    card.EndTransaction();
-                } catch (slb.iop.slbException e) {
-                    System.out.println("Pb de Selection");
-                    e.printStackTrace();
-                }
+				int CLA = Integer.parseInt("00", 16);
+				int INS = Integer.parseInt("A4", 16);
+				int P1 = Integer.parseInt("04", 16);
+				int P2 = Integer.parseInt("00", 16);
+				int[] body = Convertor.stringToIntArray("11223344556677");
+				int LE = Integer.parseInt("00", 16);
+				try {
+					System.out.println("Applet Selection");
+					card.BeginTransaction();
+					card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+					System.out.println("Applet selected");
+					card.EndTransaction();
+				} catch (slb.iop.slbException e) {
+					System.out.println("Pb de Selection");
+					e.printStackTrace();
+				}
 
-                System.out.println("Envoi de l'APDU Echo Request");
-                CLA = Integer.parseInt("80", 16);
-                INS = Integer.parseInt("10", 16);
-                P1 = Integer.parseInt("00", 16);
-                P2 = Integer.parseInt("00", 16);
-                body = Convertor.stringToIntArray("102030");
-                LE = Integer.parseInt("00", 16);
+				System.out.println("Envoi de l'APDU Echo Request");
+				CLA = Integer.parseInt("80", 16);
+				INS = Integer.parseInt("10", 16);
+				P1 = Integer.parseInt("00", 16);
+				P2 = Integer.parseInt("00", 16);
+				body = Convertor.stringToIntArray("102030");
+				LE = Integer.parseInt("00", 16);
 
-                try {
-                    card.BeginTransaction();
-                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-                    card.EndTransaction();
-                } catch (slb.iop.slbException e) {
-                    System.out.println("Erreur request");
-                    e.printStackTrace();
-                }
+				try {
+					card.BeginTransaction();
+					card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+					card.EndTransaction();
+				} catch (slb.iop.slbException e) {
+					System.out.println("Erreur request");
+					e.printStackTrace();
+				}
 
-                System.out.print("Envoi de l'APDU Echo Reply: > ");
-                CLA = (int) Integer.parseInt("80", 16);
-                INS = (int) Integer.parseInt("30", 16);
-                P1 = (int) Integer.parseInt("00", 16);
-                P2 = (int) Integer.parseInt("00", 16);
-                body = Convertor.stringToIntArray("");
-                LE = (int) Integer.parseInt("03", 16);
+				System.out.print("Envoi de l'APDU Echo Reply: > ");
+				CLA = (int) Integer.parseInt("80", 16);
+				INS = (int) Integer.parseInt("30", 16);
+				P1 = (int) Integer.parseInt("00", 16);
+				P2 = (int) Integer.parseInt("00", 16);
+				body = Convertor.stringToIntArray("");
+				LE = (int) Integer.parseInt("03", 16);
 
-                try {
-                    card.BeginTransaction();
-                    short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-                    for (int i = 0; i < out.length; i++) {
-                        System.out.print(Integer.toHexString(out[i]) + " ");
-                    }
-                    System.out.println("");
-                    card.EndTransaction();
-                } catch (slb.iop.slbException e) {
-                    System.out.println("Erreur reply");
-                    e.printStackTrace();
-                }
-            }
-        }
-    }
-}
+				try {
+					card.BeginTransaction();
+					short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+					for (int i = 0; i < out.length; i++) {
+						System.out.print(Integer.toHexString(out[i]) + " ");
+					}
+					System.out.println("");
+					card.EndTransaction();
+				} catch (slb.iop.slbException e) {
+					System.out.println("Erreur reply");
+					e.printStackTrace();
+				}
+			}
+		}
+	}
+}
\ No newline at end of file



From dbardin at sheep.berlios.de  Wed Feb 23 21:45:37 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Wed, 23 Feb 2005 21:45:37 +0100
Subject: [Jmds-svn] r31 - trunk
Message-ID: <200502232045.j1NKjb67030558@sheep.berlios.de>

Author: dbardin
Date: 2005-02-23 21:45:36 +0100 (Wed, 23 Feb 2005)
New Revision: 31

Modified:
   trunk/codeServeur.gif
   trunk/codeServeur.usd
   trunk/decodeServeur.gif
   trunk/decodeServeur.usd
Log:
dsl j avais oublie des getInstance() ;-)

Modified: trunk/codeServeur.gif
===================================================================
(Binary files differ)

Modified: trunk/codeServeur.usd
===================================================================
--- trunk/codeServeur.usd	2005-02-23 20:38:55 UTC (rev 30)
+++ trunk/codeServeur.usd	2005-02-23 20:45:36 UTC (rev 31)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeServeur" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
-  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,378" itemName="orb">
-    <children xsi:type="editmodel:ActivationEditModel" location="42,152" size="16,106" sequenceItemContainer="//@children.0" length="106">
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,411" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,152" size="16,139" sequenceItemContainer="//@children.0" length="139">
       <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send_reply (ri:ServerRequestInfo)" associatedSequenceNumber="1">
         <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
@@ -18,13 +18,13 @@
       </sourceConnections>
     </children>
   </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="267,20" size="100,378" id="de.berlios.jmds.server/ServerInter">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,152" size="16,106" sequenceItemContainer="//@children.1" length="106">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="code(RequestID:byte[]): byte[]" associatedSequenceNumber="1.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,22" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
+  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="267,20" size="100,411" id="de.berlios.jmds.server/ServerInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,152" size="16,139" sequenceItemContainer="//@children.1" length="139">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="code(RequestID:byte[]): byte[]" associatedSequenceNumber="1.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,72" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
           <children xsi:type="editmodel:LabelEditModel" name="code(RequestID:byte[]): byte[]" size="145,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
         </children>
         <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
@@ -34,12 +34,27 @@
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
         </children>
       </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/SCManager#getInstance()" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCManager" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,12" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCManager" size="127,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
     </children>
   </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,378" id="de.berlios.jmds.server/SCManager">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,174" size="16,40" sequenceItemContainer="//@children.2"/>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,411" id="de.berlios.jmds.server/SCManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,164" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,224" size="16,40" sequenceItemContainer="//@children.2"/>
   </children>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="350,250" size="66,14" fontInfo="Arial-8-0"/>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="340,280" size="66,14" fontInfo="Arial-8-0"/>
   <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
   <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
     <leftRuler/>

Modified: trunk/decodeServeur.gif
===================================================================
(Binary files differ)

Modified: trunk/decodeServeur.usd
===================================================================
--- trunk/decodeServeur.usd	2005-02-23 20:38:55 UTC (rev 30)
+++ trunk/decodeServeur.usd	2005-02-23 20:45:36 UTC (rev 31)
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeServeur" size="922,535" metadata="uml2-1.0" initialized="true" scrolledY="72" tag="1000" key="3230303431303236204A4D44532F44656E6973">
-  <children xsi:type="editmodel:ActorEditModel" location="40,20" size="101,449" itemName="orb">
-    <children xsi:type="editmodel:ActivationEditModel" location="42,140" size="16,189" sequenceItemContainer="//@children.0" length="189">
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeServeur" size="922,535" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:ActorEditModel" location="40,20" size="101,582" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,140" size="16,322" sequenceItemContainer="//@children.0" length="322">
       <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_request_service_contexts (ri:ServerRequestInfo)" associatedSequenceNumber="1">
         <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
@@ -18,13 +18,13 @@
       </sourceConnections>
     </children>
   </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="340,20" size="100,449" id="de.berlios.jmds.server/ServerInter">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,140" size="16,189" sequenceItemContainer="//@children.1" recursiveChildren="//@children.1/@children.1" length="189">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): int" associatedSequenceNumber="1.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,15" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
+  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="340,20" size="100,582" id="de.berlios.jmds.server/ServerInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,140" size="16,322" sequenceItemContainer="//@children.1" recursiveChildren="//@children.1/@children.1" length="322">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): int" associatedSequenceNumber="1.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,85" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
           <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): int" size="106,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
         </children>
         <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
@@ -34,11 +34,11 @@
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
         </children>
       </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.3/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" associatedSequenceNumber="1.2">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,79" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.3/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" associatedSequenceNumber="1.4">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,212" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
           <children xsi:type="editmodel:LabelEditModel" name="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" size="320,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.4" size="16,14" fontInfo="Arial-8-0"/>
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
         </children>
         <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
@@ -48,8 +48,36 @@
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
         </children>
       </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/SCManager#getInstance()" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.2/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCManager" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,25" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCManager" size="127,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/RightsManager#getInstance()" source="//@children.1/@children.0" target="//@children.3/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.3/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.3/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): RightsManager" associatedSequenceNumber="1.3">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,152" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): RightsManager" size="143,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.3" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
     </children>
-    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,279" size="16,40" sequenceItemContainer="//@children.1" associatedActivation="//@children.1/@children.0" relativeLocation="8,132">
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,412" size="16,40" sequenceItemContainer="//@children.1" associatedActivation="//@children.1/@children.0" relativeLocation="8,132">
       <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.1/@children.1" target="//@children.1/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" label="//@children.1/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="le user n'a pas acces a la fonction de l'objet">
         <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
           <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
@@ -67,13 +95,15 @@
       </sourceConnections>
     </children>
   </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,449" id="de.berlios.jmds.server/SCManager">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,155" size="16,40" sequenceItemContainer="//@children.2"/>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,582" id="de.berlios.jmds.server/SCManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.2" location="42,165" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,225" size="16,40" sequenceItemContainer="//@children.2"/>
   </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="RightsManager" location="690,20" size="100,449" id="de.berlios.jmds.server/RightsManager">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,219" size="16,40" sequenceItemContainer="//@children.3"/>
+  <children xsi:type="editmodel:InstanceEditModel" name="RightsManager" location="690,20" size="100,582" id="de.berlios.jmds.server/RightsManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.3" location="42,292" size="16,40" sequenceItemContainer="//@children.3"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,352" size="16,40" sequenceItemContainer="//@children.3"/>
   </children>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="l?ve une exception" location="420,310" size="92,14" fontInfo="Arial-8-0"/>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l?ve une exception" location="420,440" size="92,14" fontInfo="Arial-8-0"/>
   <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
   <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
     <leftRuler/>



From dbardin at sheep.berlios.de  Wed Feb 23 22:52:50 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Wed, 23 Feb 2005 22:52:50 +0100
Subject: [Jmds-svn] r32 - in trunk/src: de/berlios/jmds/client de/berlios/jmds/server de/berlios/jmds/tools fr/umlv/ir3/corba/forum
Message-ID: <200502232152.j1NLqoNs002376@sheep.berlios.de>

Author: dbardin
Date: 2005-02-23 22:52:47 +0100 (Wed, 23 Feb 2005)
New Revision: 32

Added:
   trunk/src/de/berlios/jmds/tools/RightsConfiguration.java
   trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java
Modified:
   trunk/src/de/berlios/jmds/client/ClientInter.java
   trunk/src/de/berlios/jmds/client/ClientORBInitializer.java
   trunk/src/de/berlios/jmds/client/SCAppletClient.java
   trunk/src/de/berlios/jmds/server/RightsManager.java
   trunk/src/de/berlios/jmds/server/SCManager.java
   trunk/src/de/berlios/jmds/server/ServerInter.java
   trunk/src/de/berlios/jmds/server/ServerORBInitializer.java
   trunk/src/de/berlios/jmds/tools/Convertor.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
Log:
Nettoyage des classes + creation d'ojet de stockage des fichiers de configuration

Modified: trunk/src/de/berlios/jmds/client/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -1,19 +1,21 @@
-/*
- * Created on 18 f?vr. 2005
- * by S?bastien GUINCHARD
- * Copyright: GPL - UMLV(FR) - 2004/2005
+/* 
+ * File    : SCManager.java
+ * Created : 18 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
  */
 package de.berlios.jmds.client;
 
-import org.omg.IOP.ServiceContext;
-import org.omg.PortableInterceptor.*;
+import org.omg.PortableInterceptor.ClientRequestInfo;
+import org.omg.PortableInterceptor.ClientRequestInterceptor;
+import org.omg.PortableInterceptor.ForwardRequest;
 
 /**
- * DOCME
+ * @author S?bastien GUINCHARD
  * 
- * @version 0.1
- * 
- * @author S?bastien GUINCHARD
  */
 public class ClientInter extends org.omg.CORBA.LocalObject implements
         ClientRequestInterceptor {
@@ -23,6 +25,10 @@
      */
     private static final long serialVersionUID = 3618417146430765111L;
 
+    //----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+    
     /**
      * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
      */

Modified: trunk/src/de/berlios/jmds/client/ClientORBInitializer.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientORBInitializer.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/client/ClientORBInitializer.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -1,7 +1,11 @@
-/*
- * Created on 18 f?vr. 2005
- * by S?bastien GUINCHARD
- * Copyright: GPL - UMLV(FR) - 2004/2005
+/* 
+ * File    : SCManager.java
+ * Created : 18 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
  */
 package de.berlios.jmds.client;
 
@@ -11,11 +15,8 @@
 import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
 
 /**
- * DOCME
+ * @author S?bastien GUINCHARD
  * 
- * @version 0.1
- * 
- * @author S?bastien GUINCHARD
  */
 public class ClientORBInitializer extends LocalObject implements ORBInitializer {
 
@@ -24,6 +25,10 @@
      */
     private static final long serialVersionUID = 1L;
 
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+    
     /**
      * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
      */

Modified: trunk/src/de/berlios/jmds/client/SCAppletClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -51,7 +51,7 @@
 	}
 	
 	/**
-	 * @param iRequest_ID as id of the request message
+	 * @param RequestId as id of the request message
 	 * @return The array byte which contains the encoding servec context
 	 */
 	public byte[] code (byte[] RequestId)

Modified: trunk/src/de/berlios/jmds/server/RightsManager.java
===================================================================
--- trunk/src/de/berlios/jmds/server/RightsManager.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/server/RightsManager.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -10,8 +10,8 @@
 
 package de.berlios.jmds.server;
 
-import org.apache.commons.configuration.ConfigurationException;
-import org.apache.commons.configuration.XMLConfiguration;
+import de.berlios.jmds.tools.RightsConfiguration;
+import de.berlios.jmds.tools.SecurityConfiguration;
 
 /**
  * @author Denis
@@ -20,17 +20,15 @@
 public class RightsManager {
 	
 	/** The security configuration **/
-	private XMLConfiguration securityConfig;
+	private SecurityConfiguration securityConfig = SecurityConfiguration.getInstance();
 	
 	/** The rights configuration **/
-	private XMLConfiguration rightsConfig;
+	private RightsConfiguration rightsConfig=RightsConfiguration.getInstance();
 	
-	/** The security config file **/
-	private static final String SECURITY_FILE = "security.xml";
 	
-	/** The rigts config file **/
-	private static final String RIGHTS_FILE = "rights.xml";
 	
+	
+	
 	/** The singleton instance * */
 	private static RightsManager INSTANCE = null;
 	
@@ -44,16 +42,7 @@
 	 */
 	private RightsManager ()
 	{
-		try
-		{
-			XMLConfiguration.setDelimiter('\n');
-			this.securityConfig = new XMLConfiguration (SECURITY_FILE);
-			this.rightsConfig = new XMLConfiguration (RIGHTS_FILE);				
-		}
-		catch (ConfigurationException e)
-		{
-			throw new RuntimeException (e);
-		}			
+			
 	}
 	
 	//----------------------------------------------------------//
@@ -62,9 +51,9 @@
 
 	
 	/**
-	 * To get the singleton instance of LDAP
+	 * To get the singleton instance of RightsManager
 	 * 
-	 * @return the singleton instance of LDAP
+	 * @return the singleton instance of RightsManager
 	 */
 	public static RightsManager getInstance ()
 	{

Modified: trunk/src/de/berlios/jmds/server/SCManager.java
===================================================================
--- trunk/src/de/berlios/jmds/server/SCManager.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/server/SCManager.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -10,12 +10,17 @@
 
 package de.berlios.jmds.server;
 
+import de.berlios.jmds.tools.SecurityConfiguration;
 
+
 /**
  * @author Denis
  *
  */
 public class SCManager {
+	/** The security configuration **/
+	private SecurityConfiguration securityConfig = SecurityConfiguration.getInstance();
+	
 	/** The singleton instance * */
 	private static SCManager INSTANCE = null;
 	
@@ -38,9 +43,9 @@
 
 	
 	/**
-	 * To get the singleton instance of LDAP
+	 * To get the singleton instance of SCManager
 	 * 
-	 * @return the singleton instance of LDAP
+	 * @return the singleton instance of SCManager
 	 */
 	public static SCManager getInstance ()
 	{
@@ -51,7 +56,7 @@
 	}
 	
 	/**
-	 * @param iRequest_ID as id of the request message
+	 * @param RequestId as id of the request message
 	 * @return The array byte which contains the encoding servec context
 	 */
 	public byte[] code (byte[] RequestId)

Modified: trunk/src/de/berlios/jmds/server/ServerInter.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -1,19 +1,21 @@
-/*
- * Created on 18 f?vr. 2005
- * by S?bastien GUINCHARD
- * Copyright: GPL - UMLV(FR) - 2004/2005
+/* 
+ * File    : SCManager.java
+ * Created : 18 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
  */
+
 package de.berlios.jmds.server;
 
 import org.omg.IOP.ServiceContext;
 import org.omg.PortableInterceptor.*;
 
-/**
- * DOCME
+/** 
+ * @author S?bastien GUINCHARD
  * 
- * @version 0.1
- * 
- * @author S?bastien GUINCHARD
  */
 public class ServerInter extends org.omg.CORBA.LocalObject implements ServerRequestInterceptor
 {
@@ -23,6 +25,10 @@
      */
     private static final long serialVersionUID = 3689630311277277232L;
 
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//    
+    
     /**
 	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request_service_contexts(org.omg.PortableInterceptor.ServerRequestInfo)
 	 */

Modified: trunk/src/de/berlios/jmds/server/ServerORBInitializer.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ServerORBInitializer.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/server/ServerORBInitializer.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -1,8 +1,13 @@
-/*
- * Created on 18 f?vr. 2005
- * by S?bastien GUINCHARD
- * Copyright: GPL - UMLV(FR) - 2004/2005
+/* 
+ * File    : SCManager.java
+ * Created : 18 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
  */
+
 package de.berlios.jmds.server;
 
 import org.omg.CORBA.LocalObject;
@@ -10,11 +15,8 @@
 import org.omg.PortableInterceptor.ORBInitInfoPackage.DuplicateName;
 
 /**
- * DOCME
+ * @author S?bastien GUINCHARD
  * 
- * @version 0.1
- * 
- * @author S?bastien GUINCHARD
  */
 public class ServerORBInitializer extends LocalObject implements ORBInitializer {
 
@@ -23,6 +25,10 @@
      */
     private static final long serialVersionUID = 1L;
 
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+    
     /**
      * @see org.omg.PortableInterceptor.ORBInitializerOperations#pre_init(org.omg.PortableInterceptor.ORBInitInfo)
      */

Modified: trunk/src/de/berlios/jmds/tools/Convertor.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -1,20 +1,28 @@
-/*
- * Created on 9 f?vr. 2005
- * by J?r?me GUERS
- * Copyright: GPL - UMLV(FR) - 2004/2005
+/* 
+ * File    : SCManager.java
+ * Created : 9 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
  */
+
 package de.berlios.jmds.tools;
 
 /**
  * Permet la conversion de String en short[] et inversement
  * 
- * @version 0.1
+ * @author J?r?me GUERS
  * 
- * @author J?r?me GUERS
  */
 public class Convertor {
     
-    /**
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//    
+	
+	/**
      * DOCME
      * @param value 
      * @return a table of short

Added: trunk/src/de/berlios/jmds/tools/RightsConfiguration.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/RightsConfiguration.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/tools/RightsConfiguration.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -0,0 +1,106 @@
+/* 
+ * File    : SCManager.java
+ * Created : 23 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+package de.berlios.jmds.tools;
+
+import org.apache.commons.configuration.ConfigurationException;
+import org.apache.commons.configuration.XMLConfiguration;
+
+/**
+ * @author Denis
+ *
+ */
+public class RightsConfiguration {
+	/** The security config xml file **/
+	private XMLConfiguration rightsConfig = null;
+	
+	/** The rigths config file **/
+	private static final String RIGHTS_FILE = "rights.xml";
+	
+	/** The singleton instance * */
+	private static RightsConfiguration INSTANCE = null;
+	
+	//----------------------------------------------------------//
+	//------------------- CONSTRUCTORS -------------------------//
+	//----------------------------------------------------------//
+	
+	/**
+	 * Constructor
+	 *  
+	 */
+	private RightsConfiguration ()
+	{
+		try
+		{
+			XMLConfiguration.setDelimiter('\n');
+			this.rightsConfig = new XMLConfiguration (RIGHTS_FILE);				
+		}
+		catch (ConfigurationException e)
+		{
+			throw new RuntimeException (e);
+		}
+	}
+	
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+
+	
+	/**
+	 * To get the singleton instance of RightsConfiguration
+	 * 
+	 * @return the singleton instance of RightsConfiguration
+	 */
+	public static RightsConfiguration getInstance ()
+	{
+		if (INSTANCE == null)
+			INSTANCE = new RightsConfiguration ();
+		
+		return INSTANCE;
+	}
+	
+	/**
+	 * @param iClientId 	the identifiant of client
+	 * @param szGroup		the group of client
+	 * @param szFonction	the fonction
+	 * @return 				the permission of access (true or false)
+	 */
+	public boolean checkFonctionClientAccess(int iClientId, String szGroup, String szFonction)
+	{
+		//TODO
+		return false;
+	}
+	
+	/**
+	 * @param szIOR			the ior reference of object
+	 * @param szFonction	the the fonction of objetc
+	 * @return				the add status (true validate add and false indicate the fonction exist)
+	 */
+	public boolean addIORFonction (String szIOR, String szFonction)
+	{
+		//TODO
+		return false;
+	}
+	
+	/**
+	 * To save the configuration file
+	 *
+	 */
+	public void save ()
+	{
+		try
+		{
+			rightsConfig.save ();
+		}
+		catch (ConfigurationException e)
+		{
+			e.printStackTrace();
+		}
+	}
+}

Added: trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -0,0 +1,96 @@
+/* 
+ * File    : SCManager.java
+ * Created : 23 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+package de.berlios.jmds.tools;
+
+import org.apache.commons.configuration.ConfigurationException;
+import org.apache.commons.configuration.XMLConfiguration;
+
+/**
+ * @author Denis
+ *
+ */
+public class SecurityConfiguration {
+	/** The security config xml file **/
+	private XMLConfiguration securityConfig = null;
+	
+	/** The security config file **/
+	private static final String SECURITY_FILE = "security.xml";
+
+	/** The singleton instance * */
+	private static SecurityConfiguration INSTANCE = null;
+	
+	//----------------------------------------------------------//
+	//------------------- CONSTRUCTORS -------------------------//
+	//----------------------------------------------------------//
+	
+	/**
+	 * Constructor
+	 *  
+	 */
+	private SecurityConfiguration ()
+	{
+		try
+		{
+			XMLConfiguration.setDelimiter('\n');
+			this.securityConfig = new XMLConfiguration (SECURITY_FILE);
+		}
+		catch (ConfigurationException e)
+		{
+			throw new RuntimeException (e);
+		}
+	}
+	
+	//----------------------------------------------------------//
+	//------------------- PUBLIC METHODS -----------------------//
+	//----------------------------------------------------------//
+
+	
+	/**
+	 * To get the singleton instance of SecurityConfiguration
+	 * 
+	 * @return the singleton instance of SecurityConfiguration
+	 */
+	public static SecurityConfiguration getInstance ()
+	{
+		if (INSTANCE == null)
+			INSTANCE = new SecurityConfiguration ();
+		
+		return INSTANCE;
+	}
+	
+	/**
+	 * @return the server key
+	 */
+	public byte[] getServerKey()
+	{
+		// TODO
+		return null;	
+	}
+	
+	/**
+	 * @param iClientId the client identifiant
+	 * @return			the client key
+	 */
+	public byte[] getClientKey (int iClientId)
+	{
+		//TODO
+		return null;		
+	}
+	
+	/**
+	 * @param iClientId the client identifiant
+	 * @return			the group client
+	 */
+	public byte[] getclientGroup (int iClientId)
+	{
+		// TODO
+		return null;		
+	}
+}

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumClient.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -16,6 +16,10 @@
  */
 public class ForumClient {
 
+    /**
+     * @param args
+     * @throws Exception
+     */
     public static void main(String[] args) throws Exception {
         java.util.Properties props = System.getProperties();
         // props.put( "org.omg.CORBA.ORBClass", "org.openorb.CORBA.ORB" );

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumImpl.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -15,6 +15,10 @@
 	private String moderator;
 	private ConcurrentHashMap discussion;
 	
+	/**
+	 * @param theme
+	 * @param moderator
+	 */
 	public ForumImpl(String theme, String moderator)
 	{
 		this.theme = theme;
@@ -22,26 +26,41 @@
 		discussion = new ConcurrentHashMap();
 	}
 	
+	/**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#theme()
+	 */
 	public String theme() {
 		return theme;
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#moderator()
+	 */
 	public String moderator() {
 		return moderator;
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#postMessage(java.lang.String, org.omg.CORBA.Any)
+	 */
 	public boolean postMessage(String title, org.omg.CORBA.Any m) throws Reject{
 		if(discussion.putIfAbsent(title, m) == null)
 			return true;
 		return false;
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#getMessage(java.lang.String)
+	 */
 	public Any getMessage(String title)  throws Reject{
 		if(!discussion.containsKey(title))
 			throw new Reject("Title unknow", "Pas de message ayant ce titre: " + title);
 		return (Any) discussion.get(title);
 	}
 
+	/**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#removeMessage(java.lang.String)
+	 */
 	public void removeMessage(String title) throws Reject {
 		if(discussion.containsKey(title))
 		{
@@ -49,11 +68,17 @@
 		}
 	}
 	
-	 public Any[] getMessages () {
+	 /**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#getMessages()
+	 */
+	public Any[] getMessages () {
 	 	return (Any[]) discussion.values().toArray(new Any[discussion.size()]);
 	 }
 	 
-	 public void getInfo (StringHolder theme, StringHolder moderator, IntHolder size) {
+	 /**
+	 * @see fr.umlv.ir3.corba.forum.ForumOperations#getInfo(org.omg.CORBA.StringHolder, org.omg.CORBA.StringHolder, org.omg.CORBA.IntHolder)
+	 */
+	public void getInfo (StringHolder theme, StringHolder moderator, IntHolder size) {
 	 	theme.value = this.theme;
 	 	moderator.value = this.moderator;
 	 	size.value = discussion.size();

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-23 20:45:36 UTC (rev 31)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-23 21:52:47 UTC (rev 32)
@@ -19,6 +19,20 @@
  */
 public class ForumServer {
 
+	/**
+	 * @param args
+	 * @throws InvalidName
+	 * @throws ServantAlreadyActive
+	 * @throws ObjectNotActive
+	 * @throws WrongPolicy
+	 * @throws IOException
+	 * @throws AdapterInactive
+	 * @throws NotFound
+	 * @throws AlreadyBound
+	 * @throws CannotProceed
+	 * @throws InvalidName
+	 * @throws org.omg.CosNaming.NamingContextPackage.InvalidName 
+	 */
 	public static void main(String[] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive, NotFound, AlreadyBound, CannotProceed, org.omg.CosNaming.NamingContextPackage.InvalidName {
         
         java.util.Properties props = System.getProperties();



From jguers at sheep.berlios.de  Thu Feb 24 01:50:40 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Thu, 24 Feb 2005 01:50:40 +0100
Subject: [Jmds-svn] r33 - team/Docs team/Docs/uml trunk trunk/src/de/berlios/jmds/applet trunk/test/de/berlios/jmds/test/clients
Message-ID: <200502240050.j1O0oeRE000136@sheep.berlios.de>

Author: jguers
Date: 2005-02-24 01:50:21 +0100 (Thu, 24 Feb 2005)
New Revision: 33

Added:
   team/Docs/convention_codage.xml
   team/Docs/convention_template.xml
   team/Docs/uml/
   team/Docs/uml/codeClient.gif
   team/Docs/uml/codeClient.usd
   team/Docs/uml/codeServeur.gif
   team/Docs/uml/codeServeur.usd
   team/Docs/uml/decodeClient.gif
   team/Docs/uml/decodeClient.usd
   team/Docs/uml/decodeServeur.gif
   team/Docs/uml/decodeServeur.usd
Removed:
   trunk/codeClient.gif
   trunk/codeClient.usd
   trunk/codeServeur.gif
   trunk/codeServeur.usd
   trunk/convention_codage.xml
   trunk/convention_template.xml
   trunk/decodeClient.gif
   trunk/decodeClient.usd
   trunk/decodeServeur.gif
   trunk/decodeServeur.usd
   trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
   trunk/test/de/berlios/jmds/test/clients/ClientPing.java
Log:
Petit menage
Deplacement des docs dans team
Deplacement des config eclipse dans team

Added: team/Docs/convention_codage.xml
===================================================================
--- team/Docs/convention_codage.xml	2005-02-23 21:52:47 UTC (rev 32)
+++ team/Docs/convention_codage.xml	2005-02-24 00:50:21 UTC (rev 33)
@@ -0,0 +1,186 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<profiles version="6">
+<profile name="JMDS" version="6">
+<setting id="comment_clear_blank_lines" value="true"/>
+<setting id="comment_format_comments" value="true"/>
+<setting id="comment_format_header" value="true"/>
+<setting id="comment_format_html" value="true"/>
+<setting id="comment_format_source_code" value="true"/>
+<setting id="comment_indent_parameter_description" value="true"/>
+<setting id="comment_indent_root_tags" value="true"/>
+<setting id="comment_line_length" value="80"/>
+<setting id="comment_new_line_for_parameter" value="false"/>
+<setting id="comment_separate_root_tags" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.align_type_members_on_columns" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_allocation_expression" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_explicit_constructor_call" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_method_invocation" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_qualified_allocation_expression" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_binary_expression" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_compact_if" value="52"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_conditional_expression" value="48"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_expressions_in_array_initializer" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_multiple_fields" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_constructor_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_method_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_selector_in_method_invocation" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_superclass_in_type_declaration" value="64"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_type_declaration" value="64"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_constructor_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_method_declaration" value="16"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_imports" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_package" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_field" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_first_class_body_declaration" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_imports" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_member_type" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_method" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_new_chunk" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_package" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_anonymous_type_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_array_initializer" value="end_of_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block_in_case" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_constructor_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_method_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_switch" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.brace_position_for_type_declaration" value="next_line"/>
+<setting id="org.eclipse.jdt.core.formatter.compact_else_if" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.continuation_indentation" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.continuation_indentation_for_array_initializer" value="2"/>
+<setting id="org.eclipse.jdt.core.formatter.format_guardian_clause_on_one_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_type_header" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_breaks_compare_to_cases" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_block" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_body" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_cases" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_switch" value="true"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_after_opening_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_catch_in_try_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_closing_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_else_in_if_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_finally_in_try_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_while_in_do_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_anonymous_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_block" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_method_body" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_assignment_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_binary_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_brace_in_block" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_paren_in_cast" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_assert" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_case" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_labeled_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_allocation_expression" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_array_initializer" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_parameters" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_throws" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_explicitconstructorcall_arguments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_increments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_inits" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_parameters" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_throws" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_invocation_arguments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_field_declarations" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_local_declarations" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_superinterfaces" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_reference" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_cast" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_catch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_constructor_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_for" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_if" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_invocation" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_parenthesized_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_switch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_synchronized" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_while" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_postfix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_prefix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_question_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_semicolon_in_for" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_after_unary_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_assignment_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_binary_operator" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_brace_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_reference" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_cast" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_catch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_constructor_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_for" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_if" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_invocation" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_parenthesized_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_switch" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_synchronized" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_while" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_assert" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_case" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_default" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_labeled_statement" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_parameters" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_throws" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_explicitconstructorcall_arguments" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_increments" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_inits" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_parameters" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_throws" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_invocation_arguments" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_field_declarations" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_local_declarations" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_superinterfaces" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_anonymous_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_array_initializer" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_block" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_constructor_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_method_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_switch" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_type_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_allocation_expression" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_reference" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_type_reference" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_catch" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_constructor_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_for" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_if" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_declaration" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_invocation" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_parenthesized_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_switch" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_synchronized" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_while" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_postfix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_prefix_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_question_in_conditional" value="insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon_in_for" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_before_unary_operator" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_brackets_in_array_type_reference" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_braces_in_array_initializer" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_brackets_in_array_allocation_expression" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_constructor_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_declaration" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_invocation" value="do not insert"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_else_statement_on_same_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_empty_array_initializer_on_one_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_imple_if_on_one_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.keep_then_statement_on_same_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.lineSplit" value="500"/>
+<setting id="org.eclipse.jdt.core.formatter.number_of_blank_lines_at_beginning_of_method_body" value="0"/>
+<setting id="org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve" value="1"/>
+<setting id="org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line" value="false"/>
+<setting id="org.eclipse.jdt.core.formatter.tabulation.char" value="tab"/>
+<setting id="org.eclipse.jdt.core.formatter.tabulation.size" value="4"/>
+</profile>
+</profiles>

Added: team/Docs/convention_template.xml
===================================================================
--- team/Docs/convention_template.xml	2005-02-23 21:52:47 UTC (rev 32)
+++ team/Docs/convention_template.xml	2005-02-24 00:50:21 UTC (rev 33)
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="UTF-8"?><templates><template context="gettercomment_context" deleted="false" description="Comment for getter method" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.gettercomment" name="gettercomment">/**
+ * @return Returns the ${bare_field_name}.
+ */</template><template context="settercomment_context" deleted="false" description="Comment for setter method" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.settercomment" name="settercomment">/**
+ * @param ${param} The ${bare_field_name} to set.
+ */</template><template context="constructorcomment_context" deleted="false" description="Comment for created constructors" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.constructorcomment" name="constructorcomment">/**
+ * ${tags}
+ */</template><template context="typecomment_context" deleted="false" description="Comment for created types" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.typecomment" name="typecomment">/**
+ * @author ${user}
+ *
+ */</template><template context="fieldcomment_context" deleted="false" description="Comment for fields" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.fieldcomment" name="fieldcomment">/**
+ * Comment for &lt;code&gt;${field}&lt;/code&gt;
+ */</template><template context="methodcomment_context" deleted="false" description="Comment for non-overriding methods" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.methodcomment" name="methodcomment">/**
+ * ${tags}
+ */</template><template context="overridecomment_context" deleted="false" description="Comment for overriding methods" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.overridecomment" name="overridecomment">/**
+ * ${see_to_overridden}
+ */</template><template context="newtype_context" deleted="false" description="Newly created files" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.newtype" name="newtype">/* 
+ * File    : ${file_name}
+ * Created : ${date}
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+
+${package_declaration}
+
+${typecomment}
+${type_declaration}</template><template context="catchblock_context" deleted="false" description="Code in new catch blocks" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.catchblock" name="catchblock">${exception_var}.printStackTrace();</template><template context="methodbody_context" deleted="false" description="Code in created method stubs" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.methodbody" name="methodbody">${body_statement}</template><template context="constructorbody_context" deleted="false" description="Code in created constructor stubs" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.constructorbody" name="constructorbody">${body_statement}</template><template context="getterbody_context" deleted="false" description="Code in created getters" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.getterbody" name="getterbody">return ${field};</template><template context="setterbody_context" deleted="false" description="Code in cr!
 eated setters" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.setterbody" name="setterbody">${field} = ${param};</template></templates>
\ No newline at end of file

Added: team/Docs/uml/codeClient.gif
===================================================================
(Binary files differ)


Property changes on: team/Docs/uml/codeClient.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: team/Docs/uml/codeClient.usd
===================================================================
--- team/Docs/uml/codeClient.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ team/Docs/uml/codeClient.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -0,0 +1,128 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeClient" size="805,530" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:InstanceEditModel" name="ClientInter" location="210,20" size="100,588" id="de.berlios.jmds.client/ClientInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.3/@children.0/@sourceConnections.0 //@children.1/@children.1/@sourceConnections.2" location="42,125" size="16,343" sequenceItemContainer="//@children.0" recursiveChildren="//@children.0/@children.1" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.client/SCAppletClient#getInstance()" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCAppletClient" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,2" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCAppletClient" size="142,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="code" source="//@children.0/@children.0" target="//@children.1/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="code(ResquestInfo:byte[]): byte[]" associatedSequenceNumber="1.2" associatedReturnArrow="//@children.1/@children.1/@sourceConnections.2" shouldShowReturnArrow="true">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,62" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="code(ResquestInfo:byte[]): byte[]" size="160,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.0/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,348" size="16,40" sequenceItemContainer="//@children.0" associatedActivation="//@children.0/@children.0" relativeLocation="8,223">
+      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.0/@children.1" target="//@children.0/@children.1" targetEnd="//@children.0/@children.1/@sourceConnections.0/@children.1" label="//@children.0/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.0/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="coding impossible">
+        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" userLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:WireLabelEditModel" name="if (coding impossible)" size="103,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCAppletClient" location="380,20" size="100,588" id="de.berlios.jmds.client/SCAppletClient">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,127" size="16,40" sequenceItemContainer="//@children.1"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.1" location="42,187" size="16,111" sequenceItemContainer="//@children.1" length="111">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send (Code:APDU) APDU" associatedSequenceNumber="1.2.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,11" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (Code:APDU) APDU" size="123,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.1" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="send (get:APDU) APDU" associatedSequenceNumber="1.2.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,71" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (get:APDU) APDU" size="113,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.2" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:ReturnArrowEditModel" source="//@children.1/@children.1" target="//@children.0/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.2/@children.0" connectionRouterKind="Manual">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,111" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,173" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="JmdsSecurityApplet" location="540,20" size="121,588" id="de.berlios.jmds.applet/JmdsSecurityApplet">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" location="52,198" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.1" location="52,258" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,588" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,125" size="16,343" sequenceItemContainer="//@children.3" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.3/@children.0" target="//@children.0/@children.0" targetEnd="//@children.3/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.3/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="sendRequest(ri:ClientRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="sendRequest(ri:ClientRequestInfo)" size="166,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="289,380" size="92,14" fontInfo="Arial-8-0"/>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="289,440" size="66,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Added: team/Docs/uml/codeServeur.gif
===================================================================
(Binary files differ)


Property changes on: team/Docs/uml/codeServeur.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: team/Docs/uml/codeServeur.usd
===================================================================
--- team/Docs/uml/codeServeur.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ team/Docs/uml/codeServeur.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -0,0 +1,63 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeServeur" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,411" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,152" size="16,139" sequenceItemContainer="//@children.0" length="139">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send_reply (ri:ServerRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send_reply (ri:ServerRequestInfo)" size="166,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="267,20" size="100,411" id="de.berlios.jmds.server/ServerInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,152" size="16,139" sequenceItemContainer="//@children.1" length="139">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="code(RequestID:byte[]): byte[]" associatedSequenceNumber="1.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,72" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="code(RequestID:byte[]): byte[]" size="145,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/SCManager#getInstance()" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCManager" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,12" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCManager" size="127,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,411" id="de.berlios.jmds.server/SCManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,164" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,224" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="340,280" size="66,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Added: team/Docs/uml/decodeClient.gif
===================================================================
(Binary files differ)


Property changes on: team/Docs/uml/decodeClient.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: team/Docs/uml/decodeClient.usd
===================================================================
--- team/Docs/uml/decodeClient.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ team/Docs/uml/decodeClient.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -0,0 +1,144 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeClient" size="922,623" metadata="uml2-1.0" initialized="true" scrolledY="23" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:InstanceEditModel" name="ClientInter" location="210,20" size="100,588" id="de.berlios.jmds.client/ClientInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.3/@children.0/@sourceConnections.0 //@children.1/@children.1/@sourceConnections.2" location="42,125" size="16,343" sequenceItemContainer="//@children.0" recursiveChildren="//@children.0/@children.2 //@children.0/@children.1" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.client/SCAppletClient#getInstance()" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCAppletClient" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,2" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCAppletClient" size="142,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="code" source="//@children.0/@children.0" target="//@children.1/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): byte[]" associatedSequenceNumber="1.2" associatedReturnArrow="//@children.1/@children.1/@sourceConnections.2" shouldShowReturnArrow="true">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,62" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): byte[]" size="122,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SelfSequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.0/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.2/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.2/@children.0" connectionRouterKind="Manual" associatedMethod="check_ResquestId(RequestId:byte[]):boolean" associatedSequenceNumber="1.3">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="14,200" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="check_ResquestId(RequestId:byte[]):boolean" size="217,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.3" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="16,0" userLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <bendpoints secondRelativeDimension="51,-9" firstRelativeDimension="58,0"/>
+        <bendpoints secondRelativeDimension="50,0" firstRelativeDimension="58,9"/>
+      </sourceConnections>
+    </children>
+    <children xsi:type="editmodel:RecursiveActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.2" location="50,335" size="16,29" sequenceItemContainer="//@children.0" length="29" associatedActivation="//@children.0/@children.0" relativeLocation="8,210"/>
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.0/@children.2/@sourceConnections.0" backgroundRGB="128,128,128" location="50,399" size="16,40" sequenceItemContainer="//@children.0" associatedActivation="//@children.0/@children.0" relativeLocation="8,223">
+      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.0/@children.2" target="//@children.0/@children.2" targetEnd="//@children.0/@children.2/@sourceConnections.0/@children.1" label="//@children.0/@children.2/@sourceConnections.0/@children.2" sourceEnd="//@children.0/@children.2/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="Resquest_ID incorrect">
+        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" userLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:WireLabelEditModel" name="if (Resquest_ID incorrect)" size="125,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCAppletClient" location="380,20" size="100,588" id="de.berlios.jmds.client/SCAppletClient">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,127" size="16,40" sequenceItemContainer="//@children.1"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.1" location="42,187" size="16,111" sequenceItemContainer="//@children.1" length="111">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send (Decode:APDU) APDU" associatedSequenceNumber="1.2.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,11" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (Decode:APDU) APDU" size="135,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.1" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="send (get:APDU) APDU" associatedSequenceNumber="1.2.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,71" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="send (get:APDU) APDU" size="113,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2.2" size="25,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:ReturnArrowEditModel" source="//@children.1/@children.1" target="//@children.0/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.2/@children.0" connectionRouterKind="Manual">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,111" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,173" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="JmdsSecurityApplet" location="540,20" size="121,588" id="de.berlios.jmds.applet/JmdsSecurityApplet">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" location="52,198" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.1" location="52,258" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,588" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,125" size="16,343" sequenceItemContainer="//@children.3" length="343">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.3/@children.0" target="//@children.0/@children.0" targetEnd="//@children.3/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.3/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_reply(ri:ClientRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="receive_reply(ri:ClientRequestInfo)" size="168,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="289,380" size="92,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Added: team/Docs/uml/decodeServeur.gif
===================================================================
(Binary files differ)


Property changes on: team/Docs/uml/decodeServeur.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: team/Docs/uml/decodeServeur.usd
===================================================================
--- team/Docs/uml/decodeServeur.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ team/Docs/uml/decodeServeur.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -0,0 +1,112 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeServeur" size="922,535" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
+  <children xsi:type="editmodel:ActorEditModel" location="40,20" size="101,582" itemName="orb">
+    <children xsi:type="editmodel:ActivationEditModel" location="42,140" size="16,322" sequenceItemContainer="//@children.0" length="322">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_request_service_contexts (ri:ServerRequestInfo)" associatedSequenceNumber="1">
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="receive_request_service_contexts (ri:ServerRequestInfo)" size="281,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="340,20" size="100,582" id="de.berlios.jmds.server/ServerInter">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,140" size="16,322" sequenceItemContainer="//@children.1" recursiveChildren="//@children.1/@children.1" length="322">
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): int" associatedSequenceNumber="1.2">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,85" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): int" size="106,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.3/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" associatedSequenceNumber="1.4">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,212" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" size="320,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.4" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/SCManager#getInstance()" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.2/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCManager" associatedSequenceNumber="1.1">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,25" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCManager" size="127,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/RightsManager#getInstance()" source="//@children.1/@children.0" target="//@children.3/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.3/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.3/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): RightsManager" associatedSequenceNumber="1.3">
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,152" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): RightsManager" size="143,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" name="1.3" size="16,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+      </sourceConnections>
+    </children>
+    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,412" size="16,40" sequenceItemContainer="//@children.1" associatedActivation="//@children.1/@children.0" relativeLocation="8,132">
+      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.1/@children.1" target="//@children.1/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" label="//@children.1/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="le user n'a pas acces a la fonction de l'objet">
+        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:SequenceEndEditModel" location="0,1" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
+        </children>
+        <children xsi:type="editmodel:WireLabelEditModel" name="if (le user n'a pas acces a la fonction de l'objet)" size="229,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
+      </sourceConnections>
+    </children>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,582" id="de.berlios.jmds.server/SCManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.2" location="42,165" size="16,40" sequenceItemContainer="//@children.2"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,225" size="16,40" sequenceItemContainer="//@children.2"/>
+  </children>
+  <children xsi:type="editmodel:InstanceEditModel" name="RightsManager" location="690,20" size="100,582" id="de.berlios.jmds.server/RightsManager">
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.3" location="42,292" size="16,40" sequenceItemContainer="//@children.3"/>
+    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,352" size="16,40" sequenceItemContainer="//@children.3"/>
+  </children>
+  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="420,440" size="92,14" fontInfo="Arial-8-0"/>
+  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
+  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
+    <leftRuler/>
+    <topRuler/>
+  </boardSetting>
+</editmodel:SequenceDiagramEditModel>

Deleted: trunk/codeClient.gif
===================================================================
(Binary files differ)

Deleted: trunk/codeClient.usd
===================================================================
--- trunk/codeClient.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/codeClient.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,128 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeClient" size="805,530" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
-  <children xsi:type="editmodel:InstanceEditModel" name="ClientInter" location="210,20" size="100,588" id="de.berlios.jmds.client/ClientInter">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.3/@children.0/@sourceConnections.0 //@children.1/@children.1/@sourceConnections.2" location="42,125" size="16,343" sequenceItemContainer="//@children.0" recursiveChildren="//@children.0/@children.1" length="343">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.client/SCAppletClient#getInstance()" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCAppletClient" associatedSequenceNumber="1.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,2" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCAppletClient" size="142,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="code" source="//@children.0/@children.0" target="//@children.1/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="code(ResquestInfo:byte[]): byte[]" associatedSequenceNumber="1.2" associatedReturnArrow="//@children.1/@children.1/@sourceConnections.2" shouldShowReturnArrow="true">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,62" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="code(ResquestInfo:byte[]): byte[]" size="160,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.0/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,348" size="16,40" sequenceItemContainer="//@children.0" associatedActivation="//@children.0/@children.0" relativeLocation="8,223">
-      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.0/@children.1" target="//@children.0/@children.1" targetEnd="//@children.0/@children.1/@sourceConnections.0/@children.1" label="//@children.0/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.0/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="coding impossible">
-        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.1/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" userLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.1/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:WireLabelEditModel" name="if (coding impossible)" size="103,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="SCAppletClient" location="380,20" size="100,588" id="de.berlios.jmds.client/SCAppletClient">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,127" size="16,40" sequenceItemContainer="//@children.1"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.1" location="42,187" size="16,111" sequenceItemContainer="//@children.1" length="111">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send (Code:APDU) APDU" associatedSequenceNumber="1.2.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,11" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="send (Code:APDU) APDU" size="123,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2.1" size="25,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="send (get:APDU) APDU" associatedSequenceNumber="1.2.2">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,71" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="send (get:APDU) APDU" size="113,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2.2" size="25,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:ReturnArrowEditModel" source="//@children.1/@children.1" target="//@children.0/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.2/@children.0" connectionRouterKind="Manual">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,111" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,173" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="JmdsSecurityApplet" location="540,20" size="121,588" id="de.berlios.jmds.applet/JmdsSecurityApplet">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" location="52,198" size="16,40" sequenceItemContainer="//@children.2"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.1" location="52,258" size="16,40" sequenceItemContainer="//@children.2"/>
-  </children>
-  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,588" itemName="orb">
-    <children xsi:type="editmodel:ActivationEditModel" location="42,125" size="16,343" sequenceItemContainer="//@children.3" length="343">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.3/@children.0" target="//@children.0/@children.0" targetEnd="//@children.3/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.3/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="sendRequest(ri:ClientRequestInfo)" associatedSequenceNumber="1">
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="sendRequest(ri:ClientRequestInfo)" size="166,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="289,380" size="92,14" fontInfo="Arial-8-0"/>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="289,440" size="66,14" fontInfo="Arial-8-0"/>
-  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
-  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
-    <leftRuler/>
-    <topRuler/>
-  </boardSetting>
-</editmodel:SequenceDiagramEditModel>

Deleted: trunk/codeServeur.gif
===================================================================
(Binary files differ)

Deleted: trunk/codeServeur.usd
===================================================================
--- trunk/codeServeur.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/codeServeur.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,63 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="codeServeur" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
-  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,411" itemName="orb">
-    <children xsi:type="editmodel:ActivationEditModel" location="42,152" size="16,139" sequenceItemContainer="//@children.0" length="139">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send_reply (ri:ServerRequestInfo)" associatedSequenceNumber="1">
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="send_reply (ri:ServerRequestInfo)" size="166,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="267,20" size="100,411" id="de.berlios.jmds.server/ServerInter">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,152" size="16,139" sequenceItemContainer="//@children.1" length="139">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="code(RequestID:byte[]): byte[]" associatedSequenceNumber="1.2">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,72" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="code(RequestID:byte[]): byte[]" size="145,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/SCManager#getInstance()" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCManager" associatedSequenceNumber="1.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,12" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCManager" size="127,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,411" id="de.berlios.jmds.server/SCManager">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,164" size="16,40" sequenceItemContainer="//@children.2"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,224" size="16,40" sequenceItemContainer="//@children.2"/>
-  </children>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="initialise le SC" location="340,280" size="66,14" fontInfo="Arial-8-0"/>
-  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
-  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
-    <leftRuler/>
-    <topRuler/>
-  </boardSetting>
-</editmodel:SequenceDiagramEditModel>

Deleted: trunk/convention_codage.xml
===================================================================
--- trunk/convention_codage.xml	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/convention_codage.xml	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,186 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<profiles version="6">
-<profile name="JMDS" version="6">
-<setting id="comment_clear_blank_lines" value="true"/>
-<setting id="comment_format_comments" value="true"/>
-<setting id="comment_format_header" value="true"/>
-<setting id="comment_format_html" value="true"/>
-<setting id="comment_format_source_code" value="true"/>
-<setting id="comment_indent_parameter_description" value="true"/>
-<setting id="comment_indent_root_tags" value="true"/>
-<setting id="comment_line_length" value="80"/>
-<setting id="comment_new_line_for_parameter" value="false"/>
-<setting id="comment_separate_root_tags" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.align_type_members_on_columns" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_allocation_expression" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_explicit_constructor_call" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_method_invocation" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_qualified_allocation_expression" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_binary_expression" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_compact_if" value="52"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_conditional_expression" value="48"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_expressions_in_array_initializer" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_multiple_fields" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_constructor_declaration" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_method_declaration" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_selector_in_method_invocation" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_superclass_in_type_declaration" value="64"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_type_declaration" value="64"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_constructor_declaration" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_method_declaration" value="16"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_imports" value="2"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_package" value="1"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_field" value="0"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_first_class_body_declaration" value="0"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_imports" value="0"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_member_type" value="0"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_method" value="1"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_new_chunk" value="1"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_package" value="0"/>
-<setting id="org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations" value="2"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_anonymous_type_declaration" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_array_initializer" value="end_of_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block_in_case" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_constructor_declaration" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_method_declaration" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_switch" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.brace_position_for_type_declaration" value="next_line"/>
-<setting id="org.eclipse.jdt.core.formatter.compact_else_if" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.continuation_indentation" value="2"/>
-<setting id="org.eclipse.jdt.core.formatter.continuation_indentation_for_array_initializer" value="2"/>
-<setting id="org.eclipse.jdt.core.formatter.format_guardian_clause_on_one_line" value="false"/>
-<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_type_header" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.indent_breaks_compare_to_cases" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_block" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_body" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_cases" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_switch" value="true"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_after_opening_brace_in_array_initializer" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_catch_in_try_statement" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_closing_brace_in_array_initializer" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_else_in_if_statement" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_finally_in_try_statement" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_while_in_do_statement" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_anonymous_type_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_block" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_method_body" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_type_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_assignment_operator" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_binary_operator" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_brace_in_block" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_paren_in_cast" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_assert" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_case" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_conditional" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_labeled_statement" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_allocation_expression" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_array_initializer" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_parameters" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_throws" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_explicitconstructorcall_arguments" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_increments" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_inits" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_parameters" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_throws" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_invocation_arguments" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_field_declarations" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_local_declarations" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_superinterfaces" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_brace_in_array_initializer" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_allocation_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_reference" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_cast" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_catch" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_constructor_declaration" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_for" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_if" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_declaration" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_invocation" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_parenthesized_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_switch" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_synchronized" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_while" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_postfix_operator" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_prefix_operator" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_question_in_conditional" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_semicolon_in_for" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_after_unary_operator" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_assignment_operator" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_binary_operator" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_brace_in_array_initializer" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_allocation_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_reference" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_cast" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_catch" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_constructor_declaration" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_for" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_if" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_declaration" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_invocation" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_parenthesized_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_switch" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_synchronized" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_while" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_assert" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_case" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_conditional" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_default" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_labeled_statement" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_allocation_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_array_initializer" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_parameters" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_throws" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_explicitconstructorcall_arguments" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_increments" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_inits" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_parameters" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_throws" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_invocation_arguments" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_field_declarations" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_local_declarations" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_superinterfaces" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_anonymous_type_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_array_initializer" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_block" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_constructor_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_method_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_switch" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_type_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_allocation_expression" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_reference" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_type_reference" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_catch" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_constructor_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_for" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_if" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_declaration" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_invocation" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_parenthesized_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_switch" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_synchronized" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_while" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_postfix_operator" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_prefix_operator" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_question_in_conditional" value="insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon_in_for" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_before_unary_operator" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_between_brackets_in_array_type_reference" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_braces_in_array_initializer" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_brackets_in_array_allocation_expression" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_constructor_declaration" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_declaration" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_invocation" value="do not insert"/>
-<setting id="org.eclipse.jdt.core.formatter.keep_else_statement_on_same_line" value="false"/>
-<setting id="org.eclipse.jdt.core.formatter.keep_empty_array_initializer_on_one_line" value="false"/>
-<setting id="org.eclipse.jdt.core.formatter.keep_imple_if_on_one_line" value="false"/>
-<setting id="org.eclipse.jdt.core.formatter.keep_then_statement_on_same_line" value="false"/>
-<setting id="org.eclipse.jdt.core.formatter.lineSplit" value="500"/>
-<setting id="org.eclipse.jdt.core.formatter.number_of_blank_lines_at_beginning_of_method_body" value="0"/>
-<setting id="org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve" value="1"/>
-<setting id="org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line" value="false"/>
-<setting id="org.eclipse.jdt.core.formatter.tabulation.char" value="tab"/>
-<setting id="org.eclipse.jdt.core.formatter.tabulation.size" value="4"/>
-</profile>
-</profiles>

Deleted: trunk/convention_template.xml
===================================================================
--- trunk/convention_template.xml	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/convention_template.xml	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,29 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?><templates><template context="gettercomment_context" deleted="false" description="Comment for getter method" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.gettercomment" name="gettercomment">/**
- * @return Returns the ${bare_field_name}.
- */</template><template context="settercomment_context" deleted="false" description="Comment for setter method" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.settercomment" name="settercomment">/**
- * @param ${param} The ${bare_field_name} to set.
- */</template><template context="constructorcomment_context" deleted="false" description="Comment for created constructors" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.constructorcomment" name="constructorcomment">/**
- * ${tags}
- */</template><template context="typecomment_context" deleted="false" description="Comment for created types" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.typecomment" name="typecomment">/**
- * @author ${user}
- *
- */</template><template context="fieldcomment_context" deleted="false" description="Comment for fields" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.fieldcomment" name="fieldcomment">/**
- * Comment for &lt;code&gt;${field}&lt;/code&gt;
- */</template><template context="methodcomment_context" deleted="false" description="Comment for non-overriding methods" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.methodcomment" name="methodcomment">/**
- * ${tags}
- */</template><template context="overridecomment_context" deleted="false" description="Comment for overriding methods" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.overridecomment" name="overridecomment">/**
- * ${see_to_overridden}
- */</template><template context="newtype_context" deleted="false" description="Newly created files" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.newtype" name="newtype">/* 
- * File    : ${file_name}
- * Created : ${date}
- * 
- * =======================================
- * JMDS PROJECT ("http://jmds.berlios.de")
- * =======================================
- *
- */
-
-${package_declaration}
-
-${typecomment}
-${type_declaration}</template><template context="catchblock_context" deleted="false" description="Code in new catch blocks" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.catchblock" name="catchblock">${exception_var}.printStackTrace();</template><template context="methodbody_context" deleted="false" description="Code in created method stubs" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.methodbody" name="methodbody">${body_statement}</template><template context="constructorbody_context" deleted="false" description="Code in created constructor stubs" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.constructorbody" name="constructorbody">${body_statement}</template><template context="getterbody_context" deleted="false" description="Code in created getters" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.getterbody" name="getterbody">return ${field};</template><template context="setterbody_context" deleted="false" description="Code in cr!
 eated setters" enabled="true" id="org.eclipse.jdt.ui.text.codetemplates.setterbody" name="setterbody">${field} = ${param};</template></templates>
\ No newline at end of file

Deleted: trunk/decodeClient.gif
===================================================================
(Binary files differ)

Deleted: trunk/decodeClient.usd
===================================================================
--- trunk/decodeClient.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/decodeClient.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,144 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeClient" size="922,623" metadata="uml2-1.0" initialized="true" scrolledY="23" tag="1000" key="3230303431303236204A4D44532F44656E6973">
-  <children xsi:type="editmodel:InstanceEditModel" name="ClientInter" location="210,20" size="100,588" id="de.berlios.jmds.client/ClientInter">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.3/@children.0/@sourceConnections.0 //@children.1/@children.1/@sourceConnections.2" location="42,125" size="16,343" sequenceItemContainer="//@children.0" recursiveChildren="//@children.0/@children.2 //@children.0/@children.1" length="343">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.client/SCAppletClient#getInstance()" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCAppletClient" associatedSequenceNumber="1.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,2" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCAppletClient" size="142,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="code" source="//@children.0/@children.0" target="//@children.1/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): byte[]" associatedSequenceNumber="1.2" associatedReturnArrow="//@children.1/@children.1/@sourceConnections.2" shouldShowReturnArrow="true">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,62" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): byte[]" size="122,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.1/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SelfSequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.0/@children.1" targetEnd="//@children.0/@children.0/@sourceConnections.2/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.2/@children.0" connectionRouterKind="Manual" associatedMethod="check_ResquestId(RequestId:byte[]):boolean" associatedSequenceNumber="1.3">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="14,200" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.2/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="check_ResquestId(RequestId:byte[]):boolean" size="217,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.3" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" location="16,0" userLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.2/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <bendpoints secondRelativeDimension="51,-9" firstRelativeDimension="58,0"/>
-        <bendpoints secondRelativeDimension="50,0" firstRelativeDimension="58,9"/>
-      </sourceConnections>
-    </children>
-    <children xsi:type="editmodel:RecursiveActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.2" location="50,335" size="16,29" sequenceItemContainer="//@children.0" length="29" associatedActivation="//@children.0/@children.0" relativeLocation="8,210"/>
-    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.0/@children.2/@sourceConnections.0" backgroundRGB="128,128,128" location="50,399" size="16,40" sequenceItemContainer="//@children.0" associatedActivation="//@children.0/@children.0" relativeLocation="8,223">
-      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.0/@children.2" target="//@children.0/@children.2" targetEnd="//@children.0/@children.2/@sourceConnections.0/@children.1" label="//@children.0/@children.2/@sourceConnections.0/@children.2" sourceEnd="//@children.0/@children.2/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="Resquest_ID incorrect">
-        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.2/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" userLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.2/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:WireLabelEditModel" name="if (Resquest_ID incorrect)" size="125,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="SCAppletClient" location="380,20" size="100,588" id="de.berlios.jmds.client/SCAppletClient">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,127" size="16,40" sequenceItemContainer="//@children.1"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.1" location="42,187" size="16,111" sequenceItemContainer="//@children.1" length="111">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="send (Decode:APDU) APDU" associatedSequenceNumber="1.2.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,11" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="send (Decode:APDU) APDU" size="135,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2.1" size="25,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.1" target="//@children.2/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="send (get:APDU) APDU" associatedSequenceNumber="1.2.2">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,71" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="send (get:APDU) APDU" size="113,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2.2" size="25,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.1/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:ReturnArrowEditModel" source="//@children.1/@children.1" target="//@children.0/@children.0" targetEnd="//@children.1/@children.1/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.1/@sourceConnections.2/@children.0" connectionRouterKind="Manual">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,111" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,173" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.2/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="JmdsSecurityApplet" location="540,20" size="121,588" id="de.berlios.jmds.applet/JmdsSecurityApplet">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" location="52,198" size="16,40" sequenceItemContainer="//@children.2"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.1" location="52,258" size="16,40" sequenceItemContainer="//@children.2"/>
-  </children>
-  <children xsi:type="editmodel:ActorEditModel" location="30,20" size="100,588" itemName="orb">
-    <children xsi:type="editmodel:ActivationEditModel" location="42,125" size="16,343" sequenceItemContainer="//@children.3" length="343">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.3/@children.0" target="//@children.0/@children.0" targetEnd="//@children.3/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.3/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_reply(ri:ClientRequestInfo)" associatedSequenceNumber="1">
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="receive_reply(ri:ClientRequestInfo)" size="168,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.3/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="289,380" size="92,14" fontInfo="Arial-8-0"/>
-  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
-  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
-    <leftRuler/>
-    <topRuler/>
-  </boardSetting>
-</editmodel:SequenceDiagramEditModel>

Deleted: trunk/decodeServeur.gif
===================================================================
(Binary files differ)

Deleted: trunk/decodeServeur.usd
===================================================================
--- trunk/decodeServeur.usd	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/decodeServeur.usd	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,112 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<editmodel:SequenceDiagramEditModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:editmodel="editmodel.xmi" xmlns:options="options.xmi" name="decodeServeur" size="922,535" metadata="uml2-1.0" initialized="true" tag="1000" key="3230303431303236204A4D44532F44656E6973">
-  <children xsi:type="editmodel:ActorEditModel" location="40,20" size="101,582" itemName="orb">
-    <children xsi:type="editmodel:ActivationEditModel" location="42,140" size="16,322" sequenceItemContainer="//@children.0" length="322">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.0/@children.0" target="//@children.1/@children.0" targetEnd="//@children.0/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.0/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="receive_request_service_contexts (ri:ServerRequestInfo)" associatedSequenceNumber="1">
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="receive_request_service_contexts (ri:ServerRequestInfo)" size="281,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1" size="7,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.0/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="ServerInter" location="340,20" size="100,582" id="de.berlios.jmds.server/ServerInter">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.0/@children.0/@sourceConnections.0" location="42,140" size="16,322" sequenceItemContainer="//@children.1" recursiveChildren="//@children.1/@children.1" length="322">
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.2/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.0/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.0/@children.0" connectionRouterKind="Manual" associatedMethod="decode(SC:byte[]): int" associatedSequenceNumber="1.2">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,85" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="decode(SC:byte[]): int" size="106,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.2" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" source="//@children.1/@children.0" target="//@children.3/@children.1" targetEnd="//@children.1/@children.0/@sourceConnections.1/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.1/@children.0" connectionRouterKind="Manual" associatedMethod="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" associatedSequenceNumber="1.4">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,212" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="canUse(szUserId:String, szIOR:String, szFonction:String): boolean" size="320,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.4" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.1/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/SCManager#getInstance()" source="//@children.1/@children.0" target="//@children.2/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.2/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.2/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): SCManager" associatedSequenceNumber="1.1">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,25" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.2/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): SCManager" size="127,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.1" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.2/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-      <sourceConnections xsi:type="editmodel:SequenceMessageEditModel" name="getInstance" id="de.berlios.jmds.server/RightsManager#getInstance()" source="//@children.1/@children.0" target="//@children.3/@children.0" targetEnd="//@children.1/@children.0/@sourceConnections.3/@children.1" sourceEnd="//@children.1/@children.0/@sourceConnections.3/@children.0" connectionRouterKind="Manual" associatedMethod="getInstance(): RightsManager" associatedSequenceNumber="1.3">
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,152" anchorKind="FixedAtEdge" attachSource="true" userLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.3/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="getInstance(): RightsManager" size="143,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" name="1.3" size="16,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" anchorKind="FixedAtEdge" userLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.0" methodLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.2" statementExpression="//@children.1/@children.0/@sourceConnections.3/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-      </sourceConnections>
-    </children>
-    <children xsi:type="editmodel:StatementActivationEditModel" targetConnections="//@children.1/@children.1/@sourceConnections.0" backgroundRGB="128,128,128" location="50,412" size="16,40" sequenceItemContainer="//@children.1" associatedActivation="//@children.1/@children.0" relativeLocation="8,132">
-      <sourceConnections xsi:type="editmodel:StatementWireEditModel" source="//@children.1/@children.1" target="//@children.1/@children.1" targetEnd="//@children.1/@children.1/@sourceConnections.0/@children.1" label="//@children.1/@children.1/@sourceConnections.0/@children.2" sourceEnd="//@children.1/@children.1/@sourceConnections.0/@children.0" connectionRouterKind="Manual" statement="if" condition="le user n'a pas acces a la fonction de l'objet">
-        <children xsi:type="editmodel:SequenceEndEditModel" attachSource="true" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.0/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:SequenceEndEditModel" location="0,1" userLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.0" methodLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.1" sequenceNumberLabel="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.2" statementExpression="//@children.1/@children.1/@sourceConnections.0/@children.1/@children.3">
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:LabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-          <children xsi:type="editmodel:MessageLabelEditModel" size="1,14" fontInfo="Arial-8-0"/>
-        </children>
-        <children xsi:type="editmodel:WireLabelEditModel" name="if (le user n'a pas acces a la fonction de l'objet)" size="229,14" fontInfo="Arial-8-0" anchorKind="MiddlePart"/>
-      </sourceConnections>
-    </children>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="SCManager" location="536,20" size="100,582" id="de.berlios.jmds.server/SCManager">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.2" location="42,165" size="16,40" sequenceItemContainer="//@children.2"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.0" location="42,225" size="16,40" sequenceItemContainer="//@children.2"/>
-  </children>
-  <children xsi:type="editmodel:InstanceEditModel" name="RightsManager" location="690,20" size="100,582" id="de.berlios.jmds.server/RightsManager">
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.3" location="42,292" size="16,40" sequenceItemContainer="//@children.3"/>
-    <children xsi:type="editmodel:ActivationEditModel" targetConnections="//@children.1/@children.0/@sourceConnections.1" location="42,352" size="16,40" sequenceItemContainer="//@children.3"/>
-  </children>
-  <children xsi:type="editmodel:LabelObjectEditModel" name="l??ve une exception" location="420,440" size="92,14" fontInfo="Arial-8-0"/>
-  <diagramOptions xsi:type="options:SequenceDiagramOptions" level="0" autoName="false"/>
-  <boardSetting snapToGeometry="true" gridEnabled="true" gridSpacing="10,10" gridOrigin="0,0" rulerUnit="pixel">
-    <leftRuler/>
-    <topRuler/>
-  </boardSetting>
-</editmodel:SequenceDiagramEditModel>

Deleted: trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/src/de/berlios/jmds/applet/JmdsSecurityApplet.java	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,96 +0,0 @@
-/*
- * Created on 8 f?vr. 2005
- * by J?r?me GUERS
- * Copyright: GPL - UMLV(FR) - 2004/2005
- */
-package de.berlios.jmds.applet;
-
-import javacard.framework.APDU;
-import javacard.framework.Applet;
-import javacard.framework.ISOException;
-import javacard.framework.ISO7816;
-
-/**
- * DOCME
- * 
- * @version 0.1
- * 
- * @author J?r?me GUERS
- */
-public class JmdsSecurityApplet extends Applet {
-
-    private final static byte CLA_SECURITY = (byte) 0x69;
-    private final static byte CODE = (byte) 0x10;
-    private final static byte GET_CODE = (byte) 0x20;
-    private final static byte DECODE = (byte) 0x30;
-    private final static byte GET_DECODE = (byte) 0x40;
-    private final static short BUFFER_LENGTH = (short) 255;
-
-    private byte[] buffer;
-    private byte[] code;
-    private short messLength;
-    
-    /**
-     * Constructeur par d?faut
-     */
-    protected JmdsSecurityApplet() {
-        buffer = new byte[BUFFER_LENGTH];
-        code = new byte[BUFFER_LENGTH];
-        messLength = (byte) 0;
-        register();
-    }
-
-    /**
-     * @see javacard.framework.Applet#install(byte[], short, byte)
-     */
-    public static void install(byte[] bArray, short bOffset, byte bLength) {
-        new JmdsSecurityApplet();
-    }
-
-    /**
-     * M?thode appel?e ? l'arriv?e d'une trame APDU
-     * 
-     * @param apdu
-     * @throws ISOException
-     * 
-     * @see javacard.framework.Applet#process(javacard.framework.APDU)
-     */
-    public void process(APDU apdu) throws ISOException {
-        byte[] buffer = apdu.getBuffer();
-
-        // CLA ? 69
-        if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
-            switch (buffer[ISO7816.OFFSET_INS]) {
-                case CODE:
-                    encode(apdu);
-                    break;
-                
-                case GET_CODE:
-                    getEncode(apdu);
-                    break;
-
-                case DECODE:
-                    break;
-                    
-                case GET_DECODE:
-                    break;
-            }
-        }
-    }
-    
-    private void encode(APDU apdu)
-    {
-        messLength = apdu.setIncomingAndReceive();
-        for (short i = 0; i < messLength; i++) {
-            code[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
-        }
-    }
-    
-    private void getEncode(APDU apdu)
-    {
-        if(apdu.setOutgoing() < messLength)
-            ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
-        
-        apdu.sendBytesLong(code, (short)0, messLength);
-    }
-}

Deleted: trunk/test/de/berlios/jmds/test/clients/ClientPing.java
===================================================================
--- trunk/test/de/berlios/jmds/test/clients/ClientPing.java	2005-02-23 21:52:47 UTC (rev 32)
+++ trunk/test/de/berlios/jmds/test/clients/ClientPing.java	2005-02-24 00:50:21 UTC (rev 33)
@@ -1,150 +0,0 @@
-/*
- * Created on 9 f?vr. 2005
- * by J?r?me GUERS
- * Copyright: GPL - UMLV(FR) - 2004/2005
- */
-package de.berlios.jmds.test.clients;
-
-import slb.iop.IOP;
-import slb.iop.IOPEvent;
-import slb.iop.IOPListener;
-import slb.iop.SmartCard;
-import de.berlios.jmds.tools.Convertor;
-
-/**
- * Teste la classe Ping charg?e sur la carte
- * 
- * @version 0.1
- * 
- * @author J?r?me GUERS
- */
-public class ClientPing {
-
-	private static class jmdsIOPListener implements IOPListener {
-
-		/**
-		 * DOCME
-		 * 
-		 * @param event
-		 * 
-		 * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
-		 */
-		public void CardRemoved(IOPEvent event) {
-			System.out.println("Carte retir?e de ");
-			System.out.println(event.getReaderName());
-		}
-
-		/**
-		 * DOCME
-		 * 
-		 * @param event
-		 * 
-		 * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
-		 */
-		public void CardInserted(IOPEvent event) {
-			System.out.print("Carte ins?r?e dans ");
-			System.out.println(event.getReaderName());
-		}
-
-		/**
-		 * DOCME
-		 * 
-		 * @param event
-		 * 
-		 * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
-		 */
-		public void ReaderRemoved(IOPEvent event) {
-			System.out.println("Lecteur d?connect?");
-		}
-
-		/**
-		 * DOCME
-		 * 
-		 * @param event
-		 * 
-		 * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
-		 */
-		public void ReaderInserted(IOPEvent event) {
-			System.out.println("Lecteur connect?");
-		}
-	}
-
-	/**
-	 * @param args
-	 */
-	public static void main(String[] args) {
-		IOP sIOP = new IOP();
-
-		jmdsIOPListener listener = new jmdsIOPListener();
-		sIOP.addIOPListener(listener);
-
-		String[] lstReaders = sIOP.ListReaders();
-
-		for (int i = 0; i < lstReaders.length; i++) {
-			System.out.println(lstReaders[i]);
-		}
-
-		SmartCard card = new SmartCard();
-		if (lstReaders.length > 0) {
-			boolean result = sIOP.Connect(card, lstReaders[0], false);
-			if (result) {
-				System.out.println("Carte connectee");
-
-				int CLA = Integer.parseInt("00", 16);
-				int INS = Integer.parseInt("A4", 16);
-				int P1 = Integer.parseInt("04", 16);
-				int P2 = Integer.parseInt("00", 16);
-				int[] body = Convertor.stringToIntArray("11223344556677");
-				int LE = Integer.parseInt("00", 16);
-				try {
-					System.out.println("Applet Selection");
-					card.BeginTransaction();
-					card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-					System.out.println("Applet selected");
-					card.EndTransaction();
-				} catch (slb.iop.slbException e) {
-					System.out.println("Pb de Selection");
-					e.printStackTrace();
-				}
-
-				System.out.println("Envoi de l'APDU Echo Request");
-				CLA = Integer.parseInt("80", 16);
-				INS = Integer.parseInt("10", 16);
-				P1 = Integer.parseInt("00", 16);
-				P2 = Integer.parseInt("00", 16);
-				body = Convertor.stringToIntArray("102030");
-				LE = Integer.parseInt("00", 16);
-
-				try {
-					card.BeginTransaction();
-					card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-					card.EndTransaction();
-				} catch (slb.iop.slbException e) {
-					System.out.println("Erreur request");
-					e.printStackTrace();
-				}
-
-				System.out.print("Envoi de l'APDU Echo Reply: > ");
-				CLA = (int) Integer.parseInt("80", 16);
-				INS = (int) Integer.parseInt("30", 16);
-				P1 = (int) Integer.parseInt("00", 16);
-				P2 = (int) Integer.parseInt("00", 16);
-				body = Convertor.stringToIntArray("");
-				LE = (int) Integer.parseInt("03", 16);
-
-				try {
-					card.BeginTransaction();
-					short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-					for (int i = 0; i < out.length; i++) {
-						System.out.print(Integer.toHexString(out[i]) + " ");
-					}
-					System.out.println("");
-					card.EndTransaction();
-				} catch (slb.iop.slbException e) {
-					System.out.println("Erreur reply");
-					e.printStackTrace();
-				}
-			}
-		}
-	}
-}
\ No newline at end of file



From jguers at sheep.berlios.de  Thu Feb 24 02:54:07 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Thu, 24 Feb 2005 02:54:07 +0100
Subject: [Jmds-svn] r34 - in trunk: applet/de/berlios/jmds/applet/javacard generator src/de/berlios/jmds/applet
Message-ID: <200502240154.j1O1s7tr013475@sheep.berlios.de>

Author: jguers
Date: 2005-02-24 02:53:54 +0100 (Thu, 24 Feb 2005)
New Revision: 34

Added:
   trunk/src/de/berlios/jmds/applet/SCApplet.java
Modified:
   trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
   trunk/generator/SecurityApplet.pmf
Log:
Defaite : le module de crypto est limite en export : seuls les amerloques peuvent l'utiliser
Il faut qu'on fixe une methode de cryptage TRES SIMPLE ! (ou alors, recoder les algo de cryptage ...)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
===================================================================
--- trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-24 00:50:21 UTC (rev 33)
+++ trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-24 01:53:54 UTC (rev 34)
@@ -1,5 +1,5 @@
 // converted by version 1.3
-// on Sat Feb 19 19:55:27 CET 2005
+// on Thu Feb 24 02:52:16 CET 2005
 
 .package de/berlios/jmds/applet {
 	.aid 0x11:0x22:0x33:0x44:0x55:0x66;
@@ -7,63 +7,71 @@
 
 	.imports {
 		0xA0:0x0:0x0:0x0:0x62:0x1:0x1 1.0;		//javacard/framework
+		0xA0:0x0:0x0:0x0:0x62:0x1:0x2 1.1;		//javacard/security
 	}
 
 	.applet {
-		0x11:0x22:0x33:0x44:0x55:0x66:0x77 JmdsSecurityApplet;
+		0x11:0x22:0x33:0x44:0x55:0x66:0x77 SCApplet;
 	}
 
 	.constantPool {
 		// 0
-		instanceFieldRef byte[] JmdsSecurityApplet/buffer;
+		instanceFieldRef byte[] SCApplet/buffer;
 		// 1
-		instanceFieldRef byte[] JmdsSecurityApplet/code;
+		instanceFieldRef byte[] SCApplet/code;
 		// 2
-		instanceFieldRef short JmdsSecurityApplet/messLength;
+		instanceFieldRef short SCApplet/messLength;
 		// 3
-		instanceFieldRef byte[] Ping/buffer;
+		instanceFieldRef 1.8 SCApplet/userKey;
 		// 4
-		instanceFieldRef byte Ping/messLength;
+		instanceFieldRef 1.9 SCApplet/serverKey;
 		// 5
-		classRef JmdsSecurityApplet;
+		instanceFieldRef 1.8 SCApplet/sessionKey;
 		// 6
-		staticMethodRef JmdsSecurityApplet/<init>()V;
+		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
 		// 7
-		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
+		classRef 1.9;		// javacard/security/RSAPublicKey
 		// 8
-		staticMethodRef JmdsSecurityApplet/encode(Ljavacard/framework/APDU;)V;
-			.descriptor	Ljavacard/framework/APDU;	0.10;
+		staticMethodRef 1.13.0(BSZ)Ljavacard/security/Key;;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+			.descriptor	Ljavacard/security/Key;	1.0;
 
 		// 9
-		staticMethodRef JmdsSecurityApplet/getEncode(Ljavacard/framework/APDU;)V;
-			.descriptor	Ljavacard/framework/APDU;	0.10;
-
+		classRef 1.8;		// javacard/security/RSAPrivateKey
 		// 10
-		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
+		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
 		// 11
-		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
+		classRef SCApplet;
 		// 12
-		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		staticMethodRef SCApplet/<init>()V;
 		// 13
-		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
+		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
 		// 14
-		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
+		staticMethodRef SCApplet/encode(Ljavacard/framework/APDU;)V;
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
 		// 15
-		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
+		staticMethodRef SCApplet/getEncode(Ljavacard/framework/APDU;)V;
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
 		// 16
-		classRef Ping;
+		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
 		// 17
-		staticMethodRef Ping/<init>()V;
+		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
 		// 18
-		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
+		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		// 19
+		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
 	}
 
-	.class public JmdsSecurityApplet 0 extends 0.3 {		// extends javacard/framework/Applet
+	.class public SCApplet 0 extends 0.3 {		// extends javacard/framework/Applet
 
 		.fields {
 			private byte[] buffer 0;		// [B
 			private byte[] code 1;		// [B
-			private short messLength 2;		// S
+			private 1.8 userKey 2;		// Ljavacard/security/RSAPrivateKey;
+			private 1.9 serverKey 3;		// Ljavacard/security/RSAPublicKey;
+			private 1.8 sessionKey 4;		// Ljavacard/security/RSAPrivateKey;
+			private short messLength 5;		// S
 			private static final byte CLA_SECURITY = 105;		// B
 			private static final byte CODE = 16;		// B
 			private static final byte GET_CODE = 32;		// B
@@ -87,24 +95,45 @@
 		}
 
 		.method protected <init>()V 0 {
-			.stack 2;
+			.stack 4;
 			.locals 0;
 
 				L0:	aload_0;
-					invokespecial 14;		// javacard/framework/Applet.<init>()V
+					invokespecial 6;		// javacard/framework/Applet.<init>()V
 					aload_0;
 					sspush 255;
 					newarray 11;
-					putfield_a 0;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.buffer
+					putfield_a 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
 					aload_0;
 					sspush 255;
 					newarray 11;
-					putfield_a 1;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.code
+					putfield_a 1;		// reference de/berlios/jmds/applet/SCApplet.code
 					aload_0;
 					sconst_0;
-					putfield_s 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					putfield_s 2;		// short de/berlios/jmds/applet/SCApplet.messLength
 					aload_0;
-					invokevirtual 15;		// javacard/framework/Applet.register()V
+					sconst_5;
+					sspush 512;
+					sconst_1;
+					invokestatic 8;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 9;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
+					putfield_a 3;		// reference de/berlios/jmds/applet/SCApplet.userKey
+					aload_0;
+					sconst_4;
+					sspush 512;
+					sconst_1;
+					invokestatic 8;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 7;		// T_CLASSORINTERFACE javacard/security/RSAPublicKey
+					putfield_a 4;		// reference de/berlios/jmds/applet/SCApplet.serverKey
+					aload_0;
+					sconst_5;
+					sspush 512;
+					sconst_1;
+					invokestatic 8;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 9;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
+					putfield_a 5;		// reference de/berlios/jmds/applet/SCApplet.sessionKey
+					aload_0;
+					invokevirtual 10;		// javacard/framework/Applet.register()V
 					return;
 		}
 
@@ -112,8 +141,8 @@
 			.stack 1;
 			.locals 0;
 
-				L0:	new 5;		// de/berlios/jmds/applet/JmdsSecurityApplet
-					invokespecial 6;		// de/berlios/jmds/applet/JmdsSecurityApplet.<init>()V
+				L0:	new 11;		// de/berlios/jmds/applet/SCApplet
+					invokespecial 12;		// de/berlios/jmds/applet/SCApplet.<init>()V
 					return;
 		}
 
@@ -124,7 +153,7 @@
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
 				L0:	aload_1;
-					invokevirtual 7;		// javacard/framework/APDU.getBuffer()[B
+					invokevirtual 13;		// javacard/framework/APDU.getBuffer()[B
 					astore_2;
 					aload_2;
 					sconst_0;
@@ -137,11 +166,11 @@
 					slookupswitch L5 4 16 L2 32 L3 48 L4 64 L5;
 				L2:	aload_0;
 					aload_1;
-					invokespecial 8;		// de/berlios/jmds/applet/JmdsSecurityApplet.encode(Ljavacard/framework/APDU;)V
+					invokespecial 14;		// de/berlios/jmds/applet/SCApplet.encode(Ljavacard/framework/APDU;)V
 					goto L5;
 				L3:	aload_0;
 					aload_1;
-					invokespecial 9;		// de/berlios/jmds/applet/JmdsSecurityApplet.getEncode(Ljavacard/framework/APDU;)V
+					invokespecial 15;		// de/berlios/jmds/applet/SCApplet.getEncode(Ljavacard/framework/APDU;)V
 					goto L5;
 				L4:	goto L5;
 				L5:	return;
@@ -149,30 +178,33 @@
 
 		.method private encode(Ljavacard/framework/APDU;)V {
 			.stack 5;
-			.locals 1;
+			.locals 2;
 
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
 				L0:	aload_0;
 					aload_1;
-					invokevirtual 10;		// javacard/framework/APDU.setIncomingAndReceive()S
-					putfield_s 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					invokevirtual 16;		// javacard/framework/APDU.setIncomingAndReceive()S
+					putfield_s 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					newarray 11;
+					astore_2;
 					sconst_0;
-					sstore_2;
+					sstore_3;
 					goto L2;
-				L1:	getfield_a_this 1;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.code
-					sload_2;
-					getfield_a_this 0;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.buffer
-					sload_2;
+				L1:	aload_2;
+					sload_3;
+					getfield_a_this 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
+					sload_3;
 					sconst_5;
 					sadd;
 					baload;
 					bspush 16;
 					sand;
 					bastore;
-					sinc 2 1;
-				L2:	sload_2;
-					getfield_s_this 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					sinc 3 1;
+				L2:	sload_3;
+					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
 					if_scmplt L1;
 				L3:	return;
 		}
@@ -184,135 +216,19 @@
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
 				L0:	aload_1;
-					invokevirtual 11;		// javacard/framework/APDU.setOutgoing()S
-					getfield_s_this 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
+					invokevirtual 17;		// javacard/framework/APDU.setOutgoing()S
+					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
 					if_scmpge L2;
 				L1:	sspush 26368;
-					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
+					invokestatic 18;		// javacard/framework/ISOException.throwIt(S)V
 				L2:	aload_1;
-					getfield_a_this 1;		// reference de/berlios/jmds/applet/JmdsSecurityApplet.code
+					getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
 					sconst_0;
-					getfield_s_this 2;		// short de/berlios/jmds/applet/JmdsSecurityApplet.messLength
-					invokevirtual 13;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					invokevirtual 19;		// javacard/framework/APDU.sendBytesLong([BSS)V
 					return;
 		}
 
 	}
 
-	.class public Ping 1 extends 0.3 {		// extends javacard/framework/Applet
-
-		.fields {
-			private byte[] buffer 0;		// [B
-			private byte messLength 1;		// B
-			private static final byte CLA_PING = -128;		// B
-			private static final byte ECHO_REQUEST = 16;		// B
-			private static final byte ECHO_REPLY = 48;		// B
-			private static final short BUFFER_LENGTH = 255;		// S
-		}
-
-		.publicMethodTable 7 {
-			equals(Ljava/lang/Object;)Z;
-			register()V;
-			register([BSB)V;
-			selectingApplet()Z;
-			deselect()V;
-			getShareableInterfaceObject(Ljavacard/framework/AID;B)Ljavacard/framework/Shareable;;
-			select()Z;
-			process(Ljavacard/framework/APDU;)V;
-		}
-
-		.packageMethodTable 0 {
-		}
-
-		.method protected <init>()V 0 {
-			.stack 2;
-			.locals 0;
-
-				L0:	aload_0;
-					invokespecial 14;		// javacard/framework/Applet.<init>()V
-					aload_0;
-					sspush 255;
-					newarray 11;
-					putfield_a 3;		// reference de/berlios/jmds/applet/Ping.buffer
-					aload_0;
-					sconst_0;
-					putfield_b 4;		// byte de/berlios/jmds/applet/Ping.messLength
-					aload_0;
-					invokevirtual 15;		// javacard/framework/Applet.register()V
-					return;
-		}
-
-		.method public static install([BSB)V 1 {
-			.stack 1;
-			.locals 0;
-
-				L0:	new 16;		// de/berlios/jmds/applet/Ping
-					invokespecial 17;		// de/berlios/jmds/applet/Ping.<init>()V
-					return;
-		}
-
-		.method public process(Ljavacard/framework/APDU;)V 7 {
-			.stack 5;
-			.locals 2;
-
-			.descriptor	Ljavacard/framework/APDU;	0.10;
-
-				L0:	aload_1;
-					invokevirtual 7;		// javacard/framework/APDU.getBuffer()[B
-					astore_2;
-					aload_2;
-					sconst_0;
-					baload;
-					bspush -128;
-					if_scmpne L9;
-				L1:	aload_2;
-					sconst_1;
-					baload;
-					slookupswitch L9 2 16 L2 48 L6;
-				L2:	aload_0;
-					aload_1;
-					invokevirtual 10;		// javacard/framework/APDU.setIncomingAndReceive()S
-					s2b;
-					putfield_b 4;		// byte de/berlios/jmds/applet/Ping.messLength
-					sconst_0;
-					sstore_3;
-					goto L4;
-				L3:	getfield_a_this 3;		// reference de/berlios/jmds/applet/Ping.buffer
-					sload_3;
-					aload_2;
-					sconst_5;
-					sload_3;
-					sadd;
-					baload;
-					bastore;
-					sload_3;
-					sconst_1;
-					sadd;
-					s2b;
-					sstore_3;
-				L4:	sload_3;
-					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
-					if_scmplt L3;
-				L5:	goto L9;
-				L6:	aload_1;
-					invokevirtual 11;		// javacard/framework/APDU.setOutgoing()S
-					sstore_3;
-					sload_3;
-					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
-					if_scmpge L8;
-				L7:	sspush 26368;
-					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
-				L8:	aload_1;
-					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
-					invokevirtual 18;		// javacard/framework/APDU.setOutgoingLength(S)V
-					aload_1;
-					getfield_a_this 3;		// reference de/berlios/jmds/applet/Ping.buffer
-					sconst_0;
-					getfield_b_this 4;		// byte de/berlios/jmds/applet/Ping.messLength
-					invokevirtual 13;		// javacard/framework/APDU.sendBytesLong([BSS)V
-				L9:	return;
-		}
-
-	}
-
 }

Modified: trunk/generator/SecurityApplet.pmf
===================================================================
--- trunk/generator/SecurityApplet.pmf	2005-02-24 00:50:21 UTC (rev 33)
+++ trunk/generator/SecurityApplet.pmf	2005-02-24 01:53:54 UTC (rev 34)
@@ -7,5 +7,5 @@
 ClassDir=d:\1G2K - SOPRA\IR3\Corba\jmds\SVN\trunk\classes
 [Applets]
 NumApplets=1
-Applet1=JmdsSecurityApplet.class
+Applet1=SCApplet.class
 Applet1AID=11223344556677

Added: trunk/src/de/berlios/jmds/applet/SCApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/SCApplet.java	2005-02-24 00:50:21 UTC (rev 33)
+++ trunk/src/de/berlios/jmds/applet/SCApplet.java	2005-02-24 01:53:54 UTC (rev 34)
@@ -0,0 +1,111 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.applet;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+import javacard.security.KeyBuilder;
+import javacard.security.RSAPrivateKey;
+import javacard.security.RSAPublicKey;
+//import javacardx.crypto.*;
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class SCApplet extends Applet {
+
+    private final static byte CLA_SECURITY = (byte) 0x69;
+    private final static byte CODE = (byte) 0x10;
+    private final static byte GET_CODE = (byte) 0x20;
+    private final static byte DECODE = (byte) 0x30;
+    private final static byte GET_DECODE = (byte) 0x40;
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte[] code;
+    private short messLength;
+    
+    private RSAPrivateKey userKey;
+    private RSAPublicKey serverKey;
+    private RSAPrivateKey sessionKey;
+    //private Cipher cipher;
+    
+    /**
+     * Constructeur par d?faut
+     */
+    protected SCApplet() {
+        buffer = new byte[BUFFER_LENGTH];
+        code = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        userKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
+        serverKey = (RSAPublicKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PUBLIC, KeyBuilder.LENGTH_RSA_512, true);
+        sessionKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
+        //cipher = Cipher.getInstance(Cipher.ALG_RSA_ISO9796, false);
+        register();
+    }
+
+    /**
+     * @see javacard.framework.Applet#install(byte[], short, byte)
+     */
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new SCApplet();
+    }
+
+    /**
+     * M?thode appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param apdu
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        byte[] buffer = apdu.getBuffer();
+
+        // CLA ? 69
+        if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
+            switch (buffer[ISO7816.OFFSET_INS]) {
+                case CODE:
+                    encode(apdu);
+                    break;
+                
+                case GET_CODE:
+                    getEncode(apdu);
+                    break;
+
+                case DECODE:
+                    break;
+                    
+                case GET_DECODE:
+                    break;
+            }
+        }
+    }
+    
+    private void encode(APDU apdu)
+    {
+        messLength = apdu.setIncomingAndReceive();
+        byte[] requestID = new byte[messLength];
+        for (short i = 0; i < messLength; i++) {
+            requestID[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
+        }
+        //cipher.init(userKey, Cipher.MODE_ENCRYPT);
+    }
+    
+    private void getEncode(APDU apdu)
+    {
+        if(apdu.setOutgoing() < messLength)
+            ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+        
+        apdu.sendBytesLong(code, (short)0, messLength);
+    }
+}



From dbardin at sheep.berlios.de  Thu Feb 24 19:14:31 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Thu, 24 Feb 2005 19:14:31 +0100
Subject: [Jmds-svn] r35 - in trunk: . lib src src/de/berlios/jmds/tools test/de/berlios/jmds test/de/berlios/jmds/tools
Message-ID: <200502241814.j1OIEV0k018719@sheep.berlios.de>

Author: dbardin
Date: 2005-02-24 19:14:30 +0100 (Thu, 24 Feb 2005)
New Revision: 35

Added:
   trunk/lib/commons-collections-3.1.jar
   trunk/lib/commons-configuration-1.1RC1.jar
   trunk/lib/commons-logging-1.0.4.jar
   trunk/src/saveRights.xml
   trunk/test/de/berlios/jmds/tools/
   trunk/test/de/berlios/jmds/tools/RightsConfigurationTest.java
   trunk/test/de/berlios/jmds/tools/SecurityConfigurationTest.java
Removed:
   trunk/lib/commons-configuration-1.0.jar
Modified:
   trunk/.classpath
   trunk/src/de/berlios/jmds/tools/RightsConfiguration.java
   trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java
   trunk/src/rights.xml
   trunk/src/security.xml
Log:
Implantation des objets permettant la recuperation et la sauvegardes des informations des fichiers de conf (.xml) + la javadoc est faite ca devrait vous aider... alle a l IPV6 now

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/.classpath	2005-02-24 18:14:30 UTC (rev 35)
@@ -6,7 +6,9 @@
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
 	<classpathentry kind="lib" path="lib/slbJIop.jar"/>
-	<classpathentry kind="lib" path="lib/commons-configuration-1.0.jar"/>
-	<classpathentry kind="lib" path="lib/commons-lang-2.0.jar"/>	
+	<classpathentry kind="lib" path="lib/commons-lang-2.0.jar"/>
+	<classpathentry kind="lib" path="lib/commons-collections-3.1.jar"/>
+	<classpathentry kind="lib" path="lib/commons-logging-1.0.4.jar"/>
+	<classpathentry kind="lib" path="lib/commons-configuration-1.1RC1.jar"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Added: trunk/lib/commons-collections-3.1.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/commons-collections-3.1.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Deleted: trunk/lib/commons-configuration-1.0.jar
===================================================================
(Binary files differ)

Added: trunk/lib/commons-configuration-1.1RC1.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/commons-configuration-1.1RC1.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/lib/commons-logging-1.0.4.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/commons-logging-1.0.4.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/de/berlios/jmds/tools/RightsConfiguration.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/RightsConfiguration.java	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/src/de/berlios/jmds/tools/RightsConfiguration.java	2005-02-24 18:14:30 UTC (rev 35)
@@ -9,6 +9,9 @@
  */
 package de.berlios.jmds.tools;
 
+import java.io.File;
+import java.util.Iterator;
+
 import org.apache.commons.configuration.ConfigurationException;
 import org.apache.commons.configuration.XMLConfiguration;
 
@@ -21,7 +24,7 @@
 	private XMLConfiguration rightsConfig = null;
 	
 	/** The rigths config file **/
-	private static final String RIGHTS_FILE = "rights.xml";
+	private static final File RIGHTS_FILE = new File("rights.xml");
 	
 	/** The singleton instance * */
 	private static RightsConfiguration INSTANCE = null;
@@ -38,8 +41,9 @@
 	{
 		try
 		{
-			XMLConfiguration.setDelimiter('\n');
-			this.rightsConfig = new XMLConfiguration (RIGHTS_FILE);				
+			rightsConfig = new XMLConfiguration ();
+			rightsConfig.setFile(RIGHTS_FILE);
+			rightsConfig.load();
 		}
 		catch (ConfigurationException e)
 		{
@@ -66,29 +70,83 @@
 	}
 	
 	/**
-	 * @param iClientId 	the identifiant of client
 	 * @param szGroup		the group of client
+	 * @param szIOR			the object reference
 	 * @param szFonction	the fonction
 	 * @return 				the permission of access (true or false)
 	 */
-	public boolean checkFonctionClientAccess(int iClientId, String szGroup, String szFonction)
+	public boolean checkFonctionGroupAccess(String szGroup, String szIOR, String szFonction)
 	{
-		//TODO
+		System.out.println("Recherche des groups ayant acces");
+		int i = 0;
+		int iIOR = -1;
+		int iFonction = -1;
+		
+		// Recherche de l'objet dans le fichier de conf
+		System.out.println("Recherche de l'objet");
+		iIOR = getIORIndex(szIOR);
+		
+		// Si l'objet a ete trouve alors recherche de la fonction
+		if (iIOR != -1){
+			System.out.println("Recherche e la fonction");
+			iFonction = getFonctionIndex(iIOR, szFonction);
+		}
+		
+		// si la fonction de l'objet a ete trouve alors recuperation de group y ayant access
+		if (iFonction != -1){
+			System.out.println("Recherche du group");
+			int iGroup = getGroupIndex(iIOR, iFonction, szGroup);
+			if (iGroup !=-1)
+				return true;			
+		}
+		
+		// Si la l objet ou la fonction de l'objet n ont pas ete trouves
 		return false;
 	}
 	
 	/**
 	 * @param szIOR			the ior reference of object
-	 * @param szFonction	the the fonction of objetc
+	 * @param szFonction	the the fonction of object
 	 * @return				the add status (true validate add and false indicate the fonction exist)
 	 */
 	public boolean addIORFonction (String szIOR, String szFonction)
 	{
-		//TODO
-		return false;
+		addIOR(szIOR);
+		
+		int iIOR = getIORIndex(szIOR);
+		int iFonction = getFonctionIndex(iIOR, szFonction);
+			
+		if (iFonction !=- 1) 	// si la fonction existe
+			return false ;
+		else					// si la fonction n existe pas on l ajoute
+		{
+			int iAddFonction = countFonction(iIOR)+1;
+			rightsConfig.addProperty("ior("+ iIOR+ ").fonction("+ iAddFonction+ ")[@id]", szFonction);
+		}
+		
+		return true;
 	}
 	
 	/**
+	 * @param szIOR			the ior reference of object
+	 * @return				the add status (true validate add and false indicate the fonction exist)
+	 */
+	public boolean addIOR (String szIOR)
+	{
+		int iIOR = getIORIndex(szIOR);
+		
+		if (iIOR !=-1) // Si l'objet existe dans le fichier de conf
+			return false ;
+		else // si l'objet n'existe pas on l'ajoute
+		{
+			int iAddIOR = countIOR()+1;
+			rightsConfig.addProperty("ior("+ iAddIOR +")[@id]", szIOR);
+			
+		}
+		return true;
+	}
+	
+	/**
 	 * To save the configuration file
 	 *
 	 */
@@ -96,11 +154,86 @@
 	{
 		try
 		{
-			rightsConfig.save ();
+			// TODO enregistrement dans le meme fichier rights.xml apres les tests
+			rightsConfig.save("src/saveRights.xml");
 		}
 		catch (ConfigurationException e)
 		{
 			e.printStackTrace();
 		}
 	}
+
+	//----------------------------------------------------------//
+	//------------------- PRIVATE METHODS -----------------------//
+	//----------------------------------------------------------//	
+	
+	/**
+	 * @param szIOR the object reference
+	 * @return		the objet index in hierachie
+	 */
+	private int getIORIndex(String szIOR) {
+		int i = 0;
+		Iterator iter = rightsConfig.getList("ior[@id]").iterator();
+		while(iter.hasNext()){
+			String iorId = (String) iter.next();
+			System.out.println(iorId);
+			if (iorId.compareTo(szIOR)==0)
+				return i;
+			i++;
+		}
+		return -1;
+	}
+	
+	/**
+	 * @param iIOR			the object index
+	 * @param szFonction	the fonction of object
+	 * @return				the fonction index in hierachie
+	 */
+	private int getFonctionIndex(int iIOR, String szFonction) {
+		int i = 0;
+		Iterator iter = rightsConfig.getList("ior("+ iIOR+ ").fonction[@id]").iterator();
+		i = 0;
+		while(iter.hasNext()){
+			String fonctionId = (String) iter.next();
+			System.out.println(fonctionId);
+			if (fonctionId.compareTo(szFonction)==0)
+				return i;
+			i++;
+		}
+		return -1;
+	}
+	
+	/**
+	 * @param iIOR			the object index
+	 * @param iFonction		the fonction index
+	 * @param szGroup		the group which have access to the fonction
+	 * @return				the group index in hierachie 
+	 */
+	private int getGroupIndex(int iIOR, int iFonction, String szGroup) {
+		int i = 0;
+		Iterator iter = rightsConfig.getList("ior("+ iIOR+ ").fonction("+ iFonction+ ").group[@id]").iterator();
+		while(iter.hasNext()){
+			String groupId = (String) iter.next();
+			System.out.println(groupId);
+			if (groupId.compareTo(szGroup)==0)
+				return i;
+			i++;
+		}
+		return -1;
+	}
+	
+	/**
+	 * @return the number of object
+	 */
+	private int countIOR() {
+		return rightsConfig.getList("ior[@id]").size();
+	}
+	
+	/**
+	 * @param iIOR	the object reference
+	 * @return		the number of fonction
+	 */
+	private int countFonction(int iIOR) {
+		return rightsConfig.getList("ior("+ iIOR+ ").fonction[@id]").size();
+	}
 }

Modified: trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/src/de/berlios/jmds/tools/SecurityConfiguration.java	2005-02-24 18:14:30 UTC (rev 35)
@@ -9,6 +9,8 @@
  */
 package de.berlios.jmds.tools;
 
+import java.util.Iterator;
+
 import org.apache.commons.configuration.ConfigurationException;
 import org.apache.commons.configuration.XMLConfiguration;
 
@@ -38,8 +40,9 @@
 	{
 		try
 		{
-			XMLConfiguration.setDelimiter('\n');
-			this.securityConfig = new XMLConfiguration (SECURITY_FILE);
+			securityConfig = new XMLConfiguration ();
+			securityConfig.setFileName(SECURITY_FILE);
+			securityConfig.load();
 		}
 		catch (ConfigurationException e)
 		{
@@ -68,29 +71,44 @@
 	/**
 	 * @return the server key
 	 */
-	public byte[] getServerKey()
+	public String getServerKey()
 	{
-		// TODO
-		return null;	
+		return securityConfig.getString("server[@key]");	
 	}
 	
 	/**
-	 * @param iClientId the client identifiant
+	 * @param szClientId the client identifiant
 	 * @return			the client key
 	 */
-	public byte[] getClientKey (int iClientId)
+	public String getClientKey (String szClientId)
 	{
-		//TODO
-		return null;		
+		return getAttributByClientId (szClientId, "key");		
 	}
 	
 	/**
-	 * @param iClientId the client identifiant
-	 * @return			the group client
+	 * @param szClientId 	the client identifiant
+	 * @return				the group client
 	 */
-	public byte[] getclientGroup (int iClientId)
+	public String getclientGroup (String szClientId)
 	{
-		// TODO
-		return null;		
+		return getAttributByClientId (szClientId, "group");	
 	}
+	
+	/**
+	 * @param szClientId  	the client identifiant
+	 * @param szAttribute 	the attribute search
+	 * @return				the  search attribute value
+	 */
+	private String getAttributByClientId (String szClientId, String szAttribute){				
+		Iterator iter = securityConfig.getList("clients.client[@id]").iterator();
+		int i = 0;
+		while(iter.hasNext()){
+			String id = (String) iter.next();
+			if (id.compareTo(szClientId)==0)
+				return securityConfig.getString("clients.client("+i+")[@"+szAttribute+"]");;
+			i++;
+		}
+		System.out.println(szClientId);
+		return null;
+	}
 }

Modified: trunk/src/rights.xml
===================================================================
--- trunk/src/rights.xml	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/src/rights.xml	2005-02-24 18:14:30 UTC (rev 35)
@@ -1,25 +1,25 @@
 <?xml version="1.0" encoding="ISO-8859-1" ?>
-
 <jmds>
-	<ior id = "ior_1">
-         <fonction id = "fct_1">
-         	<group id = "grp_1"/>
-         	<group id = "grp_2"/>
-         </fonction>
-         <fonction id = "fct_2">
-         	<group id = "grp_1"/>
-         </fonction>
-         <fonction id = "fct_3">
-         	<group id = "grp_2"/>
-         </fonction>
-         <fonction id = "fct_4"/>
-     <ior id = "ior_2">
-     	<fonction id = "fct_1">
-         	<group id = "grp_1"/>
-         </fonction>
-         <fonction id = "fct_2">
-         	<group id = "grp_2"/>
-         </fonction>
-         <fonction id = "fct_3"/>
+	<ior id="ior_1">
+		<fonction id="fct_1">
+			<group id="grp_1"/>
+			<group id="grp_2"/>
+		</fonction>
+		<fonction id="fct_2">
+			<group id="grp_1"/>
+		</fonction>
+		<fonction id="fct_3">
+			<group id="grp_2"/>
+		</fonction>
+		<fonction id="fct_4"/>
 	</ior>
-</jmds>
+	<ior id="ior_2">
+		<fonction id="fct_1">
+			<group id="grp_1"/>
+		</fonction>
+		<fonction id="fct_2">
+			<group id="grp_2"/>
+		</fonction>
+		<fonction id="fct_3"/>
+	</ior>
+</jmds>
\ No newline at end of file

Added: trunk/src/saveRights.xml
===================================================================
--- trunk/src/saveRights.xml	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/src/saveRights.xml	2005-02-24 18:14:30 UTC (rev 35)
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jmds>
+	<ior id="ior_1">
+		<fonction id="fct_1">
+			<group id="grp_1"/>
+			<group id="grp_2"/>
+		</fonction>
+		<fonction id="fct_2">
+			<group id="grp_1"/>
+		</fonction>
+		<fonction id="fct_3">
+			<group id="grp_2"/>
+		</fonction>
+		<fonction id="fct_4"/>
+	<fonction id="fct_99"/>
+</ior>
+	<ior id="ior_2">
+		<fonction id="fct_1">
+			<group id="grp_1"/>
+		</fonction>
+		<fonction id="fct_2">
+			<group id="grp_2"/>
+		</fonction>
+		<fonction id="fct_3"/>
+	</ior>
+<ior id="ior_99">
+<fonction id="fct_99"/>
+</ior>
+</jmds>

Modified: trunk/src/security.xml
===================================================================
--- trunk/src/security.xml	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/src/security.xml	2005-02-24 18:14:30 UTC (rev 35)
@@ -1,10 +1,11 @@
 <?xml version="1.0" encoding="ISO-8859-1" ?>
 
 <jmds>
-   <server key = "serverKey" />
+	test
+   <server key="0123456789"/>
    <clients>
-      <client id = "id1" key = "clinetKey1" groupe = "grp_1"/>
-      <client id = "id2" key = "clinetKey2" groupe = "grp_2"/>
-      <client id = "id3" key = "clinetKey3" groupe = "grp_1"/>
-   </ clients >
+      <client id="1" key="1111111111" group="grp_1"/>
+      <client id="2" key="2222222222" group="grp_2"/>
+      <client id="3" key="3333333333" group="grp_1"/>
+   </clients >
 </jmds>

Added: trunk/test/de/berlios/jmds/tools/RightsConfigurationTest.java
===================================================================
--- trunk/test/de/berlios/jmds/tools/RightsConfigurationTest.java	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/test/de/berlios/jmds/tools/RightsConfigurationTest.java	2005-02-24 18:14:30 UTC (rev 35)
@@ -0,0 +1,30 @@
+/*
+ * Created on 24 f?vr. 2005
+ *
+ * TODO To change the template for this generated file go to
+ * Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.tools;
+
+/**
+ * @author Denis
+ *
+ * TODO To change the template for this generated type comment go to
+ * Window - Preferences - Java - Code Style - Code Templates
+ */
+public class RightsConfigurationTest {
+
+	/**
+	 * @param args
+	 */
+	public static void main(String[] args) {
+		RightsConfiguration rightsConf = RightsConfiguration.getInstance();
+		
+		System.out.println("Access client : " + rightsConf.checkFonctionGroupAccess("grp_2", "ior_2", "fct_2"));
+
+		System.out.println("Ajout methode : " + rightsConf.addIORFonction("ior_99", "fct_99"));
+		System.out.println("Ajout methode : " + rightsConf.addIORFonction("ior_1", "fct_99"));
+		System.out.println("Ajout methode : " + rightsConf.addIORFonction("ior_1", "fct_1"));
+		rightsConf.save(); // sauvegarde dans le fichier saveRights.xml du repertoire src
+	}
+}

Added: trunk/test/de/berlios/jmds/tools/SecurityConfigurationTest.java
===================================================================
--- trunk/test/de/berlios/jmds/tools/SecurityConfigurationTest.java	2005-02-24 01:53:54 UTC (rev 34)
+++ trunk/test/de/berlios/jmds/tools/SecurityConfigurationTest.java	2005-02-24 18:14:30 UTC (rev 35)
@@ -0,0 +1,27 @@
+/*
+ * Created on 24 f?vr. 2005
+ *
+ * TODO To change the template for this generated file go to
+ * Window - Preferences - Java - Code Style - Code Templates
+ */
+package de.berlios.jmds.tools;
+
+/**
+ * @author Denis
+ *
+ * TODO To change the template for this generated type comment go to
+ * Window - Preferences - Java - Code Style - Code Templates
+ */
+public class SecurityConfigurationTest {
+
+	/**
+	 * @param args
+	 */
+	public static void main(String[] args) {
+		SecurityConfiguration securityConf = SecurityConfiguration.getInstance();
+		
+		System.out.println("Key server : " + securityConf.getServerKey());
+		System.out.println("Key client 2 : " + securityConf.getClientKey("2"));
+		System.out.println("Key groupe client 1 : " + securityConf.getclientGroup("1"));
+	}
+}



From denis.bardin at tiscali.fr  Thu Feb 24 19:48:27 2005
From: denis.bardin at tiscali.fr (bardin)
Date: Thu, 24 Feb 2005 19:48:27 +0100
Subject: [Jmds-svn] JMDS : DEV
Message-ID: <20050224184742.33EBA29B7F3@postfix4-1.free.fr>

Ouep les gros !!!!

 

COMMENT CA SE FAIT QUE JE NE VOIS AUCUN COMMIT ?!?

 

Je ne sais pas si vous ?tes au courant mais normalement on devait avoir une
version beta pour demain en CORBA
.

J?ai l?impression que vous l?avez oubli? et ?a commence ? presser !!!

 

Alors les gros il va falloir se mettre au boulot car j?ai pas envie de me
prendre la t?te la semaine prochaine
 elle sera d?j? assez bien charg? comme
cela. En plus, moi ce WE je ne serait pas dispo donc ?a va ?tre la looz si
rien n?a avanc? avant demain.

 

Moi j?ai avanc? ma partie
 J?ai cr?? deux objets qui r?cup?rent la
configuration contenue dans les fichiers Security.xml et Rights.xml.

 

-  SecurityConfiguration permet la r?cup?ration des informations de
configuration (une m?thode pour chaque info : key serveur, key client et
group client).

 

-  RightsConfiguration permet :            - de valider les droits d?acc?s a
un group sur un fonction d?un objet (boolean checkFonctionGroupAccess(String
szGroup, String szIOR, String szFonction))

                                                           - d?ajouter un
objet ? la configuration (boolean addIOR (String szIOR)) pour les objets
sans methodes
 pas souvent je pense ;o)

                                                           - d?ajouter un
fonction ? un objet (boolean addIORFonction (String szIOR, String
szFonction). Notons que si l?objet n?existe pas dans la conf il est cr??

                                                           - de sauvegarder
la configuration lorsque des m?thodes ou objets ont ?t? ajout?s

 

Gros Math appuie toi sur l?objet RightsConfiguration pour stocker le listage
des objet et m?thode que tu auras faite sur le serveur

 

Gros Seb, tu verras j?ai d?j? cr?e l?objet SCAppletClient faisant le lien
entre l?intercepteur client et la carte. J?y est ajout? les fonctions dont
on avait parl? la derni?re fois mais elle ne sont pas implant?es.

 

Donc voila rien de plus
.

 

A vos clavier les gros et bonne soir?e!!!!!

 

Denis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/jmds-svn/attachments/20050224/489db52f/attachment.html>

From jguers at sheep.berlios.de  Fri Feb 25 01:04:50 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Fri, 25 Feb 2005 01:04:50 +0100
Subject: [Jmds-svn] r36 - in trunk: applet/de/berlios/jmds/applet/javacard src/de/berlios/jmds/applet test/de/berlios/jmds test/de/berlios/jmds/applet
Message-ID: <200502250004.j1P04oSb008344@sheep.berlios.de>

Author: jguers
Date: 2005-02-25 01:04:28 +0100 (Fri, 25 Feb 2005)
New Revision: 36

Added:
   trunk/test/de/berlios/jmds/applet/
   trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java
   trunk/test/de/berlios/jmds/clients/
Removed:
   trunk/test/de/berlios/jmds/test/
Modified:
   trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
   trunk/src/de/berlios/jmds/applet/SCApplet.java
Log:
La defaite : la communication avec la carte ne marche plus ?? J'abandonne pour ce soir

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
===================================================================
--- trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-24 18:14:30 UTC (rev 35)
+++ trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-25 00:04:28 UTC (rev 36)
@@ -1,5 +1,5 @@
 // converted by version 1.3
-// on Thu Feb 24 02:52:16 CET 2005
+// on Fri Feb 25 01:00:12 CET 2005
 
 .package de/berlios/jmds/applet {
 	.aid 0x11:0x22:0x33:0x44:0x55:0x66;
@@ -20,52 +20,243 @@
 		// 1
 		instanceFieldRef byte[] SCApplet/code;
 		// 2
-		instanceFieldRef short SCApplet/messLength;
+		instanceFieldRef 1.14 SCApplet/randomer;
 		// 3
-		instanceFieldRef 1.8 SCApplet/userKey;
+		instanceFieldRef byte SCApplet/key;
 		// 4
-		instanceFieldRef 1.9 SCApplet/serverKey;
+		instanceFieldRef byte[] SCAppletWithKey/buffer;
 		// 5
-		instanceFieldRef 1.8 SCApplet/sessionKey;
+		instanceFieldRef byte[] SCAppletWithKey/code;
 		// 6
-		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
+		instanceFieldRef short SCAppletWithKey/messLength;
 		// 7
-		classRef 1.9;		// javacard/security/RSAPublicKey
+		instanceFieldRef 1.8 SCAppletWithKey/userKey;
 		// 8
-		staticMethodRef 1.13.0(BSZ)Ljavacard/security/Key;;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
-			.descriptor	Ljavacard/security/Key;	1.0;
-
+		instanceFieldRef 1.9 SCAppletWithKey/serverKey;
 		// 9
-		classRef 1.8;		// javacard/security/RSAPrivateKey
+		instanceFieldRef 1.8 SCAppletWithKey/sessionKey;
 		// 10
-		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
-		// 11
-		classRef SCApplet;
-		// 12
-		staticMethodRef SCApplet/<init>()V;
-		// 13
-		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
-		// 14
 		staticMethodRef SCApplet/encode(Ljavacard/framework/APDU;)V;
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
-		// 15
+		// 11
 		staticMethodRef SCApplet/getEncode(Ljavacard/framework/APDU;)V;
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
+		// 12
+		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		// 13
+		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
+		// 14
+		virtualMethodRef 1.14.1([BSS)V;		// javacard/security/RandomData.generateData([BSS)V
+		// 15
+		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
 		// 16
-		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
+		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
 		// 17
-		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
+		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
 		// 18
-		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
 		// 19
-		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
+		staticMethodRef 1.14.0(B)Ljavacard/security/RandomData;;		// javacard/security/RandomData.getInstance(B)Ljavacard/security/RandomData;
+			.descriptor	Ljavacard/security/RandomData;	1.14;
+
+		// 20
+		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
+		// 21
+		staticMethodRef 1.13.0(BSZ)Ljavacard/security/Key;;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+			.descriptor	Ljavacard/security/Key;	1.0;
+
+		// 22
+		classRef 1.8;		// javacard/security/RSAPrivateKey
+		// 23
+		classRef SCAppletWithKey;
+		// 24
+		classRef 1.9;		// javacard/security/RSAPublicKey
+		// 25
+		staticMethodRef SCAppletWithKey/<init>()V;
+		// 26
+		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
+		// 27
+		classRef SCApplet;
+		// 28
+		staticMethodRef SCApplet/<init>()V;
+		// 29
+		staticMethodRef SCAppletWithKey/encode(Ljavacard/framework/APDU;)V;
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+		// 30
+		staticMethodRef SCAppletWithKey/getEncode(Ljavacard/framework/APDU;)V;
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
 	}
 
 	.class public SCApplet 0 extends 0.3 {		// extends javacard/framework/Applet
 
 		.fields {
+			private final 1.14 randomer 0;		// Ljavacard/security/RandomData;
+			private byte[] buffer 1;		// [B
+			private byte[] code 2;		// [B
+			private byte key 3;		// B
+			private static final byte CLA_SECURITY = 105;		// B
+			private static final byte INS_CODE = 16;		// B
+			private static final byte INS_GET_CODE = 17;		// B
+			private static final byte INS_DECODE = 48;		// B
+			private static final byte INS_GET_DECODE = 51;		// B
+			private static final byte INS_SET_USER_KEY = 119;		// B
+			private static final short BUFFER_LENGTH = 32;		// S
+		}
+
+		.publicMethodTable 7 {
+			equals(Ljava/lang/Object;)Z;
+			register()V;
+			register([BSB)V;
+			selectingApplet()Z;
+			deselect()V;
+			getShareableInterfaceObject(Ljavacard/framework/AID;B)Ljavacard/framework/Shareable;;
+			select()Z;
+			process(Ljavacard/framework/APDU;)V;
+		}
+
+		.packageMethodTable 0 {
+		}
+
+		.method protected <init>()V 0 {
+			.stack 2;
+			.locals 0;
+
+				L0:	aload_0;
+					invokespecial 18;		// javacard/framework/Applet.<init>()V
+					aload_0;
+					bspush 32;
+					newarray 11;
+					putfield_a 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
+					aload_0;
+					bspush 32;
+					newarray 11;
+					putfield_a 1;		// reference de/berlios/jmds/applet/SCApplet.code
+					aload_0;
+					sconst_2;
+					invokestatic 19;		// javacard/security/RandomData.getInstance(B)Ljavacard/security/RandomData;
+					putfield_a 2;		// reference de/berlios/jmds/applet/SCApplet.randomer
+					aload_0;
+					sconst_0;
+					putfield_b 3;		// byte de/berlios/jmds/applet/SCApplet.key
+					aload_0;
+					invokevirtual 20;		// javacard/framework/Applet.register()V
+					return;
+		}
+
+		.method public static install([BSB)V 1 {
+			.stack 1;
+			.locals 0;
+
+				L0:	new 23;		// de/berlios/jmds/applet/SCAppletWithKey
+					invokespecial 25;		// de/berlios/jmds/applet/SCAppletWithKey.<init>()V
+					return;
+		}
+
+		.method public process(Ljavacard/framework/APDU;)V 7 {
+			.stack 2;
+			.locals 1;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 26;		// javacard/framework/APDU.getBuffer()[B
+					astore_2;
+					aload_2;
+					sconst_0;
+					baload;
+					bspush 105;
+					if_scmpne L8;
+				L1:	aload_2;
+					sconst_1;
+					baload;
+					slookupswitch L7 5 16 L2 17 L3 48 L4 51 L5 119 L6;
+				L2:	aload_0;
+					aload_1;
+					invokespecial 10;		// de/berlios/jmds/applet/SCApplet.encode(Ljavacard/framework/APDU;)V
+					goto L9;
+				L3:	aload_0;
+					aload_1;
+					invokespecial 11;		// de/berlios/jmds/applet/SCApplet.getEncode(Ljavacard/framework/APDU;)V
+					goto L9;
+				L4:	goto L9;
+				L5:	goto L9;
+				L6:	goto L9;
+				L7:	sspush 27904;
+					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
+					goto L9;
+				L8:	sspush 28160;
+					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
+				L9:	return;
+		}
+
+		.method private encode(Ljavacard/framework/APDU;)V {
+			.stack 5;
+			.locals 2;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 13;		// javacard/framework/APDU.setIncomingAndReceive()S
+					sstore_2;
+					getfield_a_this 2;		// reference de/berlios/jmds/applet/SCApplet.randomer
+					getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
+					sconst_0;
+					bspush 32;
+					invokevirtual 14;		// javacard/security/RandomData.generateData([BSS)V
+					sconst_0;
+					sstore_3;
+					goto L2;
+				L1:	getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
+					sload_3;
+					getfield_b_this 3;		// byte de/berlios/jmds/applet/SCApplet.key
+					sadd;
+					getfield_a_this 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
+					sload_3;
+					sconst_5;
+					sadd;
+					baload;
+					bastore;
+					sinc 3 1;
+				L2:	sload_3;
+					sload_2;
+					if_scmplt L1;
+				L3:	return;
+		}
+
+		.method private getEncode(Ljavacard/framework/APDU;)V {
+			.stack 4;
+			.locals 1;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 15;		// javacard/framework/APDU.setOutgoing()S
+					sstore_2;
+					sload_2;
+					bspush 32;
+					if_scmpge L2;
+				L1:	sspush 26368;
+					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
+				L2:	aload_1;
+					bspush 32;
+					invokevirtual 16;		// javacard/framework/APDU.setOutgoingLength(S)V
+					aload_1;
+					getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
+					sconst_0;
+					bspush 32;
+					invokevirtual 17;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					return;
+		}
+
+	}
+
+	.class public SCAppletWithKey 1 extends 0.3 {		// extends javacard/framework/Applet
+
+		.fields {
 			private byte[] buffer 0;		// [B
 			private byte[] code 1;		// [B
 			private 1.8 userKey 2;		// Ljavacard/security/RSAPrivateKey;
@@ -99,41 +290,41 @@
 			.locals 0;
 
 				L0:	aload_0;
-					invokespecial 6;		// javacard/framework/Applet.<init>()V
+					invokespecial 18;		// javacard/framework/Applet.<init>()V
 					aload_0;
 					sspush 255;
 					newarray 11;
-					putfield_a 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
+					putfield_a 4;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
 					aload_0;
 					sspush 255;
 					newarray 11;
-					putfield_a 1;		// reference de/berlios/jmds/applet/SCApplet.code
+					putfield_a 5;		// reference de/berlios/jmds/applet/SCAppletWithKey.code
 					aload_0;
 					sconst_0;
-					putfield_s 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					putfield_s 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
 					aload_0;
 					sconst_5;
 					sspush 512;
 					sconst_1;
-					invokestatic 8;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
-					checkcast 0 9;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
-					putfield_a 3;		// reference de/berlios/jmds/applet/SCApplet.userKey
+					invokestatic 21;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 22;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
+					putfield_a 7;		// reference de/berlios/jmds/applet/SCAppletWithKey.userKey
 					aload_0;
 					sconst_4;
 					sspush 512;
 					sconst_1;
-					invokestatic 8;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
-					checkcast 0 7;		// T_CLASSORINTERFACE javacard/security/RSAPublicKey
-					putfield_a 4;		// reference de/berlios/jmds/applet/SCApplet.serverKey
+					invokestatic 21;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 24;		// T_CLASSORINTERFACE javacard/security/RSAPublicKey
+					putfield_a 8;		// reference de/berlios/jmds/applet/SCAppletWithKey.serverKey
 					aload_0;
 					sconst_5;
 					sspush 512;
 					sconst_1;
-					invokestatic 8;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
-					checkcast 0 9;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
-					putfield_a 5;		// reference de/berlios/jmds/applet/SCApplet.sessionKey
+					invokestatic 21;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 22;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
+					putfield_a 9;		// reference de/berlios/jmds/applet/SCAppletWithKey.sessionKey
 					aload_0;
-					invokevirtual 10;		// javacard/framework/Applet.register()V
+					invokevirtual 20;		// javacard/framework/Applet.register()V
 					return;
 		}
 
@@ -141,8 +332,8 @@
 			.stack 1;
 			.locals 0;
 
-				L0:	new 11;		// de/berlios/jmds/applet/SCApplet
-					invokespecial 12;		// de/berlios/jmds/applet/SCApplet.<init>()V
+				L0:	new 27;		// de/berlios/jmds/applet/SCApplet
+					invokespecial 28;		// de/berlios/jmds/applet/SCApplet.<init>()V
 					return;
 		}
 
@@ -153,7 +344,7 @@
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
 				L0:	aload_1;
-					invokevirtual 13;		// javacard/framework/APDU.getBuffer()[B
+					invokevirtual 26;		// javacard/framework/APDU.getBuffer()[B
 					astore_2;
 					aload_2;
 					sconst_0;
@@ -166,11 +357,11 @@
 					slookupswitch L5 4 16 L2 32 L3 48 L4 64 L5;
 				L2:	aload_0;
 					aload_1;
-					invokespecial 14;		// de/berlios/jmds/applet/SCApplet.encode(Ljavacard/framework/APDU;)V
+					invokespecial 29;		// de/berlios/jmds/applet/SCAppletWithKey.encode(Ljavacard/framework/APDU;)V
 					goto L5;
 				L3:	aload_0;
 					aload_1;
-					invokespecial 15;		// de/berlios/jmds/applet/SCApplet.getEncode(Ljavacard/framework/APDU;)V
+					invokespecial 30;		// de/berlios/jmds/applet/SCAppletWithKey.getEncode(Ljavacard/framework/APDU;)V
 					goto L5;
 				L4:	goto L5;
 				L5:	return;
@@ -184,9 +375,9 @@
 
 				L0:	aload_0;
 					aload_1;
-					invokevirtual 16;		// javacard/framework/APDU.setIncomingAndReceive()S
-					putfield_s 2;		// short de/berlios/jmds/applet/SCApplet.messLength
-					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					invokevirtual 13;		// javacard/framework/APDU.setIncomingAndReceive()S
+					putfield_s 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
+					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
 					newarray 11;
 					astore_2;
 					sconst_0;
@@ -194,7 +385,7 @@
 					goto L2;
 				L1:	aload_2;
 					sload_3;
-					getfield_a_this 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
+					getfield_a_this 4;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
 					sload_3;
 					sconst_5;
 					sadd;
@@ -204,7 +395,7 @@
 					bastore;
 					sinc 3 1;
 				L2:	sload_3;
-					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
 					if_scmplt L1;
 				L3:	return;
 		}
@@ -216,16 +407,16 @@
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
 				L0:	aload_1;
-					invokevirtual 17;		// javacard/framework/APDU.setOutgoing()S
-					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
+					invokevirtual 15;		// javacard/framework/APDU.setOutgoing()S
+					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
 					if_scmpge L2;
 				L1:	sspush 26368;
-					invokestatic 18;		// javacard/framework/ISOException.throwIt(S)V
+					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
 				L2:	aload_1;
-					getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
+					getfield_a_this 5;		// reference de/berlios/jmds/applet/SCAppletWithKey.code
 					sconst_0;
-					getfield_s_this 2;		// short de/berlios/jmds/applet/SCApplet.messLength
-					invokevirtual 19;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
+					invokevirtual 17;		// javacard/framework/APDU.sendBytesLong([BSS)V
 					return;
 		}
 

Modified: trunk/src/de/berlios/jmds/applet/SCApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/SCApplet.java	2005-02-24 18:14:30 UTC (rev 35)
+++ trunk/src/de/berlios/jmds/applet/SCApplet.java	2005-02-25 00:04:28 UTC (rev 36)
@@ -9,10 +9,7 @@
 import javacard.framework.Applet;
 import javacard.framework.ISOException;
 import javacard.framework.ISO7816;
-import javacard.security.KeyBuilder;
-import javacard.security.RSAPrivateKey;
-import javacard.security.RSAPublicKey;
-//import javacardx.crypto.*;
+import javacard.security.RandomData;
 
 /**
  * DOCME
@@ -24,32 +21,30 @@
 public class SCApplet extends Applet {
 
     private final static byte CLA_SECURITY = (byte) 0x69;
-    private final static byte CODE = (byte) 0x10;
-    private final static byte GET_CODE = (byte) 0x20;
-    private final static byte DECODE = (byte) 0x30;
-    private final static byte GET_DECODE = (byte) 0x40;
-    private final static short BUFFER_LENGTH = (short) 255;
+    
+    private final static byte INS_CODE = (byte) 0x10;
+    private final static byte INS_GET_CODE = (byte) 0x11;
+    private final static byte INS_DECODE = (byte) 0x30;
+    private final static byte INS_GET_DECODE = (byte) 0x33;
+    private final static byte INS_SET_USER_KEY = (byte) 0x77;
+    
+    private final static short BUFFER_LENGTH = (short) 0x20;
 
+    private final RandomData randomer;
+    
     private byte[] buffer;
     private byte[] code;
-    private short messLength;
+    private byte key;
+
     
-    private RSAPrivateKey userKey;
-    private RSAPublicKey serverKey;
-    private RSAPrivateKey sessionKey;
-    //private Cipher cipher;
-    
     /**
      * Constructeur par d?faut
      */
     protected SCApplet() {
         buffer = new byte[BUFFER_LENGTH];
         code = new byte[BUFFER_LENGTH];
-        messLength = (byte) 0;
-        userKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
-        serverKey = (RSAPublicKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PUBLIC, KeyBuilder.LENGTH_RSA_512, true);
-        sessionKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
-        //cipher = Cipher.getInstance(Cipher.ALG_RSA_ISO9796, false);
+        randomer = RandomData.getInstance(RandomData.ALG_SECURE_RANDOM);
+        key = (byte)0;
         register();
     }
 
@@ -57,7 +52,7 @@
      * @see javacard.framework.Applet#install(byte[], short, byte)
      */
     public static void install(byte[] bArray, short bOffset, byte bLength) {
-        new SCApplet();
+        new SCAppletWithKey();
     }
 
     /**
@@ -71,41 +66,49 @@
     public void process(APDU apdu) throws ISOException {
         byte[] buffer = apdu.getBuffer();
 
-        // CLA ? 69
         if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
             switch (buffer[ISO7816.OFFSET_INS]) {
-                case CODE:
+                case INS_CODE:
                     encode(apdu);
                     break;
                 
-                case GET_CODE:
+                case INS_GET_CODE:
                     getEncode(apdu);
                     break;
 
-                case DECODE:
+                case INS_DECODE:
                     break;
                     
-                case GET_DECODE:
+                case INS_GET_DECODE:
                     break;
+                    
+                case INS_SET_USER_KEY:
+                    break;
+                    
+                default:
+                    ISOException.throwIt(ISO7816.SW_INS_NOT_SUPPORTED);
             }
         }
+        else
+            ISOException.throwIt(ISO7816.SW_CLA_NOT_SUPPORTED);
     }
     
     private void encode(APDU apdu)
     {
-        messLength = apdu.setIncomingAndReceive();
-        byte[] requestID = new byte[messLength];
+        short messLength = apdu.setIncomingAndReceive();
+        randomer.generateData(code, (short) 0, BUFFER_LENGTH);
         for (short i = 0; i < messLength; i++) {
-            requestID[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
+            code[(short)(i + key)] = buffer[(short)(i + ISO7816.OFFSET_CDATA)];
         }
-        //cipher.init(userKey, Cipher.MODE_ENCRYPT);
     }
     
     private void getEncode(APDU apdu)
     {
-        if(apdu.setOutgoing() < messLength)
+        short Le = apdu.setOutgoing();
+        // Verification que Le >= Lc (taille des donn?es envoy?es)
+        if (Le < BUFFER_LENGTH)
             ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
-        
-        apdu.sendBytesLong(code, (short)0, messLength);
+        apdu.setOutgoingLength(BUFFER_LENGTH);
+        apdu.sendBytesLong(code, (short) 0, BUFFER_LENGTH);
     }
 }

Added: trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java
===================================================================
--- trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java	2005-02-24 18:14:30 UTC (rev 35)
+++ trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java	2005-02-25 00:04:28 UTC (rev 36)
@@ -0,0 +1,111 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.applet;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+import javacard.security.KeyBuilder;
+import javacard.security.RSAPrivateKey;
+import javacard.security.RSAPublicKey;
+//import javacardx.crypto.*;
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class SCAppletWithKey extends Applet {
+
+    private final static byte CLA_SECURITY = (byte) 0x69;
+    private final static byte CODE = (byte) 0x10;
+    private final static byte GET_CODE = (byte) 0x20;
+    private final static byte DECODE = (byte) 0x30;
+    private final static byte GET_DECODE = (byte) 0x40;
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte[] code;
+    private short messLength;
+    
+    private RSAPrivateKey userKey;
+    private RSAPublicKey serverKey;
+    private RSAPrivateKey sessionKey;
+    //private Cipher cipher;
+    
+    /**
+     * Constructeur par d?faut
+     */
+    protected SCAppletWithKey() {
+        buffer = new byte[BUFFER_LENGTH];
+        code = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        userKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
+        serverKey = (RSAPublicKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PUBLIC, KeyBuilder.LENGTH_RSA_512, true);
+        sessionKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
+        //cipher = Cipher.getInstance(Cipher.ALG_RSA_ISO9796, false);
+        register();
+    }
+
+    /**
+     * @see javacard.framework.Applet#install(byte[], short, byte)
+     */
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new SCApplet();
+    }
+
+    /**
+     * M?thode appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param apdu
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        byte[] buffer = apdu.getBuffer();
+
+        // CLA ? 69
+        if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
+            switch (buffer[ISO7816.OFFSET_INS]) {
+                case CODE:
+                    encode(apdu);
+                    break;
+                
+                case GET_CODE:
+                    getEncode(apdu);
+                    break;
+
+                case DECODE:
+                    break;
+                    
+                case GET_DECODE:
+                    break;
+            }
+        }
+    }
+    
+    private void encode(APDU apdu)
+    {
+        messLength = apdu.setIncomingAndReceive();
+        byte[] requestID = new byte[messLength];
+        for (short i = 0; i < messLength; i++) {
+            requestID[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
+        }
+        //cipher.init(userKey, Cipher.MODE_ENCRYPT);
+    }
+    
+    private void getEncode(APDU apdu)
+    {
+        if(apdu.setOutgoing() < messLength)
+            ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+        
+        apdu.sendBytesLong(code, (short)0, messLength);
+    }
+}



From jguers at sheep.berlios.de  Fri Feb 25 01:11:09 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Fri, 25 Feb 2005 01:11:09 +0100
Subject: [Jmds-svn] r37 - members/jguers
Message-ID: <200502250011.j1P0B9aw013131@sheep.berlios.de>

Author: jguers
Date: 2005-02-25 01:10:55 +0100 (Fri, 25 Feb 2005)
New Revision: 37

Removed:
   members/jguers/TestCard/
Log:
Nettoyage



From dbardin at sheep.berlios.de  Fri Feb 25 01:11:12 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Fri, 25 Feb 2005 01:11:12 +0100
Subject: [Jmds-svn] r38 - in trunk/src: de/berlios/jmds/server fr/umlv/ir3/corba/forum
Message-ID: <200502250011.j1P0BC1i013146@sheep.berlios.de>

Author: dbardin
Date: 2005-02-25 01:10:58 +0100 (Fri, 25 Feb 2005)
New Revision: 38

Added:
   trunk/src/fr/umlv/ir3/corba/forum/FindObject.java
Modified:
   trunk/src/de/berlios/jmds/server/RightsManager.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
Log:
Je commence avoir quelques pistes pour le listage des objets du server...

Modified: trunk/src/de/berlios/jmds/server/RightsManager.java
===================================================================
--- trunk/src/de/berlios/jmds/server/RightsManager.java	2005-02-25 00:10:55 UTC (rev 37)
+++ trunk/src/de/berlios/jmds/server/RightsManager.java	2005-02-25 00:10:58 UTC (rev 38)
@@ -20,10 +20,10 @@
 public class RightsManager {
 	
 	/** The security configuration **/
-	private SecurityConfiguration securityConfig = SecurityConfiguration.getInstance();
+	private SecurityConfiguration securityConfig 	= SecurityConfiguration.getInstance();
 	
 	/** The rights configuration **/
-	private RightsConfiguration rightsConfig=RightsConfiguration.getInstance();
+	private RightsConfiguration rightsConfig		= RightsConfiguration.getInstance();
 	
 	
 	
@@ -40,10 +40,7 @@
 	 * Constructor
 	 *  
 	 */
-	private RightsManager ()
-	{
-			
-	}
+	private RightsManager (){}
 	
 	//----------------------------------------------------------//
 	//------------------- PUBLIC METHODS -----------------------//
@@ -71,7 +68,8 @@
 	 */
 	public boolean canUse (String szUserId, String szIOR, String szFonction)
 	{
-		// TODO
-		return false;		
+		String szGroupClient = securityConfig.getclientGroup(szUserId);
+		
+		return rightsConfig.checkFonctionGroupAccess(szGroupClient, szIOR, szFonction);		
 	}
 }
\ No newline at end of file

Added: trunk/src/fr/umlv/ir3/corba/forum/FindObject.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/FindObject.java	2005-02-25 00:10:55 UTC (rev 37)
+++ trunk/src/fr/umlv/ir3/corba/forum/FindObject.java	2005-02-25 00:10:58 UTC (rev 38)
@@ -0,0 +1,39 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package fr.umlv.ir3.corba.forum;
+
+import org.omg.CORBA.ORB;
+import org.omg.PortableServer.POA;
+
+/**
+ * @author jguers
+ */
+public class FindObject {
+
+    /**
+     * @param args
+     * @throws Exception
+     */
+    public static void main(String[] args) throws Exception {
+        java.util.Properties props = System.getProperties();
+        // props.put( "org.omg.CORBA.ORBClass", "org.openorb.CORBA.ORB" );
+        // props.put("org.omg.CORBA.ORBSingletonClass","org.openorb.CORBA.ORBSingleton" );
+        // props.put( "verbose", "5" );
+        props.put("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.ClientORBInitializer", "");
+
+        ORB orb = ORB.init(args, props);
+
+        //POACurrent objects = (POACurrent) orb.resolve_initial_references("POACurrent");
+        String[] objects = orb.list_initial_services();
+        System.out.println(objects);
+        for (int i = 0 ; i<objects.length; i++)
+        	System.out.println(objects[i]);
+        
+        POA object = (POA) orb.resolve_initial_references("RootPOA");
+        object.the_POAManager().activate();
+        System.out.println(object.get_servant_manager());
+        //Object obj = object.id_to_reference(object.id());
+		//System.out.println(obj);
+    }
+}

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-25 00:10:55 UTC (rev 37)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-25 00:10:58 UTC (rev 38)
@@ -46,9 +46,10 @@
 		
 		ForumImpl forum = new ForumImpl("Forum de Test", "GG");
 		
-		byte [] objectID = rootPOA.activate_object(forum);
+		byte [] objectID = rootPOA.activate_object(forum);		
 		Object obj = rootPOA.id_to_reference(objectID);
-		
+		System.out.println(objectID);
+		System.out.println(obj);
         //Cr?ation du service d'annuaire
         Object ns = orb.resolve_initial_references("NameService");
         NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;



From jguers at sheep.berlios.de  Fri Feb 25 01:16:08 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Fri, 25 Feb 2005 01:16:08 +0100
Subject: [Jmds-svn] r39 - in members/jguers: . TestCard TestCard/.settings TestCard/applets TestCard/applets/de TestCard/applets/de/berlios TestCard/applets/de/berlios/jmds TestCard/applets/de/berlios/jmds/test TestCard/applets/de/berlios/jmds/test/javacard TestCard/generator TestCard/src TestCard/src/de TestCard/src/de/berlios TestCard/src/de/berlios/jmds TestCard/src/de/berlios/jmds/test TestCard/src/de/berlios/jmds/test/clients TestCard/src/de/berlios/jmds/tools
Message-ID: <200502250016.j1P0G8CO018531@sheep.berlios.de>

Author: jguers
Date: 2005-02-25 01:15:44 +0100 (Fri, 25 Feb 2005)
New Revision: 39

Added:
   members/jguers/TestCard/
   members/jguers/TestCard/.classpath
   members/jguers/TestCard/.project
   members/jguers/TestCard/.settings/
   members/jguers/TestCard/.settings/org.eclipse.jdt.core.prefs
   members/jguers/TestCard/applets/
   members/jguers/TestCard/applets/de/
   members/jguers/TestCard/applets/de/berlios/
   members/jguers/TestCard/applets/de/berlios/jmds/
   members/jguers/TestCard/applets/de/berlios/jmds/test/
   members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/
   members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.ijc
   members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jar
   members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca
   members/jguers/TestCard/generator/
   members/jguers/TestCard/generator/ping.pmf
   members/jguers/TestCard/ping.fcn
   members/jguers/TestCard/src/
   members/jguers/TestCard/src/de/
   members/jguers/TestCard/src/de/berlios/
   members/jguers/TestCard/src/de/berlios/jmds/
   members/jguers/TestCard/src/de/berlios/jmds/test/
   members/jguers/TestCard/src/de/berlios/jmds/test/Ping.java
   members/jguers/TestCard/src/de/berlios/jmds/test/clients/
   members/jguers/TestCard/src/de/berlios/jmds/test/clients/ClientPing.java
   members/jguers/TestCard/src/de/berlios/jmds/tools/
   members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java
Log:
Retour a ma version de test...


Property changes on: members/jguers/TestCard
___________________________________________________________________
Name: svn:ignore
   + classes
doc


Added: members/jguers/TestCard/.classpath
===================================================================
--- members/jguers/TestCard/.classpath	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/.classpath	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<classpath>
+	<classpathentry kind="src" path="src"/>
+	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JRE 1.3"/>
+	<classpathentry kind="lib" path="C:/Program Files/Java/java_card_kit-2_2_1/lib/javacardframework.jar"/>
+	<classpathentry kind="lib" path="C:/Program Files/Schlumberger/Smart Cards and Terminals/Cyberflex Access Kits/v4/Middleware Interfaces/jiop/slbJIop.jar"/>
+	<classpathentry kind="output" path="classes"/>
+</classpath>

Added: members/jguers/TestCard/.project
===================================================================
--- members/jguers/TestCard/.project	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/.project	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<projectDescription>
+	<name>TestCard</name>
+	<comment></comment>
+	<projects>
+	</projects>
+	<buildSpec>
+		<buildCommand>
+			<name>org.eclipse.jdt.core.javabuilder</name>
+			<arguments>
+			</arguments>
+		</buildCommand>
+	</buildSpec>
+	<natures>
+		<nature>org.eclipse.jdt.core.javanature</nature>
+	</natures>
+</projectDescription>

Added: members/jguers/TestCard/.settings/org.eclipse.jdt.core.prefs
===================================================================
--- members/jguers/TestCard/.settings/org.eclipse.jdt.core.prefs	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/.settings/org.eclipse.jdt.core.prefs	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,12 @@
+#Tue Feb 08 22:15:09 CET 2005
+org.eclipse.jdt.core.compiler.debug.localVariable=generate
+org.eclipse.jdt.core.compiler.compliance=1.3
+org.eclipse.jdt.core.compiler.codegen.unusedLocal=preserve
+org.eclipse.jdt.core.compiler.debug.sourceFile=generate
+org.eclipse.jdt.core.compiler.codegen.targetPlatform=1.1
+org.eclipse.jdt.core.compiler.problem.enumIdentifier=ignore
+eclipse.preferences.version=1
+org.eclipse.jdt.core.compiler.debug.lineNumber=generate
+org.eclipse.jdt.core.compiler.codegen.inlineJsrBytecode=enabled
+org.eclipse.jdt.core.compiler.source=1.3
+org.eclipse.jdt.core.compiler.problem.assertIdentifier=ignore

Added: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.ijc
===================================================================
(Binary files differ)


Property changes on: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.ijc
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jar
===================================================================
(Binary files differ)


Property changes on: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca
===================================================================
--- members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,159 @@
+// converted by version 1.3
+// on Fri Feb 25 00:46:14 CET 2005
+
+.package de/berlios/jmds/test {
+	.aid 0x11:0x22:0x33:0x44:0x55:0x66;
+	.version 1.0;
+
+	.imports {
+		0xA0:0x0:0x0:0x0:0x62:0x1:0x1 1.0;		//javacard/framework
+	}
+
+	.applet {
+		0x11:0x22:0x33:0x44:0x55:0x66:0x77 Ping;
+	}
+
+	.constantPool {
+		// 0
+		instanceFieldRef byte[] Ping/buffer;
+		// 1
+		instanceFieldRef byte Ping/messLength;
+		// 2
+		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
+		// 3
+		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
+		// 4
+		classRef Ping;
+		// 5
+		staticMethodRef Ping/<init>()V;
+		// 6
+		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
+		// 7
+		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
+		// 8
+		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
+		// 9
+		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		// 10
+		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
+		// 11
+		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
+	}
+
+	.class public Ping 0 extends 0.3 {		// extends javacard/framework/Applet
+
+		.fields {
+			private byte[] buffer 0;		// [B
+			private byte messLength 1;		// B
+			private static final byte CLA_PING = -128;		// B
+			private static final byte ECHO_REQUEST = 16;		// B
+			private static final byte ECHO_REPLY = 48;		// B
+			private static final short BUFFER_LENGTH = 255;		// S
+		}
+
+		.publicMethodTable 7 {
+			equals(Ljava/lang/Object;)Z;
+			register()V;
+			register([BSB)V;
+			selectingApplet()Z;
+			deselect()V;
+			getShareableInterfaceObject(Ljavacard/framework/AID;B)Ljavacard/framework/Shareable;;
+			select()Z;
+			process(Ljavacard/framework/APDU;)V;
+		}
+
+		.packageMethodTable 0 {
+		}
+
+		.method protected <init>()V 0 {
+			.stack 2;
+			.locals 0;
+
+				L0:	aload_0;
+					invokespecial 2;		// javacard/framework/Applet.<init>()V
+					aload_0;
+					sspush 255;
+					newarray 11;
+					putfield_a 0;		// reference de/berlios/jmds/test/Ping.buffer
+					aload_0;
+					sconst_0;
+					putfield_b 1;		// byte de/berlios/jmds/test/Ping.messLength
+					aload_0;
+					invokevirtual 3;		// javacard/framework/Applet.register()V
+					return;
+		}
+
+		.method public static install([BSB)V 1 {
+			.stack 1;
+			.locals 0;
+
+				L0:	new 4;		// de/berlios/jmds/test/Ping
+					invokespecial 5;		// de/berlios/jmds/test/Ping.<init>()V
+					return;
+		}
+
+		.method public process(Ljavacard/framework/APDU;)V 7 {
+			.stack 5;
+			.locals 2;
+
+			.descriptor	Ljavacard/framework/APDU;	0.10;
+
+				L0:	aload_1;
+					invokevirtual 6;		// javacard/framework/APDU.getBuffer()[B
+					astore_2;
+					aload_2;
+					sconst_0;
+					baload;
+					bspush -128;
+					if_scmpne L9;
+				L1:	aload_2;
+					sconst_1;
+					baload;
+					slookupswitch L9 2 16 L2 48 L6;
+				L2:	aload_0;
+					aload_1;
+					invokevirtual 7;		// javacard/framework/APDU.setIncomingAndReceive()S
+					s2b;
+					putfield_b 1;		// byte de/berlios/jmds/test/Ping.messLength
+					sconst_0;
+					sstore_3;
+					goto L4;
+				L3:	getfield_a_this 0;		// reference de/berlios/jmds/test/Ping.buffer
+					sload_3;
+					aload_2;
+					sconst_5;
+					sload_3;
+					sadd;
+					baload;
+					bastore;
+					sload_3;
+					sconst_1;
+					sadd;
+					s2b;
+					sstore_3;
+				L4:	sload_3;
+					getfield_b_this 1;		// byte de/berlios/jmds/test/Ping.messLength
+					if_scmplt L3;
+				L5:	goto L9;
+				L6:	aload_1;
+					invokevirtual 8;		// javacard/framework/APDU.setOutgoing()S
+					sstore_3;
+					sload_3;
+					getfield_b_this 1;		// byte de/berlios/jmds/test/Ping.messLength
+					if_scmpge L8;
+				L7:	sspush 26368;
+					invokestatic 9;		// javacard/framework/ISOException.throwIt(S)V
+				L8:	aload_1;
+					getfield_b_this 1;		// byte de/berlios/jmds/test/Ping.messLength
+					invokevirtual 10;		// javacard/framework/APDU.setOutgoingLength(S)V
+					aload_1;
+					getfield_a_this 0;		// reference de/berlios/jmds/test/Ping.buffer
+					sconst_0;
+					getfield_b_this 1;		// byte de/berlios/jmds/test/Ping.messLength
+					invokevirtual 11;		// javacard/framework/APDU.sendBytesLong([BSS)V
+				L9:	return;
+		}
+
+	}
+
+}

Added: members/jguers/TestCard/generator/ping.pmf
===================================================================
--- members/jguers/TestCard/generator/ping.pmf	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/generator/ping.pmf	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,11 @@
+[PrgMaker]
+Package=de.berlios.jmds.test
+PackageAID=112233445566
+OutputDir=d:\1G2K - SOPRA\IR3\Corba\jmds\SVN\members\jguers\TestCard\applets
+ExportDir=c:\Program Files\Schlumberger\Smart Cards and Terminals\Cyberflex Access Kits\v4\Toolkit\PRGMaker\Export Files
+Version=1.0
+ClassDir=d:\1G2K - SOPRA\IR3\Corba\jmds\SVN\members\jguers\TestCard\classes
+[Applets]
+NumApplets=1
+Applet1=Ping.class
+Applet1AID=11223344556677

Added: members/jguers/TestCard/ping.fcn
===================================================================
--- members/jguers/TestCard/ping.fcn	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/ping.fcn	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,2 @@
+"Echo Reply","8030000003",#FALSE#
+"Echo Request","8010000003101020",#TRUE#

Added: members/jguers/TestCard/src/de/berlios/jmds/test/Ping.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/test/Ping.java	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/src/de/berlios/jmds/test/Ping.java	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,79 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.test;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+
+/**
+ * Premi?re classe de test d'une applet JavaCard Renvoie juste les donn?es
+ * envoy?es
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class Ping extends Applet {
+
+    private final static byte CLA_PING = (byte) 0x80;
+    private final static byte ECHO_REQUEST = (byte) 0x10;
+    private final static byte ECHO_REPLY = (byte) 0x30;
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte messLength;
+
+    /**
+     * Constructeur par d?faut
+     */
+    protected Ping() {
+        buffer = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        register();
+    }
+
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new Ping();
+    }
+
+    /**
+     * M?thide appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param arg0
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        byte[] tmpBuffer = apdu.getBuffer();
+
+        // CLA ? 0x80
+        if (tmpBuffer[ISO7816.OFFSET_CLA] == CLA_PING) {
+            switch (tmpBuffer[ISO7816.OFFSET_INS]) {
+            case ECHO_REQUEST:
+                messLength = (byte)(apdu.setIncomingAndReceive());
+//                if ((byteRead > (byte) BUFFER_LENGTH) || (byteRead <= (byte) 0))
+//                    ISOException.throwIt(ISO7816.SW_WRONG_DATA);
+                for (byte i = (byte) 0; i < messLength; i++) {
+                    buffer[i] = tmpBuffer[ISO7816.OFFSET_CDATA + i];
+                }
+                break;
+
+            case ECHO_REPLY:
+                // Le = taille de la r?ponse attendue
+                short Le = apdu.setOutgoing();
+                // Verification que Le >= Lc (taille des donn?es envoy?es)
+                if (Le < messLength)
+                    ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+                apdu.setOutgoingLength((short) messLength);
+                apdu.sendBytesLong(buffer, (short) 0, (short) messLength);
+                break;
+            }
+        }
+    }
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/test/clients/ClientPing.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/test/clients/ClientPing.java	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/src/de/berlios/jmds/test/clients/ClientPing.java	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,144 @@
+/*
+ * Created on 9 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.test.clients;
+
+import de.berlios.jmds.tools.Convertor;
+import slb.iop.*;
+
+/**
+ * Teste la classe Ping charg?e sur la carte
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class ClientPing {
+
+    private static class jmdsIOPListener implements IOPListener {
+
+        /**
+         * DOCME
+         * 
+         * @param arg0
+         * 
+         * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
+         */
+        public void CardRemoved(IOPEvent event) {
+            System.out.println("Carte retir?e de ");
+            System.out.println(event.getReaderName());
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param arg0
+         * 
+         * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
+         */
+        public void CardInserted(IOPEvent event) {
+            System.out.print("Carte ins?r?e dans ");
+            System.out.println(event.getReaderName());
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param arg0
+         * 
+         * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
+         */
+        public void ReaderRemoved(IOPEvent event) {
+            System.out.println("Lecteur d?connect?");
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param arg0
+         * 
+         * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
+         */
+        public void ReaderInserted(IOPEvent event) {
+            System.out.println("Lecteur connect?");
+        }
+    }
+
+    public static void main(String[] args) {
+        IOP sIOP = new IOP();
+
+        jmdsIOPListener listener = new jmdsIOPListener();
+        sIOP.addIOPListener(listener);
+
+        String[] lstReaders = sIOP.ListReaders();
+
+        for (int i = 0; i < lstReaders.length; i++) {
+            System.out.println(lstReaders[i]);
+        }
+
+        SmartCard card = new SmartCard();
+        if (lstReaders.length > 0) {
+            boolean result = sIOP.Connect(card, lstReaders[0], false);
+            if (result) {
+                System.out.println("Carte connectee");
+
+                int CLA = Integer.parseInt("00", 16);
+                int INS = Integer.parseInt("A4", 16);
+                int P1 = Integer.parseInt("04", 16);
+                int P2 = Integer.parseInt("00", 16);
+                int[] body = Convertor.stringToIntArray("11223344556677");
+                int LE = Integer.parseInt("00", 16);
+                try {
+                    System.out.println("Applet Selection");
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    System.out.println("Applet selected");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Pb de Selection");
+                    e.printStackTrace();
+                }
+
+                System.out.println("Envoi de l'APDU Echo Request");
+                CLA = Integer.parseInt("80", 16);
+                INS = Integer.parseInt("10", 16);
+                P1 = Integer.parseInt("00", 16);
+                P2 = Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("102030");
+                LE = Integer.parseInt("00", 16);
+
+                try {
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur request");
+                    e.printStackTrace();
+                }
+
+                System.out.print("Envoi de l'APDU Echo Reply: > ");
+                CLA = (int) Integer.parseInt("80", 16);
+                INS = (int) Integer.parseInt("30", 16);
+                P1 = (int) Integer.parseInt("00", 16);
+                P2 = (int) Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("");
+                LE = (int) Integer.parseInt("03", 16);
+
+                try {
+                    card.BeginTransaction();
+                    short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    for (int i = 0; i < out.length; i++) {
+                        System.out.print(Integer.toHexString(out[i]) + " ");
+                    }
+                    System.out.println("");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur reply");
+                    e.printStackTrace();
+                }
+            }
+        }
+    }
+}

Added: members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java
===================================================================
--- members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java	2005-02-25 00:10:58 UTC (rev 38)
+++ members/jguers/TestCard/src/de/berlios/jmds/tools/Convertor.java	2005-02-25 00:15:44 UTC (rev 39)
@@ -0,0 +1,66 @@
+/*
+ * Created on 9 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.tools;
+
+/**
+ * Permet la conversion de String en short[] et inversement
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class Convertor {
+    
+    /**
+     * DOCME
+     */
+    public final static short[] stringToShortArray(String value) {
+        short shortKey[] = new short[(value.length() / 2)];
+        int y = 0;
+        String strShort;
+
+        for (int x = 0; x < shortKey.length; x++) {
+            strShort = value.substring(y, (y + 2));
+            if (strShort.equals("FF")) {
+                shortKey[x] = (short) 0xFF;
+            } else {
+                try {
+                    shortKey[x] = (short) Short.parseShort(strShort, 16);
+                } catch (NumberFormatException e) {
+                    System.out.println("HexStringToShortArray Failed ");
+                }
+            }
+            y = y + 2;
+        }
+        return shortKey;
+    }
+    
+    /**
+     * DOCME
+     */
+    public static int[] stringToIntArray(String value) {
+        int intKey[] = new int[(value.length() / 2)];
+        int y = 0;
+        String strInt;
+
+        for (int x = 0; x < intKey.length; x++) {
+            strInt = value.substring(y, (y + 2));
+            if (strInt.equals("FF")) {
+                intKey[x] = (int) 0xFF;
+            } else {
+                try {
+                    intKey[x] = (int) Integer.parseInt(strInt, 16);
+                } catch (NumberFormatException e) {
+                    System.out.println("stringToShortArray Failed ");
+                }
+            }
+
+            y = y + 2;
+        }
+        return intKey;
+    }
+}
+



From dbardin at sheep.berlios.de  Fri Feb 25 13:45:54 2005
From: dbardin at sheep.berlios.de (Denis BARDIN at BerliOS)
Date: Fri, 25 Feb 2005 13:45:54 +0100
Subject: [Jmds-svn] r40 - in trunk/src: . fr/umlv/ir3/corba/forum
Message-ID: <200502251245.j1PCjs5N021410@sheep.berlios.de>

Author: dbardin
Date: 2005-02-25 13:45:53 +0100 (Fri, 25 Feb 2005)
New Revision: 40

Added:
   trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java
Modified:
   trunk/src/fr/umlv/ir3/corba/forum/FindObject.java
   trunk/src/security.xml
Log:


Modified: trunk/src/fr/umlv/ir3/corba/forum/FindObject.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/FindObject.java	2005-02-25 00:15:44 UTC (rev 39)
+++ trunk/src/fr/umlv/ir3/corba/forum/FindObject.java	2005-02-25 12:45:53 UTC (rev 40)
@@ -30,9 +30,16 @@
         for (int i = 0 ; i<objects.length; i++)
         	System.out.println(objects[i]);
         
-        POA object = (POA) orb.resolve_initial_references("RootPOA");
-        object.the_POAManager().activate();
-        System.out.println(object.get_servant_manager());
+        // Recuperation du root POA
+        POA rootPOA = (POA) orb.resolve_initial_references("RootPOA");
+        
+        // Recuperation des fils du root POA
+        POA[]  child= rootPOA.the_children();
+        for(int i = 0; i< child.length; i++)
+        {
+        	System.out.println(i +" : " + child[i].get_servant());
+        }
+         System.out.println("RootPOA :" + rootPOA.get_servant());
         //Object obj = object.id_to_reference(object.id());
 		//System.out.println(obj);
     }

Added: trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java	2005-02-25 00:15:44 UTC (rev 39)
+++ trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java	2005-02-25 12:45:53 UTC (rev 40)
@@ -0,0 +1,77 @@
+/*
+ * Created on 1 oct. 2004
+ */
+package fr.umlv.ir3.corba.forum;
+
+import java.io.*;
+
+import org.omg.CORBA.*;
+import org.omg.CORBA.Object;
+import org.omg.CORBA.ORBPackage.InvalidName;
+import org.omg.CosNaming.*;
+import org.omg.CosNaming.NamingContextPackage.*;
+import org.omg.PortableServer.*;
+import org.omg.PortableServer.POAManagerPackage.AdapterInactive;
+import org.omg.PortableServer.POAPackage.*;
+
+/**
+ * @author jguers
+ */
+public class PersitantForumServer {
+
+	/**
+	 * @param args
+	 * @throws InvalidName
+	 * @throws ServantAlreadyActive
+	 * @throws ObjectNotActive
+	 * @throws WrongPolicy
+	 * @throws IOException
+	 * @throws AdapterInactive
+	 * @throws NotFound
+	 * @throws AlreadyBound
+	 * @throws CannotProceed
+	 * @throws InvalidName
+	 * @throws org.omg.CosNaming.NamingContextPackage.InvalidName 
+	 * @throws InvalidPolicy
+	 * @throws AdapterAlreadyExists
+	 */
+	public static void main(String[] args) throws InvalidName, ServantAlreadyActive, ObjectNotActive, WrongPolicy, IOException, AdapterInactive, NotFound, AlreadyBound, CannotProceed, org.omg.CosNaming.NamingContextPackage.InvalidName, AdapterAlreadyExists, InvalidPolicy {
+        
+        java.util.Properties props = System.getProperties();
+//        props.put( "org.omg.CORBA.ORBClass", "org.openorb.CORBA.ORB" );
+//        props.put( "org.omg.CORBA.ORBSingletonClass", "org.openorb.CORBA.ORBSingleton" );
+//        props.put( "verbose", "5" );
+        props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.ServerORBInitializer" , "");
+
+		ORB orb = ORB.init(args, props);
+		POA rootPOA = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
+		
+		Policy[] policies = {
+				rootPOA.create_request_processing_policy(RequestProcessingPolicyValue.USE_SERVANT_MANAGER), 
+				rootPOA.create_servant_retention_policy(ServantRetentionPolicyValue.RETAIN),
+				rootPOA.create_lifespan_policy(LifespanPolicyValue.PERSISTENT)
+		};
+		
+		POA forumPOA = rootPOA.create_POA("forumPOA", rootPOA.the_POAManager(), policies);
+				
+		ForumImpl forum = new ForumImpl("Forum de Test", "GG");
+		
+		byte [] objectID = forumPOA.activate_object(forum);		
+		Object obj = forumPOA.id_to_reference(objectID);
+		System.out.println(objectID);
+		System.out.println(obj);
+        //Cr?ation du service d'annuaire
+        Object ns = orb.resolve_initial_references("NameService");
+        NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
+        
+        NameComponent[] name = nc.to_name("jmdsForum");
+        
+        nc.rebind(name,obj);
+        
+		rootPOA.the_POAManager().activate();
+        
+        System.out.println("Server ready");
+        
+		orb.run();
+	}
+}

Modified: trunk/src/security.xml
===================================================================
--- trunk/src/security.xml	2005-02-25 00:15:44 UTC (rev 39)
+++ trunk/src/security.xml	2005-02-25 12:45:53 UTC (rev 40)
@@ -1,8 +1,7 @@
 <?xml version="1.0" encoding="ISO-8859-1" ?>
 
 <jmds>
-	test
-   <server key="0123456789"/>
+	<server key="0123456789"/>
    <clients>
       <client id="1" key="1111111111" group="grp_1"/>
       <client id="2" key="2222222222" group="grp_2"/>



From jguers at sheep.berlios.de  Fri Feb 25 15:42:07 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Fri, 25 Feb 2005 15:42:07 +0100
Subject: [Jmds-svn] r41 - in trunk/src: de/berlios/jmds/client de/berlios/jmds/ior fr/umlv/ir3/corba/forum
Message-ID: <200502251442.j1PEg7mI030171@sheep.berlios.de>

Author: jguers
Date: 2005-02-25 15:42:06 +0100 (Fri, 25 Feb 2005)
New Revision: 41

Modified:
   trunk/src/de/berlios/jmds/client/SCAppletClient.java
   trunk/src/de/berlios/jmds/ior/IORInter.java
   trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java
Log:
Modifs suite aux commentaires du prof
!! Attention !! Tou ne marche pas forcement dans ce depot !!

Modified: trunk/src/de/berlios/jmds/client/SCAppletClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-25 12:45:53 UTC (rev 40)
+++ trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-25 14:42:06 UTC (rev 41)
@@ -10,6 +10,12 @@
 
 package de.berlios.jmds.client;
 
+import de.berlios.jmds.tools.Convertor;
+import slb.iop.IOP;
+import slb.iop.IOPEvent;
+import slb.iop.IOPListener;
+import slb.iop.SmartCard;
+
 /**
  * @author Denis
  * 
@@ -19,22 +25,144 @@
 	/** The singleton instance * */
 	private static SCAppletClient INSTANCE = null;
 	
-	//----------------------------------------------------------//
-	//------------------- CONSTRUCTORS -------------------------//
-	//----------------------------------------------------------//
 	
+    private static class jmdsIOPListener implements IOPListener {
+
+        /**
+		 * DOCME
+		 * 
+		 * @param arg0
+		 * 
+		 * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
+		 */
+        public void CardRemoved(IOPEvent event) {
+            System.out.println("Carte retir?e de ");
+            System.out.println(event.getReaderName());
+        }
+
+        /**
+		 * DOCME
+		 * 
+		 * @param arg0
+		 * 
+		 * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
+		 */
+        public void CardInserted(IOPEvent event) {
+            System.out.print("Carte ins?r?e dans ");
+            System.out.println(event.getReaderName());
+        }
+        
+        /**
+         * DOCME
+         * 
+         * @param arg0
+         * 
+         * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
+         */
+        public void ReaderRemoved(IOPEvent event) {
+            System.out.println("Lecteur d?connect?");
+        }
+
+        /**
+         * DOCME
+         * 
+         * @param arg0
+         * 
+         * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
+         */
+        public void ReaderInserted(IOPEvent event) {
+            System.out.println("Lecteur connect?");
+        }
+    }
+
+	// ----------------------------------------------------------//
+	// ------------------- CONSTRUCTORS -------------------------//
+	// ----------------------------------------------------------//
+	
 	/**
 	 * Constructor
-	 *  
+	 * 
 	 */
 	private SCAppletClient ()
 	{
-		// TODO Implante le contructeur
-	}
+        IOP sIOP = new IOP();
+
+        jmdsIOPListener listener = new jmdsIOPListener();
+        sIOP.addIOPListener(listener);
+
+        String[] lstReaders = sIOP.ListReaders();
+
+        for (int i = 0; i < lstReaders.length; i++) {
+            System.out.println(lstReaders[i]);
+        }
+
+        SmartCard card = new SmartCard();
+        if (lstReaders.length > 0) {
+            boolean result = sIOP.Connect(card, lstReaders[0], false);
+            if (result) {
+                System.out.println("Carte connectee");
+
+                int CLA = Integer.parseInt("00", 16);
+                int INS = Integer.parseInt("A4", 16);
+                int P1 = Integer.parseInt("04", 16);
+                int P2 = Integer.parseInt("00", 16);
+                int[] body = Convertor.stringToIntArray("11223344556677");
+                int LE = Integer.parseInt("00", 16);
+                try {
+                    System.out.println("Applet Selection");
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    System.out.println("Applet selected");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Pb de Selection");
+                    e.printStackTrace();
+                }
+
+                System.out.println("Envoi de l'APDU CODE");
+                CLA = Integer.parseInt("69", 16);
+                INS = Integer.parseInt("10", 16);
+                P1 = Integer.parseInt("00", 16);
+                P2 = Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("6");
+                LE = Integer.parseInt("00", 16);
+
+                try {
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur request");
+                    e.printStackTrace();
+                }
+
+                System.out.print("Envoi de l'APDU Get Code: > ");
+                CLA = (int) Integer.parseInt("69", 16);
+                INS = (int) Integer.parseInt("11", 16);
+                P1 = (int) Integer.parseInt("00", 16);
+                P2 = (int) Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("");
+                LE = (int) Integer.parseInt("20", 16);
+
+                try {
+                    card.BeginTransaction();
+                    short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    for (int i = 0; i < out.length; i++) {
+                        System.out.print(Integer.toHexString(out[i]) + " ");
+                    }
+                    System.out.println("");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur reply");
+                    e.printStackTrace();
+                }
+            }
+        }
+    }
 	
-	//----------------------------------------------------------//
-	//------------------- PUBLIC METHODS -----------------------//
-	//----------------------------------------------------------//
+	// ----------------------------------------------------------//
+	// ------------------- PUBLIC METHODS -----------------------//
+	// ----------------------------------------------------------//
 
 	
 	/**
@@ -51,7 +179,8 @@
 	}
 	
 	/**
-	 * @param RequestId as id of the request message
+	 * @param RequestId
+	 *            as id of the request message
 	 * @return The array byte which contains the encoding servec context
 	 */
 	public byte[] code (byte[] RequestId)
@@ -61,7 +190,8 @@
 	}
 	
 	/**
-	 * @param SC as the message service context
+	 * @param SC
+	 *            as the message service context
 	 * @return the request id of the message
 	 */
 	public byte[] decode (byte[] SC)
@@ -69,4 +199,8 @@
 		// TODO
 		return SC;			
 	}
+	
+	public static void main(String[] args) {
+		new SCAppletClient();
+	}
 }

Modified: trunk/src/de/berlios/jmds/ior/IORInter.java
===================================================================
--- trunk/src/de/berlios/jmds/ior/IORInter.java	2005-02-25 12:45:53 UTC (rev 40)
+++ trunk/src/de/berlios/jmds/ior/IORInter.java	2005-02-25 14:42:06 UTC (rev 41)
@@ -5,10 +5,13 @@
  */
 package de.berlios.jmds.ior;
 
+import org.omg.CORBA.ORBPackage.InvalidName;
 import org.omg.PortableInterceptor.IORInfo;
 import org.omg.PortableInterceptor.IORInterceptor;
 
+import com.sun.corba.se.impl.oa.poa.POACurrent;
 
+
 /**
  * DOCME
  * 
@@ -18,18 +21,26 @@
  */
 public class IORInter extends org.omg.CORBA.LocalObject implements IORInterceptor
 {
-
 	/**
 	 * Comment for <code>serialVersionUID</code>
 	 */
-	private static final long	serialVersionUID	= 1L;
+	private static final long serialVersionUID = 3257852086392993079L;
 
 	/**
 	 * @see org.omg.PortableInterceptor.IORInterceptorOperations#establish_components(org.omg.PortableInterceptor.IORInfo)
 	 */
 	public void establish_components (IORInfo info)
 	{
-		// TODO Auto-generated method stub
+		try {
+			// TODO Auto-generated method stub
+			POACurrent current = (POACurrent) _orb().resolve_initial_references("POACurrent");
+			
+			//current.get_POA().reference_to_id(info.)
+		} catch (InvalidName e) {
+			// TODO Auto-generated catch block
+			e.printStackTrace();
+		}
+		
 
 	}
 

Modified: trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java	2005-02-25 12:45:53 UTC (rev 40)
+++ trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java	2005-02-25 14:42:06 UTC (rev 41)
@@ -42,6 +42,10 @@
 //        props.put( "org.omg.CORBA.ORBSingletonClass", "org.openorb.CORBA.ORBSingleton" );
 //        props.put( "verbose", "5" );
         props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.ServerORBInitializer" , "");
+        props.put ("com.sun.CORBA.POA.ORBPersistentServerPort" , "12345");
+        props.put ("com.sun.CORBA.POA.ORBServerId" , "1");
+        props.put ("com.sun.CORBA.POA.ORBInitialPort" , "1234");
+        props.put ("com.sun.CORBA.POA.ORBInitialHost" , "localhost");
 
 		ORB orb = ORB.init(args, props);
 		POA rootPOA = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
@@ -53,6 +57,7 @@
 		};
 		
 		POA forumPOA = rootPOA.create_POA("forumPOA", rootPOA.the_POAManager(), policies);
+		rootPOA.the_POAManager().activate();
 				
 		ForumImpl forum = new ForumImpl("Forum de Test", "GG");
 		
@@ -65,11 +70,8 @@
         NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
         
         NameComponent[] name = nc.to_name("jmdsForum");
-        
         nc.rebind(name,obj);
         
-		rootPOA.the_POAManager().activate();
-        
         System.out.println("Server ready");
         
 		orb.run();



From jguers at sheep.berlios.de  Fri Feb 25 18:12:31 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Fri, 25 Feb 2005 18:12:31 +0100
Subject: [Jmds-svn] r42 - in trunk: applet/de/berlios/jmds/applet/javacard src/fr/umlv/ir3/corba/forum
Message-ID: <200502251712.j1PHCVFk008203@sheep.berlios.de>

Author: jguers
Date: 2005-02-25 18:12:30 +0100 (Fri, 25 Feb 2005)
New Revision: 42

Modified:
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
   trunk/src/fr/umlv/ir3/corba/forum/FindObject.java
   trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
   trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java
Log:
Serveur persistant : pb corrige. Le serveur persistant persiste !! ;-)
FindObject : rien ne marche... Il faut chercher autre chose

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
===================================================================
--- trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-25 14:42:06 UTC (rev 41)
+++ trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-25 17:12:30 UTC (rev 42)
@@ -1,5 +1,5 @@
 // converted by version 1.3
-// on Fri Feb 25 01:00:12 CET 2005
+// on Fri Feb 25 01:23:51 CET 2005
 
 .package de/berlios/jmds/applet {
 	.aid 0x11:0x22:0x33:0x44:0x55:0x66;

Modified: trunk/src/fr/umlv/ir3/corba/forum/FindObject.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/FindObject.java	2005-02-25 14:42:06 UTC (rev 41)
+++ trunk/src/fr/umlv/ir3/corba/forum/FindObject.java	2005-02-25 17:12:30 UTC (rev 42)
@@ -20,15 +20,15 @@
         // props.put( "org.omg.CORBA.ORBClass", "org.openorb.CORBA.ORB" );
         // props.put("org.omg.CORBA.ORBSingletonClass","org.openorb.CORBA.ORBSingleton" );
         // props.put( "verbose", "5" );
-        props.put("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.client.ClientORBInitializer", "");
+        props.put ("ORBInitialPort" , "1234");
 
         ORB orb = ORB.init(args, props);
 
         //POACurrent objects = (POACurrent) orb.resolve_initial_references("POACurrent");
-        String[] objects = orb.list_initial_services();
-        System.out.println(objects);
-        for (int i = 0 ; i<objects.length; i++)
-        	System.out.println(objects[i]);
+//        String[] objects = orb.list_initial_services();
+//        System.out.println(objects);
+//        for (int i = 0 ; i<objects.length; i++)
+//        	System.out.println(objects[i]);
         
         // Recuperation du root POA
         POA rootPOA = (POA) orb.resolve_initial_references("RootPOA");
@@ -39,7 +39,7 @@
         {
         	System.out.println(i +" : " + child[i].get_servant());
         }
-         System.out.println("RootPOA :" + rootPOA.get_servant());
+//         System.out.println("RootPOA :" + rootPOA.get_servant());
         //Object obj = object.id_to_reference(object.id());
 		//System.out.println(obj);
     }

Modified: trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-25 14:42:06 UTC (rev 41)
+++ trunk/src/fr/umlv/ir3/corba/forum/ForumServer.java	2005-02-25 17:12:30 UTC (rev 42)
@@ -48,8 +48,7 @@
 		
 		byte [] objectID = rootPOA.activate_object(forum);		
 		Object obj = rootPOA.id_to_reference(objectID);
-		System.out.println(objectID);
-		System.out.println(obj);
+
         //Cr?ation du service d'annuaire
         Object ns = orb.resolve_initial_references("NameService");
         NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;

Modified: trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java
===================================================================
--- trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java	2005-02-25 14:42:06 UTC (rev 41)
+++ trunk/src/fr/umlv/ir3/corba/forum/PersitantForumServer.java	2005-02-25 17:12:30 UTC (rev 42)
@@ -44,8 +44,7 @@
         props.put ("org.omg.PortableInterceptor.ORBInitializerClass.de.berlios.jmds.server.ServerORBInitializer" , "");
         props.put ("com.sun.CORBA.POA.ORBPersistentServerPort" , "12345");
         props.put ("com.sun.CORBA.POA.ORBServerId" , "1");
-        props.put ("com.sun.CORBA.POA.ORBInitialPort" , "1234");
-        props.put ("com.sun.CORBA.POA.ORBInitialHost" , "localhost");
+        props.put ("ORBInitialPort" , "1234");
 
 		ORB orb = ORB.init(args, props);
 		POA rootPOA = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
@@ -63,11 +62,10 @@
 		
 		byte [] objectID = forumPOA.activate_object(forum);		
 		Object obj = forumPOA.id_to_reference(objectID);
-		System.out.println(objectID);
-		System.out.println(obj);
+        
+        System.out.println(orb.object_to_string(obj));
         //Cr?ation du service d'annuaire
-        Object ns = orb.resolve_initial_references("NameService");
-        NamingContextExt nc = NamingContextExtHelper.narrow(ns) ;
+        NamingContextExt nc = NamingContextExtHelper.narrow(orb.resolve_initial_references("NameService"));
         
         NameComponent[] name = nc.to_name("jmdsForum");
         nc.rebind(name,obj);



From sguincha at sheep.berlios.de  Fri Feb 25 21:55:21 2005
From: sguincha at sheep.berlios.de (Sébastien Guinchard at BerliOS)
Date: Fri, 25 Feb 2005 21:55:21 +0100
Subject: [Jmds-svn] r43 - in trunk: . src/de/berlios/jmds/client src/de/berlios/jmds/server src/de/berlios/jmds/tools
Message-ID: <200502252055.j1PKtLNW015856@sheep.berlios.de>

Author: sguincha
Date: 2005-02-25 21:55:20 +0100 (Fri, 25 Feb 2005)
New Revision: 43

Modified:
   trunk/.classpath
   trunk/src/de/berlios/jmds/client/ClientInter.java
   trunk/src/de/berlios/jmds/client/SCAppletClient.java
   trunk/src/de/berlios/jmds/server/ServerInter.java
   trunk/src/de/berlios/jmds/tools/Convertor.java
Log:
Les intercepteurs dialoguent avec la carte... Yoouuppiii
Par contre, il reste toujours des probl?\195?\168mes de codage.... 



Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-25 17:12:30 UTC (rev 42)
+++ trunk/.classpath	2005-02-25 20:55:20 UTC (rev 43)
@@ -3,12 +3,12 @@
 	<classpathentry kind="src" path="src"/>
 	<classpathentry kind="src" path="generated"/>
 	<classpathentry kind="src" path="test"/>
-	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry kind="lib" path="lib/javacardframework.jar"/>
 	<classpathentry kind="lib" path="lib/slbJIop.jar"/>
 	<classpathentry kind="lib" path="lib/commons-lang-2.0.jar"/>
 	<classpathentry kind="lib" path="lib/commons-collections-3.1.jar"/>
+	<classpathentry kind="lib" path="lib/commons-configuration-1.1RC1.jar"/>
 	<classpathentry kind="lib" path="lib/commons-logging-1.0.4.jar"/>
-	<classpathentry kind="lib" path="lib/commons-configuration-1.1RC1.jar"/>
+	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre1.5.0"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Modified: trunk/src/de/berlios/jmds/client/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-25 17:12:30 UTC (rev 42)
+++ trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-25 20:55:20 UTC (rev 43)
@@ -9,6 +9,7 @@
  */
 package de.berlios.jmds.client;
 
+import org.omg.IOP.ServiceContext;
 import org.omg.PortableInterceptor.ClientRequestInfo;
 import org.omg.PortableInterceptor.ClientRequestInterceptor;
 import org.omg.PortableInterceptor.ForwardRequest;
@@ -33,12 +34,29 @@
      * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
      */
     public void send_request(ClientRequestInfo ri) throws ForwardRequest {
-        // ServiceContext sc = new ServiceContext ();
-        // byte[] scData = "toto".getBytes();
-        // sc.context_data = scData;
-        // ri.add_request_service_context (sc, true);
+        ServiceContext sc = new ServiceContext ();
+        
         System.out.println("ClientInter.send request: " + ri.operation()
                 + " number: " + ri.request_id());
+        SCAppletClient scApplet = SCAppletClient.getInstance();
+        int id = ri.request_id();
+        byte[] tabId = new Integer(id).toString().getBytes();
+        System.out.println (tabId.length);
+
+        byte[] tabByteSC = scApplet.code(tabId);
+        
+        //Test affichage
+        for(int i=0; i < tabByteSC.length; i++) {
+        	System.out.print(tabByteSC[i]);
+        }
+   
+        
+        if(tabByteSC == null) {
+        	throw new SecurityException("Impossible de coder le message: Verifier la pr?sence de la carte dans le lecteur");
+        }
+        sc.context_data = tabByteSC;
+        ri.add_request_service_context(sc,true);
+        
     }
 
     /**
@@ -62,7 +80,7 @@
      * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#receive_exception(org.omg.PortableInterceptor.ClientRequestInfo)
      */
     public void receive_exception(ClientRequestInfo ri) throws ForwardRequest {
-        System.out.println("ClientInter.receive exception: ");
+        System.out.println("ClientInter.receive exception: "+ ri.operation());
     }
 
     /**

Modified: trunk/src/de/berlios/jmds/client/SCAppletClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-25 17:12:30 UTC (rev 42)
+++ trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-25 20:55:20 UTC (rev 43)
@@ -102,60 +102,12 @@
             if (result) {
                 System.out.println("Carte connectee");
 
-                int CLA = Integer.parseInt("00", 16);
-                int INS = Integer.parseInt("A4", 16);
-                int P1 = Integer.parseInt("04", 16);
-                int P2 = Integer.parseInt("00", 16);
-                int[] body = Convertor.stringToIntArray("11223344556677");
-                int LE = Integer.parseInt("00", 16);
-                try {
-                    System.out.println("Applet Selection");
-                    card.BeginTransaction();
-                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-                    System.out.println("Applet selected");
-                    card.EndTransaction();
-                } catch (slb.iop.slbException e) {
-                    System.out.println("Pb de Selection");
-                    e.printStackTrace();
-                }
+                
 
-                System.out.println("Envoi de l'APDU CODE");
-                CLA = Integer.parseInt("69", 16);
-                INS = Integer.parseInt("10", 16);
-                P1 = Integer.parseInt("00", 16);
-                P2 = Integer.parseInt("00", 16);
-                body = Convertor.stringToIntArray("6");
-                LE = Integer.parseInt("00", 16);
+               
 
-                try {
-                    card.BeginTransaction();
-                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-                    card.EndTransaction();
-                } catch (slb.iop.slbException e) {
-                    System.out.println("Erreur request");
-                    e.printStackTrace();
-                }
-
-                System.out.print("Envoi de l'APDU Get Code: > ");
-                CLA = (int) Integer.parseInt("69", 16);
-                INS = (int) Integer.parseInt("11", 16);
-                P1 = (int) Integer.parseInt("00", 16);
-                P2 = (int) Integer.parseInt("00", 16);
-                body = Convertor.stringToIntArray("");
-                LE = (int) Integer.parseInt("20", 16);
-
-                try {
-                    card.BeginTransaction();
-                    short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-                    for (int i = 0; i < out.length; i++) {
-                        System.out.print(Integer.toHexString(out[i]) + " ");
-                    }
-                    System.out.println("");
-                    card.EndTransaction();
-                } catch (slb.iop.slbException e) {
-                    System.out.println("Erreur reply");
-                    e.printStackTrace();
-                }
+                
+        
             }
         }
     }
@@ -179,14 +131,61 @@
 	}
 	
 	/**
-	 * @param RequestId
+	 * @param requestId
 	 *            as id of the request message
 	 * @return The array byte which contains the encoding servec context
 	 */
-	public byte[] code (byte[] RequestId)
+	public byte[] code (byte[] requestId)
 	{
-		// TODO
-		return null;
+		IOP sIOP = new IOP();
+
+        jmdsIOPListener listener = new jmdsIOPListener();
+        sIOP.addIOPListener(listener);
+
+        String[] lstReaders = sIOP.ListReaders();
+
+        for (int i = 0; i < lstReaders.length; i++) {
+            System.out.println(lstReaders[i]);
+        }
+
+        SmartCard card = new SmartCard();
+        if (lstReaders.length > 0) {
+            boolean result = sIOP.Connect(card, lstReaders[0], false);
+            if (result) {
+            	//Initialisation
+            	int CLA = Integer.parseInt("00", 16);
+                int INS = Integer.parseInt("A4", 16);
+                int P1 = Integer.parseInt("04", 16);
+                int P2 = Integer.parseInt("00", 16);
+                int[] body = Convertor.stringToIntArray("11223344556677");
+                int LE = Integer.parseInt("00", 16);
+                sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
+                
+		        //Envoi de l'APDU CODE
+		        CLA = Integer.parseInt("69", 16);
+		        INS = Integer.parseInt("10", 16);
+		        P1 = Integer.parseInt("00", 16);
+		        P2 = Integer.parseInt("00", 16);
+		        body = Convertor.stringToIntArray("73119");
+		        LE = Integer.parseInt("00", 16);
+		        System.out.println (" body: " +requestId.toString());
+        
+		        sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
+		        
+		        //Envoi de l'APDU GETCODE
+		        System.out.print("Envoi de l'APDU Get Code: > ");
+		        CLA = (int) Integer.parseInt("69", 16);
+		        INS = (int) Integer.parseInt("11", 16);
+		        P1 = (int) Integer.parseInt("00", 16);
+		        P2 = (int) Integer.parseInt("00", 16);
+		        body = Convertor.stringToIntArray("");
+		        LE = (int) Integer.parseInt("20", 16);
+		        short [] code = sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
+		        if(code != null)
+		        	return Convertor.shortArrayToByteArray(code);
+            }
+        }
+        return null;
 	}
 	
 	/**
@@ -196,11 +195,56 @@
 	 */
 	public byte[] decode (byte[] SC)
 	{
-		// TODO
+//		Envoi de l'APDU CODE
+        int CLA = Integer.parseInt("69", 16);
+        int INS = Integer.parseInt("10", 16);
+        int P1 = Integer.parseInt("00", 16);
+        int P2 = Integer.parseInt("00", 16);
+        int[] body = Convertor.stringToIntArray("6");
+        int LE = Integer.parseInt("00", 16);
+        
+        SmartCard card = new SmartCard();
+        sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
+        
+        //Envoi de l'APDU getCode
+        System.out.print("Envoi de l'APDU Get Code: > ");
+        CLA = (int) Integer.parseInt("69", 16);
+        INS = (int) Integer.parseInt("11", 16);
+        P1 = (int) Integer.parseInt("00", 16);
+        P2 = (int) Integer.parseInt("00", 16);
+        body = Convertor.stringToIntArray("");
+        LE = (int) Integer.parseInt("20", 16);
+        short [] code = sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
+        
+        SC = Convertor.shortArrayToByteArray(code);
 		return SC;			
 	}
 	
-	public static void main(String[] args) {
-		new SCAppletClient();
+	
+	/**
+	 * @param card 
+	 * @param LE 
+	 * @param body 
+	 * @param P2 
+	 * @param P1 
+	 * @param INS 
+	 * @param CLA 
+	 * @return out the result of the sendCardAPDU call
+	 * 
+	 */
+	private short[] sendCardAPDU (SmartCard card, int CLA, int INS, int P1, int P2, int [] body, int LE)
+	{
+		short[] out=null;
+		try {
+            System.out.println("Applet Selection");
+            card.BeginTransaction();
+            out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+            System.out.println("Applet selected");
+            card.EndTransaction();
+        } catch (slb.iop.slbException e) {
+            System.out.println("Pb de Selection");
+            e.printStackTrace();
+        }
+        return out;
 	}
 }

Modified: trunk/src/de/berlios/jmds/server/ServerInter.java
===================================================================
--- trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-25 17:12:30 UTC (rev 42)
+++ trunk/src/de/berlios/jmds/server/ServerInter.java	2005-02-25 20:55:20 UTC (rev 43)
@@ -1,50 +1,43 @@
-/* 
- * File    : SCManager.java
- * Created : 18 f?vr. 2005
- * 
- * =======================================
- * JMDS PROJECT ("http://jmds.berlios.de")
- * =======================================
- *
+/*
+ * File : SCManager.java Created : 18 f?vr. 2005
+ * ======================================= JMDS PROJECT
+ * ("http://jmds.berlios.de") =======================================
  */
 
 package de.berlios.jmds.server;
 
 import org.omg.IOP.ServiceContext;
-import org.omg.PortableInterceptor.*;
+import org.omg.PortableInterceptor.ForwardRequest;
+import org.omg.PortableInterceptor.ServerRequestInfo;
+import org.omg.PortableInterceptor.ServerRequestInterceptor;
 
-/** 
+
+/**
  * @author S?bastien GUINCHARD
- * 
  */
 public class ServerInter extends org.omg.CORBA.LocalObject implements ServerRequestInterceptor
 {
 
-    /**
-     * Comment for <code>serialVersionUID</code>
-     */
-    private static final long serialVersionUID = 3689630311277277232L;
+	private int					userID;
+	/**
+	 * Comment for <code>serialVersionUID</code>
+	 */
+	private static final long	serialVersionUID	= 3689630311277277232L;
 
-	//----------------------------------------------------------//
-	//------------------- PUBLIC METHODS -----------------------//
-	//----------------------------------------------------------//    
-    
-    /**
+	// ----------------------------------------------------------//
+	// ------------------- PUBLIC METHODS -----------------------//
+	// ----------------------------------------------------------//
+
+	/**
 	 * @see org.omg.PortableInterceptor.ServerRequestInterceptorOperations#receive_request_service_contexts(org.omg.PortableInterceptor.ServerRequestInfo)
 	 */
 	public void receive_request_service_contexts (ServerRequestInfo ri) throws ForwardRequest
 	{
-		String sData;
-        System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
-        try
-        {
-            ServiceContext sc = ri.get_request_service_context (0);
-            sData = new String (sc.context_data);
-            System.out.println(sData);
-        }catch (org.omg.CORBA.BAD_PARAM bad_param)
-        {
-            System.err.println("Pas de service contexte");
-        }
+		System.out.println ("ServerInter.receive request_SC: " + ri.operation ());
+		ServiceContext sc = ri.get_request_service_context (0);
+		SCManager scManager = SCManager.getInstance ();
+		userID = scManager.decode (sc.context_data);
+		System.out.println (userID);
 	}
 
 	/**
@@ -53,6 +46,10 @@
 	public void receive_request (ServerRequestInfo ri) throws ForwardRequest
 	{
 		System.out.println ("ServerInter.receive request: " + ri.operation ());
+		if (!RightsManager.getInstance ().canUse (userID + "" , new String (ri.object_id ()) , ri.operation ()))
+		{
+			//throw new SecurityException("User can not access to this object"); 
+		}
 	}
 
 	/**
@@ -60,11 +57,13 @@
 	 */
 	public void send_reply (ServerRequestInfo ri)
 	{
-		/*ServiceContext sc = ri.get_request_service_context (0);
-		sc.context_data = "titi".getBytes ();
-		ri.add_reply_service_context (sc , true);*/
-		System.out.println ("ServerInter.send_reply: " + ri.operation ());
+		ServiceContext sc = ri.get_request_service_context (0);
+		SCManager scManager = SCManager.getInstance ();
 
+		byte [] tabByteSC = new Integer (ri.request_id ()).toString ().getBytes ();
+		//byte [] tabByteSC = scManager.code (tabId);
+		ri.add_reply_service_context (sc , true);
+		System.out.println ("ServerInter.send_reply: " + tabByteSC);
 	}
 
 	/**

Modified: trunk/src/de/berlios/jmds/tools/Convertor.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-25 17:12:30 UTC (rev 42)
+++ trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-25 20:55:20 UTC (rev 43)
@@ -87,5 +87,32 @@
 		}
 		return sb.toString();
 	}
+
+	/**
+	 * @param code
+	 * @return a table of byte corresponding to the argument code
+	 */
+	public static byte [] shortArrayToByteArray (short [] code)
+	{
+		byte[] tmp = new byte[code.length];
+		for(int i=0; i<code.length; i++) {
+			Short s = new Short(code[i]);
+			tmp[i]=s.byteValue();
+		}
+		return tmp;
+	}
+
+	/**
+	 * @param requestId
+	 * @return the table of int
+	 */
+	public static int [] byteArrayToIntArray (byte [] requestId)
+	{
+		int[] tmp=null;
+		for(int i=0; i < requestId.length; i++) {
+			tmp[i] = new Byte (requestId[i]).intValue();
+		}
+		return tmp;
+	}
 }
 



From jguers at sheep.berlios.de  Sat Feb 26 23:55:17 2005
From: jguers at sheep.berlios.de (Jérôme GUERS at BerliOS)
Date: Sat, 26 Feb 2005 23:55:17 +0100
Subject: [Jmds-svn] r44 - members/jguers/TestCard/applets/de/berlios/jmds/test/javacard trunk trunk/applet/de/berlios/jmds/applet/javacard trunk/generator trunk/lib trunk/src/de/berlios/jmds/applet trunk/src/de/berlios/jmds/client trunk/src/de/berlios/jmds/tools trunk/test/de/berlios/jmds/applet trunk/test/de/berlios/jmds/clients
Message-ID: <200502262255.j1QMtHxG030247@sheep.berlios.de>

Author: jguers
Date: 2005-02-26 23:55:15 +0100 (Sat, 26 Feb 2005)
New Revision: 44

Added:
   trunk/lib/jc_api_212.jar
   trunk/src/de/berlios/jmds/applet/SCAppletWithKey.java
   trunk/test/de/berlios/jmds/clients/TestSCApllet.java
Removed:
   trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java
Modified:
   members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jar
   members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca
   trunk/.classpath
   trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
   trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
   trunk/generator/SecurityApplet.pmf
   trunk/src/de/berlios/jmds/applet/SCApplet.java
   trunk/src/de/berlios/jmds/client/ClientInter.java
   trunk/src/de/berlios/jmds/client/SCAppletClient.java
   trunk/src/de/berlios/jmds/tools/Convertor.java
Log:
Victoire : lib pour faire du cryptage trouvee
pb ac applet corrige (simple double declaration de variable et ecriture dans deux differentes ! Je suis un boulet !)
Remise en forme de SCAppletClient.java + modification du listerner de carte : on recherche sur tous les lecteurs la carte qui poss?\195?\168de notre applet

C'est en bonne voie, mais j'ai un nouveau pb ce soir : mon code ne veux plus s'instancier.. Ce doit etre une connerie. Je regarderais a tete reposee plus tard

Pour memoire : pour la recherche des objets connus, il nous faut lister les obj connus du service de nommage et on limite les objets securises aux objets enregistres aupres du service de nommage (Matt et/ou Denis : on en reparlera qd vous lirez ce commit et si vou voulez vous repenchez sur le pb)

Modified: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jar
===================================================================
(Binary files differ)

Modified: members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca
===================================================================
--- members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca	2005-02-25 20:55:20 UTC (rev 43)
+++ members/jguers/TestCard/applets/de/berlios/jmds/test/javacard/test.jca	2005-02-26 22:55:15 UTC (rev 44)
@@ -1,5 +1,5 @@
 // converted by version 1.3
-// on Fri Feb 25 00:46:14 CET 2005
+// on Sat Feb 26 23:17:38 CET 2005
 
 .package de/berlios/jmds/test {
 	.aid 0x11:0x22:0x33:0x44:0x55:0x66;

Modified: trunk/.classpath
===================================================================
--- trunk/.classpath	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/.classpath	2005-02-26 22:55:15 UTC (rev 44)
@@ -10,5 +10,6 @@
 	<classpathentry kind="lib" path="lib/commons-configuration-1.1RC1.jar"/>
 	<classpathentry kind="lib" path="lib/commons-logging-1.0.4.jar"/>
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre1.5.0"/>
+	<classpathentry kind="lib" path="lib/jc_api_212.jar"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.ijc
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jar
===================================================================
(Binary files differ)

Modified: trunk/applet/de/berlios/jmds/applet/javacard/applet.jca
===================================================================
--- trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/applet/de/berlios/jmds/applet/javacard/applet.jca	2005-02-26 22:55:15 UTC (rev 44)
@@ -1,5 +1,5 @@
 // converted by version 1.3
-// on Fri Feb 25 01:23:51 CET 2005
+// on Sat Feb 26 23:44:50 CET 2005
 
 .package de/berlios/jmds/applet {
 	.aid 0x11:0x22:0x33:0x44:0x55:0x66;
@@ -8,10 +8,11 @@
 	.imports {
 		0xA0:0x0:0x0:0x0:0x62:0x1:0x1 1.0;		//javacard/framework
 		0xA0:0x0:0x0:0x0:0x62:0x1:0x2 1.1;		//javacard/security
+		0xA0:0x0:0x0:0x0:0x62:0x2:0x1 1.1;		//javacardx/crypto
 	}
 
 	.applet {
-		0x11:0x22:0x33:0x44:0x55:0x66:0x77 SCApplet;
+		0x11:0x22:0x33:0x44:0x55:0x66:0x77 SCAppletWithKey;
 	}
 
 	.constantPool {
@@ -24,7 +25,7 @@
 		// 3
 		instanceFieldRef byte SCApplet/key;
 		// 4
-		instanceFieldRef byte[] SCAppletWithKey/buffer;
+		instanceFieldRef byte[] SCAppletWithKey/privateCode;
 		// 5
 		instanceFieldRef byte[] SCAppletWithKey/code;
 		// 6
@@ -36,59 +37,67 @@
 		// 9
 		instanceFieldRef 1.8 SCAppletWithKey/sessionKey;
 		// 10
-		staticMethodRef SCApplet/encode(Ljavacard/framework/APDU;)V;
-			.descriptor	Ljavacard/framework/APDU;	0.10;
-
+		instanceFieldRef 2.1 SCAppletWithKey/cipher;
 		// 11
-		staticMethodRef SCApplet/getEncode(Ljavacard/framework/APDU;)V;
-			.descriptor	Ljavacard/framework/APDU;	0.10;
-
+		instanceFieldRef byte[] SCAppletWithKey/buffer;
 		// 12
-		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
-		// 13
 		virtualMethodRef 0.10.6()S;		// javacard/framework/APDU.setIncomingAndReceive()S
-		// 14
+		// 13
 		virtualMethodRef 1.14.1([BSS)V;		// javacard/security/RandomData.generateData([BSS)V
-		// 15
+		// 14
 		virtualMethodRef 0.10.7()S;		// javacard/framework/APDU.setOutgoing()S
-		// 16
+		// 15
 		virtualMethodRef 0.10.9(S)V;		// javacard/framework/APDU.setOutgoingLength(S)V
-		// 17
+		// 16
 		virtualMethodRef 0.10.5([BSS)V;		// javacard/framework/APDU.sendBytesLong([BSS)V
-		// 18
+		// 17
 		staticMethodRef 0.3.0()V;		// javacard/framework/Applet.<init>()V
-		// 19
+		// 18
 		staticMethodRef 1.14.0(B)Ljavacard/security/RandomData;;		// javacard/security/RandomData.getInstance(B)Ljavacard/security/RandomData;
 			.descriptor	Ljavacard/security/RandomData;	1.14;
 
-		// 20
+		// 19
 		virtualMethodRef 0.3.1()V;		// javacard/framework/Applet.register()V
-		// 21
+		// 20
 		staticMethodRef 1.13.0(BSZ)Ljavacard/security/Key;;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
 			.descriptor	Ljavacard/security/Key;	1.0;
 
-		// 22
+		// 21
 		classRef 1.8;		// javacard/security/RSAPrivateKey
+		// 22
+		classRef SCApplet;
 		// 23
-		classRef SCAppletWithKey;
+		staticFieldRef byte[] SCAppletWithKey/rsaPrivateKey;
 		// 24
 		classRef 1.9;		// javacard/security/RSAPublicKey
 		// 25
-		staticMethodRef SCAppletWithKey/<init>()V;
+		staticMethodRef SCApplet/<init>()V;
 		// 26
 		virtualMethodRef 0.10.1()[B;		// javacard/framework/APDU.getBuffer()[B
 		// 27
-		classRef SCApplet;
+		staticMethodRef 2.1.0(BZ)Ljavacardx/crypto/Cipher;;		// javacardx/crypto/Cipher.getInstance(BZ)Ljavacardx/crypto/Cipher;
+			.descriptor	Ljavacardx/crypto/Cipher;	2.1;
+
 		// 28
-		staticMethodRef SCApplet/<init>()V;
-		// 29
-		staticMethodRef SCAppletWithKey/encode(Ljavacard/framework/APDU;)V;
+		staticMethodRef SCApplet/encode(Ljavacard/framework/APDU;)V;
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
+		// 29
+		classRef SCAppletWithKey;
 		// 30
-		staticMethodRef SCAppletWithKey/getEncode(Ljavacard/framework/APDU;)V;
+		staticMethodRef SCAppletWithKey/<init>()V;
+		// 31
+		staticMethodRef 0.7.1(S)V;		// javacard/framework/ISOException.throwIt(S)V
+		// 32
+		staticMethodRef SCAppletWithKey/encode(Ljavacard/framework/APDU;)V;
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
+		// 33
+		virtualMethodRef 2.1.3(Ljavacard/security/Key;B)V;		// javacardx/crypto/Cipher.init(Ljavacard/security/Key;B)V
+			.descriptor	Ljavacard/security/Key;	1.0;
+
+		// 34
+		virtualMethodRef 2.1.1([BSS[BS)S;		// javacardx/crypto/Cipher.doFinal([BSS[BS)S
 	}
 
 	.class public SCApplet 0 extends 0.3 {		// extends javacard/framework/Applet
@@ -126,7 +135,7 @@
 			.locals 0;
 
 				L0:	aload_0;
-					invokespecial 18;		// javacard/framework/Applet.<init>()V
+					invokespecial 17;		// javacard/framework/Applet.<init>()V
 					aload_0;
 					bspush 32;
 					newarray 11;
@@ -137,13 +146,13 @@
 					putfield_a 1;		// reference de/berlios/jmds/applet/SCApplet.code
 					aload_0;
 					sconst_2;
-					invokestatic 19;		// javacard/security/RandomData.getInstance(B)Ljavacard/security/RandomData;
+					invokestatic 18;		// javacard/security/RandomData.getInstance(B)Ljavacard/security/RandomData;
 					putfield_a 2;		// reference de/berlios/jmds/applet/SCApplet.randomer
 					aload_0;
 					sconst_0;
 					putfield_b 3;		// byte de/berlios/jmds/applet/SCApplet.key
 					aload_0;
-					invokevirtual 20;		// javacard/framework/Applet.register()V
+					invokevirtual 19;		// javacard/framework/Applet.register()V
 					return;
 		}
 
@@ -151,46 +160,42 @@
 			.stack 1;
 			.locals 0;
 
-				L0:	new 23;		// de/berlios/jmds/applet/SCAppletWithKey
-					invokespecial 25;		// de/berlios/jmds/applet/SCAppletWithKey.<init>()V
+				L0:	new 22;		// de/berlios/jmds/applet/SCApplet
+					invokespecial 25;		// de/berlios/jmds/applet/SCApplet.<init>()V
 					return;
 		}
 
 		.method public process(Ljavacard/framework/APDU;)V 7 {
 			.stack 2;
-			.locals 1;
+			.locals 0;
 
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
-				L0:	aload_1;
+				L0:	aload_0;
+					aload_1;
 					invokevirtual 26;		// javacard/framework/APDU.getBuffer()[B
-					astore_2;
-					aload_2;
+					putfield_a 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
+					getfield_a_this 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
 					sconst_0;
 					baload;
 					bspush 105;
-					if_scmpne L8;
-				L1:	aload_2;
+					if_scmpne L6;
+				L1:	getfield_a_this 0;		// reference de/berlios/jmds/applet/SCApplet.buffer
 					sconst_1;
 					baload;
-					slookupswitch L7 5 16 L2 17 L3 48 L4 51 L5 119 L6;
+					slookupswitch L5 3 16 L2 48 L3 119 L4;
 				L2:	aload_0;
 					aload_1;
-					invokespecial 10;		// de/berlios/jmds/applet/SCApplet.encode(Ljavacard/framework/APDU;)V
-					goto L9;
-				L3:	aload_0;
-					aload_1;
-					invokespecial 11;		// de/berlios/jmds/applet/SCApplet.getEncode(Ljavacard/framework/APDU;)V
-					goto L9;
-				L4:	goto L9;
-				L5:	goto L9;
-				L6:	goto L9;
-				L7:	sspush 27904;
-					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
-					goto L9;
-				L8:	sspush 28160;
-					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
-				L9:	return;
+					invokespecial 28;		// de/berlios/jmds/applet/SCApplet.encode(Ljavacard/framework/APDU;)V
+					goto L7;
+				L3:	goto L7;
+				L4:	goto L7;
+				L5:	sspush 27904;
+					invokestatic 31;		// javacard/framework/ISOException.throwIt(S)V
+					goto L7;
+				L6:	sspush 28160;
+					invokestatic 31;		// javacard/framework/ISOException.throwIt(S)V
+				L7:	return;
 		}
 
 		.method private encode(Ljavacard/framework/APDU;)V {
@@ -200,13 +205,13 @@
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
 				L0:	aload_1;
-					invokevirtual 13;		// javacard/framework/APDU.setIncomingAndReceive()S
+					invokevirtual 12;		// javacard/framework/APDU.setIncomingAndReceive()S
 					sstore_2;
 					getfield_a_this 2;		// reference de/berlios/jmds/applet/SCApplet.randomer
 					getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
 					sconst_0;
 					bspush 32;
-					invokevirtual 14;		// javacard/security/RandomData.generateData([BSS)V
+					invokevirtual 13;		// javacard/security/RandomData.generateData([BSS)V
 					sconst_0;
 					sstore_3;
 					goto L2;
@@ -224,31 +229,22 @@
 				L2:	sload_3;
 					sload_2;
 					if_scmplt L1;
-				L3:	return;
-		}
-
-		.method private getEncode(Ljavacard/framework/APDU;)V {
-			.stack 4;
-			.locals 1;
-
-			.descriptor	Ljavacard/framework/APDU;	0.10;
-
-				L0:	aload_1;
-					invokevirtual 15;		// javacard/framework/APDU.setOutgoing()S
-					sstore_2;
-					sload_2;
+				L3:	aload_1;
+					invokevirtual 14;		// javacard/framework/APDU.setOutgoing()S
+					sstore_3;
+					sload_3;
 					bspush 32;
-					if_scmpge L2;
-				L1:	sspush 26368;
-					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
-				L2:	aload_1;
+					if_scmpge L5;
+				L4:	sspush 26368;
+					invokestatic 31;		// javacard/framework/ISOException.throwIt(S)V
+				L5:	aload_1;
 					bspush 32;
-					invokevirtual 16;		// javacard/framework/APDU.setOutgoingLength(S)V
+					invokevirtual 15;		// javacard/framework/APDU.setOutgoingLength(S)V
 					aload_1;
 					getfield_a_this 1;		// reference de/berlios/jmds/applet/SCApplet.code
 					sconst_0;
 					bspush 32;
-					invokevirtual 17;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					invokevirtual 16;		// javacard/framework/APDU.sendBytesLong([BSS)V
 					return;
 		}
 
@@ -258,17 +254,19 @@
 
 		.fields {
 			private byte[] buffer 0;		// [B
-			private byte[] code 1;		// [B
-			private 1.8 userKey 2;		// Ljavacard/security/RSAPrivateKey;
-			private 1.9 serverKey 3;		// Ljavacard/security/RSAPublicKey;
-			private 1.8 sessionKey 4;		// Ljavacard/security/RSAPrivateKey;
-			private short messLength 5;		// S
+			private byte[] privateCode 1;		// [B
+			private byte[] code 2;		// [B
+			private 1.8 userKey 3;		// Ljavacard/security/RSAPrivateKey;
+			private 1.9 serverKey 4;		// Ljavacard/security/RSAPublicKey;
+			private 1.8 sessionKey 5;		// Ljavacard/security/RSAPrivateKey;
+			private 2.1 cipher 6;		// Ljavacardx/crypto/Cipher;
+			private short messLength 7;		// S
 			private static final byte CLA_SECURITY = 105;		// B
 			private static final byte CODE = 16;		// B
-			private static final byte GET_CODE = 32;		// B
 			private static final byte DECODE = 48;		// B
-			private static final byte GET_DECODE = 64;		// B
 			private static final short BUFFER_LENGTH = 255;		// S
+			static byte[] rsaPrivateKey = {-62,1,5,-62,65,0,-59,-41,32,40,-6,-89,-111,85,35,-30,13,-28,40,124,101,-73,24,89,-39,13,-70,-25,-49,106,-15,-29,16,-61,126,72,13,-68,118,123,4,-122,-74,127,-51,108,-124,26,11,-122,-71,-106,-86,-125,104,99,60,77,67,-124,-72,109,72,-86,-60,-55,27,80,71,73,-62,65,0,-55,94,74,8,14,-36,-91,69,-112,28,82,-8,62,-80,107,-113,-49,-22,-88,-11,30,-83,-45,-126,82,48,67,4,-100,37,99,-121,55,32,100,63,22,-80,80,-52,56,6,27,-33,-26,120,-61,-103,-9,-60,63,-107,-127,-32,119,92,-93,120,-72,-100,-115,-101,70,93,-62,65,0,127,-34,23,54,-38,24,30,-17,-48,80,-67,44,87,-66,16,123,8,125,-58,-57,-11,118,-94,89,53,125,-22,-80,115,-26,81,-21,-45,7,-35,115,86,-117,118,70,63,-82,10,-71,-93,-29,13,113,-5,-2,85,2,-10,-74,77,-62,121,100,-3,40,-69,19,35,-78,-62,65,0,-93,-115,-93,-19,-100,-62,24,-72,-99,16,-115,81,88,82,-10,-73,-75,-18,-39,44,-85,-98,101,-17,-48,-122,89,-34,115,-80,87,-126,-67,36,23,-22,-46,70,-73,105,-123,-112,14,-123,83,58,6,62,-38,118,103,108,-84,107,-75,!
 23,-53,98,57,-118,-44,4,-70,-39,-62,65,0,68,3,3,-80,27,12,-19,9,68,-74,60,83,-70,32,-82,3,-95,-82,-39,40,9,23,-98,-61,122,108,-16,-123,-61,19,97,-67,78,-94,51,25,-105,-39,47,64,-6,127,29,-75,14,-53,-91,13,0,-63,24,-44,-81,76,24,36,-126,-42,8,76,96,11,-100,-59};		// [B
+			static byte[] rsaPublicKey = {-63,1,5,-64,-127,0,-101,-98,-58,116,101,90,-68,-70,-58,-80,93,60,36,60,-112,89,125,91,109,3,123,-83,-102,-76,88,-2,-128,34,-20,-16,-85,-124,-7,7,-124,-111,-30,8,-90,-101,-19,-41,69,-55,-35,-65,-8,122,-117,-31,23,-51,61,-45,111,-78,89,12,14,71,11,-114,-125,-59,15,-81,-40,33,12,-47,11,-76,36,-115,102,-84,-109,-93,-28,97,-17,38,80,28,48,-19,115,-15,-110,-40,44,-58,56,-44,109,-127,72,43,-52,66,-8,96,97,-83,-115,127,-115,109,-121,-65,125,28,97,43,-64,66,71,-37,-35,-55,63,7,35,-31,61,-38,-37,-123,-64,4,0,1,0,1};		// [B
 		}
 
 		.publicMethodTable 7 {
@@ -290,11 +288,11 @@
 			.locals 0;
 
 				L0:	aload_0;
-					invokespecial 18;		// javacard/framework/Applet.<init>()V
+					invokespecial 17;		// javacard/framework/Applet.<init>()V
 					aload_0;
 					sspush 255;
 					newarray 11;
-					putfield_a 4;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
+					putfield_a 4;		// reference de/berlios/jmds/applet/SCAppletWithKey.privateCode
 					aload_0;
 					sspush 255;
 					newarray 11;
@@ -306,25 +304,36 @@
 					sconst_5;
 					sspush 512;
 					sconst_1;
-					invokestatic 21;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
-					checkcast 0 22;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
+					invokestatic 20;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					checkcast 0 21;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
 					putfield_a 7;		// reference de/berlios/jmds/applet/SCAppletWithKey.userKey
+					getfield_a_this 7;		// reference de/berlios/jmds/applet/SCAppletWithKey.userKey
+					getstatic_a 23;		// reference de/berlios/jmds/applet/SCAppletWithKey.rsaPrivateKey
+					sconst_5;
+					bspush 12;
+					invokeinterface 4 21 6;		// javacard/security/RSAPrivateKey
+					getfield_a_this 7;		// reference de/berlios/jmds/applet/SCAppletWithKey.userKey
+					getstatic_a 23;		// reference de/berlios/jmds/applet/SCAppletWithKey.rsaPrivateKey
+					bspush 127;
+					bspush 6;
+					invokeinterface 4 21 7;		// javacard/security/RSAPrivateKey
 					aload_0;
 					sconst_4;
 					sspush 512;
 					sconst_1;
-					invokestatic 21;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
+					invokestatic 20;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
 					checkcast 0 24;		// T_CLASSORINTERFACE javacard/security/RSAPublicKey
 					putfield_a 8;		// reference de/berlios/jmds/applet/SCAppletWithKey.serverKey
 					aload_0;
-					sconst_5;
-					sspush 512;
-					sconst_1;
-					invokestatic 21;		// javacard/security/KeyBuilder.buildKey(BSZ)Ljavacard/security/Key;
-					checkcast 0 22;		// T_CLASSORINTERFACE javacard/security/RSAPrivateKey
+					aconst_null;
 					putfield_a 9;		// reference de/berlios/jmds/applet/SCAppletWithKey.sessionKey
 					aload_0;
-					invokevirtual 20;		// javacard/framework/Applet.register()V
+					bspush 11;
+					sconst_0;
+					invokestatic 27;		// javacardx/crypto/Cipher.getInstance(BZ)Ljavacardx/crypto/Cipher;
+					putfield_a 10;		// reference de/berlios/jmds/applet/SCAppletWithKey.cipher
+					aload_0;
+					invokevirtual 19;		// javacard/framework/Applet.register()V
 					return;
 		}
 
@@ -332,91 +341,74 @@
 			.stack 1;
 			.locals 0;
 
-				L0:	new 27;		// de/berlios/jmds/applet/SCApplet
-					invokespecial 28;		// de/berlios/jmds/applet/SCApplet.<init>()V
+				L0:	new 29;		// de/berlios/jmds/applet/SCAppletWithKey
+					invokespecial 30;		// de/berlios/jmds/applet/SCAppletWithKey.<init>()V
 					return;
 		}
 
 		.method public process(Ljavacard/framework/APDU;)V 7 {
 			.stack 2;
-			.locals 1;
+			.locals 0;
 
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
-				L0:	aload_1;
+				L0:	aload_0;
+					aload_1;
 					invokevirtual 26;		// javacard/framework/APDU.getBuffer()[B
-					astore_2;
-					aload_2;
+					putfield_a 11;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
+					getfield_a_this 11;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
 					sconst_0;
 					baload;
 					bspush 105;
-					if_scmpne L5;
-				L1:	aload_2;
+					if_scmpne L3;
+				L1:	getfield_a_this 11;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
 					sconst_1;
 					baload;
-					slookupswitch L5 4 16 L2 32 L3 48 L4 64 L5;
+					slookupswitch L3 2 16 L2 48 L3;
 				L2:	aload_0;
 					aload_1;
-					invokespecial 29;		// de/berlios/jmds/applet/SCAppletWithKey.encode(Ljavacard/framework/APDU;)V
-					goto L5;
-				L3:	aload_0;
-					aload_1;
-					invokespecial 30;		// de/berlios/jmds/applet/SCAppletWithKey.getEncode(Ljavacard/framework/APDU;)V
-					goto L5;
-				L4:	goto L5;
-				L5:	return;
+					invokespecial 32;		// de/berlios/jmds/applet/SCAppletWithKey.encode(Ljavacard/framework/APDU;)V
+					goto L3;
+				L3:	return;
 		}
 
 		.method private encode(Ljavacard/framework/APDU;)V {
-			.stack 5;
-			.locals 2;
+			.stack 6;
+			.locals 3;
 
 			.descriptor	Ljavacard/framework/APDU;	0.10;
 
-				L0:	aload_0;
-					aload_1;
-					invokevirtual 13;		// javacard/framework/APDU.setIncomingAndReceive()S
-					putfield_s 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
-					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
-					newarray 11;
-					astore_2;
-					sconst_0;
+				L0:	aload_1;
+					invokevirtual 12;		// javacard/framework/APDU.setIncomingAndReceive()S
+					sstore_2;
+					getfield_a_this 10;		// reference de/berlios/jmds/applet/SCAppletWithKey.cipher
+					getfield_a_this 7;		// reference de/berlios/jmds/applet/SCAppletWithKey.userKey
+					sconst_2;
+					invokevirtual 33;		// javacardx/crypto/Cipher.init(Ljavacard/security/Key;B)V
+					getfield_a_this 10;		// reference de/berlios/jmds/applet/SCAppletWithKey.cipher
+					getfield_a_this 11;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
+					sconst_5;
+					sload_2;
+					getfield_a_this 11;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
+					sconst_5;
+					invokevirtual 34;		// javacardx/crypto/Cipher.doFinal([BSS[BS)S
 					sstore_3;
-					goto L2;
-				L1:	aload_2;
+					aload_1;
+					invokevirtual 14;		// javacard/framework/APDU.setOutgoing()S
+					sstore 4;
+					sload 4;
 					sload_3;
-					getfield_a_this 4;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
-					sload_3;
-					sconst_5;
-					sadd;
-					baload;
-					bspush 16;
-					sand;
-					bastore;
-					sinc 3 1;
-				L2:	sload_3;
-					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
-					if_scmplt L1;
-				L3:	return;
-		}
-
-		.method private getEncode(Ljavacard/framework/APDU;)V {
-			.stack 4;
-			.locals 0;
-
-			.descriptor	Ljavacard/framework/APDU;	0.10;
-
-				L0:	aload_1;
-					invokevirtual 15;		// javacard/framework/APDU.setOutgoing()S
-					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
 					if_scmpge L2;
 				L1:	sspush 26368;
-					invokestatic 12;		// javacard/framework/ISOException.throwIt(S)V
+					invokestatic 31;		// javacard/framework/ISOException.throwIt(S)V
 				L2:	aload_1;
-					getfield_a_this 5;		// reference de/berlios/jmds/applet/SCAppletWithKey.code
-					sconst_0;
-					getfield_s_this 6;		// short de/berlios/jmds/applet/SCAppletWithKey.messLength
-					invokevirtual 17;		// javacard/framework/APDU.sendBytesLong([BSS)V
+					sload_3;
+					invokevirtual 15;		// javacard/framework/APDU.setOutgoingLength(S)V
+					aload_1;
+					getfield_a_this 11;		// reference de/berlios/jmds/applet/SCAppletWithKey.buffer
+					sconst_5;
+					sload_3;
+					invokevirtual 16;		// javacard/framework/APDU.sendBytesLong([BSS)V
 					return;
 		}
 

Modified: trunk/generator/SecurityApplet.pmf
===================================================================
--- trunk/generator/SecurityApplet.pmf	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/generator/SecurityApplet.pmf	2005-02-26 22:55:15 UTC (rev 44)
@@ -7,5 +7,5 @@
 ClassDir=d:\1G2K - SOPRA\IR3\Corba\jmds\SVN\trunk\classes
 [Applets]
 NumApplets=1
-Applet1=SCApplet.class
+Applet1=SCAppletWithKey.class
 Applet1AID=11223344556677

Added: trunk/lib/jc_api_212.jar
===================================================================
(Binary files differ)


Property changes on: trunk/lib/jc_api_212.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/src/de/berlios/jmds/applet/SCApplet.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/SCApplet.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/src/de/berlios/jmds/applet/SCApplet.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -52,7 +52,7 @@
      * @see javacard.framework.Applet#install(byte[], short, byte)
      */
     public static void install(byte[] bArray, short bOffset, byte bLength) {
-        new SCAppletWithKey();
+        new SCApplet();
     }
 
     /**
@@ -64,7 +64,7 @@
      * @see javacard.framework.Applet#process(javacard.framework.APDU)
      */
     public void process(APDU apdu) throws ISOException {
-        byte[] buffer = apdu.getBuffer();
+        buffer = apdu.getBuffer();
 
         if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
             switch (buffer[ISO7816.OFFSET_INS]) {
@@ -72,16 +72,9 @@
                     encode(apdu);
                     break;
                 
-                case INS_GET_CODE:
-                    getEncode(apdu);
-                    break;
-
                 case INS_DECODE:
                     break;
                     
-                case INS_GET_DECODE:
-                    break;
-                    
                 case INS_SET_USER_KEY:
                     break;
                     
@@ -100,10 +93,7 @@
         for (short i = 0; i < messLength; i++) {
             code[(short)(i + key)] = buffer[(short)(i + ISO7816.OFFSET_CDATA)];
         }
-    }
-    
-    private void getEncode(APDU apdu)
-    {
+        
         short Le = apdu.setOutgoing();
         // Verification que Le >= Lc (taille des donn?es envoy?es)
         if (Le < BUFFER_LENGTH)

Added: trunk/src/de/berlios/jmds/applet/SCAppletWithKey.java
===================================================================
--- trunk/src/de/berlios/jmds/applet/SCAppletWithKey.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/src/de/berlios/jmds/applet/SCAppletWithKey.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -0,0 +1,190 @@
+/*
+ * Created on 8 f?vr. 2005
+ * by J?r?me GUERS
+ * Copyright: GPL - UMLV(FR) - 2004/2005
+ */
+package de.berlios.jmds.applet;
+
+import javacard.framework.APDU;
+import javacard.framework.Applet;
+import javacard.framework.ISOException;
+import javacard.framework.ISO7816;
+import javacard.security.KeyBuilder;
+import javacard.security.RSAPrivateKey;
+import javacard.security.RSAPublicKey;
+import javacardx.crypto.*;
+
+/**
+ * DOCME
+ * 
+ * @version 0.1
+ * 
+ * @author J?r?me GUERS
+ */
+public class SCAppletWithKey extends Applet {
+
+    private final static byte CLA_SECURITY = (byte) 0x69;
+    private final static byte CODE = (byte) 0x10;
+    private final static byte DECODE = (byte) 0x30;
+
+    private final static short BUFFER_LENGTH = (short) 255;
+
+    private byte[] buffer;
+    private byte[] privateCode;
+    private byte[] code;
+    private short messLength;
+    
+    private RSAPrivateKey userKey;
+    private RSAPublicKey serverKey;
+    private RSAPrivateKey sessionKey;
+    private Cipher cipher;
+    
+//  Private Key definition
+    static byte[] rsaPrivateKey = //Note this is 338 bytes long and is a 1024 bit CRT formatted Private key
+          {
+          (byte)0xC2, (byte)0x01, (byte)0x05,
+          (byte)0xC2, (byte)0x41, (byte)0x00,
+          (byte)0xC5, (byte)0xD7, (byte)0x20, (byte)0x28, (byte)0xFA, (byte)0xA7, (byte)0x91, (byte)0x55, 
+          (byte)0x23, (byte)0xE2, (byte)0x0D, (byte)0xE4, (byte)0x28, (byte)0x7C, (byte)0x65, (byte)0xB7,
+          (byte)0x18, (byte)0x59, (byte)0xD9, (byte)0x0D, (byte)0xBA, (byte)0xE7, (byte)0xCF, (byte)0x6A, 
+          (byte)0xF1, (byte)0xE3, (byte)0x10, (byte)0xC3, (byte)0x7E, (byte)0x48, (byte)0x0D, (byte)0xBC,
+          (byte)0x76, (byte)0x7B, (byte)0x04, (byte)0x86, (byte)0xB6, (byte)0x7F, (byte)0xCD, (byte)0x6C, 
+          (byte)0x84, (byte)0x1A, (byte)0x0B, (byte)0x86, (byte)0xB9, (byte)0x96, (byte)0xAA, (byte)0x83,
+          (byte)0x68, (byte)0x63, (byte)0x3C, (byte)0x4D, (byte)0x43, (byte)0x84, (byte)0xB8, (byte)0x6D, 
+          (byte)0x48, (byte)0xAA, (byte)0xC4, (byte)0xC9, (byte)0x1B, (byte)0x50, (byte)0x47, (byte)0x49,
+          (byte)0xC2, (byte)0x41, (byte)0x00,
+          (byte)0xC9, (byte)0x5E, (byte)0x4A, (byte)0x08, (byte)0x0E, (byte)0xDC, (byte)0xA5, (byte)0x45, 
+          (byte)0x90, (byte)0x1C, (byte)0x52, (byte)0xF8, (byte)0x3E, (byte)0xB0, (byte)0x6B, (byte)0x8F,
+          (byte)0xCF, (byte)0xEA, (byte)0xA8, (byte)0xF5, (byte)0x1E, (byte)0xAD, (byte)0xD3, (byte)0x82, 
+          (byte)0x52, (byte)0x30, (byte)0x43, (byte)0x04, (byte)0x9C, (byte)0x25, (byte)0x63, (byte)0x87,
+          (byte)0x37, (byte)0x20, (byte)0x64, (byte)0x3F, (byte)0x16, (byte)0xB0, (byte)0x50, (byte)0xCC, 
+          (byte)0x38, (byte)0x06, (byte)0x1B, (byte)0xDF, (byte)0xE6, (byte)0x78, (byte)0xC3, (byte)0x99,
+          (byte)0xF7, (byte)0xC4, (byte)0x3F, (byte)0x95, (byte)0x81, (byte)0xE0, (byte)0x77, (byte)0x5C, 
+          (byte)0xA3, (byte)0x78, (byte)0xB8, (byte)0x9C, (byte)0x8D, (byte)0x9B, (byte)0x46, (byte)0x5D,
+          (byte)0xC2, (byte)0x41, (byte)0x00,
+          (byte)0x7F, (byte)0xDE, (byte)0x17, (byte)0x36, (byte)0xDA, (byte)0x18, (byte)0x1E, (byte)0xEF, 
+          (byte)0xD0, (byte)0x50, (byte)0xBD, (byte)0x2C, (byte)0x57, (byte)0xBE, (byte)0x10, (byte)0x7B,
+          (byte)0x08, (byte)0x7D, (byte)0xC6, (byte)0xC7, (byte)0xF5, (byte)0x76, (byte)0xA2, (byte)0x59, 
+          (byte)0x35, (byte)0x7D, (byte)0xEA, (byte)0xB0, (byte)0x73, (byte)0xE6, (byte)0x51, (byte)0xEB,
+          (byte)0xD3, (byte)0x07, (byte)0xDD, (byte)0x73, (byte)0x56, (byte)0x8B, (byte)0x76, (byte)0x46, 
+          (byte)0x3F, (byte)0xAE, (byte)0x0A, (byte)0xB9, (byte)0xA3, (byte)0xE3, (byte)0x0D, (byte)0x71,
+          (byte)0xFB, (byte)0xFE, (byte)0x55, (byte)0x02, (byte)0xF6, (byte)0xB6, (byte)0x4D, (byte)0xC2, 
+          (byte)0x79, (byte)0x64, (byte)0xFD, (byte)0x28, (byte)0xBB, (byte)0x13, (byte)0x23, (byte)0xB2,
+          (byte)0xC2, (byte)0x41, (byte)0x00,
+          (byte)0xA3, (byte)0x8D, (byte)0xA3, (byte)0xED, (byte)0x9C, (byte)0xC2, (byte)0x18, (byte)0xB8, 
+          (byte)0x9D, (byte)0x10, (byte)0x8D, (byte)0x51, (byte)0x58, (byte)0x52, (byte)0xF6, (byte)0xB7,
+          (byte)0xB5, (byte)0xEE, (byte)0xD9, (byte)0x2C, (byte)0xAB, (byte)0x9E, (byte)0x65, (byte)0xEF, 
+          (byte)0xD0, (byte)0x86, (byte)0x59, (byte)0xDE, (byte)0x73, (byte)0xB0, (byte)0x57, (byte)0x82,
+          (byte)0xBD, (byte)0x24, (byte)0x17, (byte)0xEA, (byte)0xD2, (byte)0x46, (byte)0xB7, (byte)0x69, 
+          (byte)0x85, (byte)0x90, (byte)0x0E, (byte)0x85, (byte)0x53, (byte)0x3A, (byte)0x06, (byte)0x3E,
+          (byte)0xDA, (byte)0x76, (byte)0x67, (byte)0x6C, (byte)0xAC, (byte)0x6B, (byte)0xB5, (byte)0x17, 
+          (byte)0xCB, (byte)0x62, (byte)0x39, (byte)0x8A, (byte)0xD4, (byte)0x04, (byte)0xBA, (byte)0xD9,
+          (byte)0xC2, (byte)0x41, (byte)0x00,
+          (byte)0x44, (byte)0x03, (byte)0x03, (byte)0xB0, (byte)0x1B, (byte)0x0C, (byte)0xED, (byte)0x09, 
+          (byte)0x44, (byte)0xB6, (byte)0x3C, (byte)0x53, (byte)0xBA, (byte)0x20, (byte)0xAE, (byte)0x03,
+          (byte)0xA1, (byte)0xAE, (byte)0xD9, (byte)0x28, (byte)0x09, (byte)0x17, (byte)0x9E, (byte)0xC3, 
+          (byte)0x7A, (byte)0x6C, (byte)0xF0, (byte)0x85, (byte)0xC3, (byte)0x13, (byte)0x61, (byte)0xBD,
+          (byte)0x4E, (byte)0xA2, (byte)0x33, (byte)0x19, (byte)0x97, (byte)0xD9, (byte)0x2F, (byte)0x40, 
+          (byte)0xFA, (byte)0x7F, (byte)0x1D, (byte)0xB5, (byte)0x0E, (byte)0xCB, (byte)0xA5, (byte)0x0D,
+          (byte)0x00, (byte)0xC1, (byte)0x18, (byte)0xD4, (byte)0xAF, (byte)0x4C, (byte)0x18, (byte)0x24, 
+          (byte)0x82, (byte)0xD6, (byte)0x08, (byte)0x4C, (byte)0x60, (byte)0x0B, (byte)0x9C, (byte)0xC5
+          };
+
+//  Public Key definition
+    static byte[] rsaPublicKey = //Note this is 140 bytes long and is a modulus exponent formatted 1024 bit Public key
+          {
+          (byte)0xC1, (byte)0x01, (byte)0x05,
+          (byte)0xC0, (byte)0x81, (byte)0x00,
+          (byte)0x9B, (byte)0x9E, (byte)0xC6, (byte)0x74, (byte)0x65, (byte)0x5A, (byte)0xBC, (byte)0xBA, 
+          (byte)0xC6, (byte)0xB0, (byte)0x5D, (byte)0x3C, (byte)0x24, (byte)0x3C, (byte)0x90, (byte)0x59,
+          (byte)0x7D, (byte)0x5B, (byte)0x6D, (byte)0x03, (byte)0x7B, (byte)0xAD, (byte)0x9A, (byte)0xB4, 
+          (byte)0x58, (byte)0xFE, (byte)0x80, (byte)0x22, (byte)0xEC, (byte)0xF0, (byte)0xAB, (byte)0x84,
+          (byte)0xF9, (byte)0x07, (byte)0x84, (byte)0x91, (byte)0xE2, (byte)0x08, (byte)0xA6, (byte)0x9B, 
+          (byte)0xED, (byte)0xD7, (byte)0x45, (byte)0xC9, (byte)0xDD, (byte)0xBF, (byte)0xF8, (byte)0x7A,
+          (byte)0x8B, (byte)0xE1, (byte)0x17, (byte)0xCD, (byte)0x3D, (byte)0xD3, (byte)0x6F, (byte)0xB2, 
+          (byte)0x59, (byte)0x0C, (byte)0x0E, (byte)0x47, (byte)0x0B, (byte)0x8E, (byte)0x83, (byte)0xC5, 
+          (byte)0x0F, (byte)0xAF, (byte)0xD8, (byte)0x21, (byte)0x0C, (byte)0xD1, (byte)0x0B, (byte)0xB4, 
+          (byte)0x24, (byte)0x8D, (byte)0x66, (byte)0xAC, (byte)0x93, (byte)0xA3, (byte)0xE4, (byte)0x61, 
+          (byte)0xEF, (byte)0x26, (byte)0x50, (byte)0x1C, (byte)0x30, (byte)0xED, (byte)0x73, (byte)0xF1, 
+          (byte)0x92, (byte)0xD8, (byte)0x2C, (byte)0xC6, (byte)0x38, (byte)0xD4, (byte)0x6D, (byte)0x81, 
+          (byte)0x48, (byte)0x2B, (byte)0xCC, (byte)0x42, (byte)0xF8, (byte)0x60, (byte)0x61, (byte)0xAD, 
+          (byte)0x8D, (byte)0x7F, (byte)0x8D, (byte)0x6D, (byte)0x87, (byte)0xBF, (byte)0x7D, (byte)0x1C, 
+          (byte)0x61, (byte)0x2B, (byte)0xC0, (byte)0x42, (byte)0x47, (byte)0xDB, (byte)0xDD, (byte)0xC9, 
+          (byte)0x3F, (byte)0x07, (byte)0x23, (byte)0xE1, (byte)0x3D, (byte)0xDA, (byte)0xDB, (byte)0x85, 
+          (byte)0xC0, (byte)0x04, (byte)0x00,
+          (byte)0x01, (byte)0x00, (byte)0x01,
+          };
+    
+    /**
+     * Constructeur par d?faut
+     */
+    protected SCAppletWithKey() {
+        privateCode = new byte[BUFFER_LENGTH];
+        code = new byte[BUFFER_LENGTH];
+        messLength = (byte) 0;
+        userKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
+        userKey.setExponent(rsaPrivateKey, (short)5, (short) 12);
+        userKey.setModulus(rsaPrivateKey, (short)127, (short) 6);
+        serverKey = (RSAPublicKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PUBLIC, KeyBuilder.LENGTH_RSA_512, true);
+        sessionKey = null;
+
+        cipher = Cipher.getInstance(Cipher.ALG_RSA_ISO9796, false);
+        register();
+    }
+
+    /**
+     * @see javacard.framework.Applet#install(byte[], short, byte)
+     */
+    public static void install(byte[] bArray, short bOffset, byte bLength) {
+        new SCAppletWithKey();
+    }
+
+    /**
+     * M?thode appel?e ? l'arriv?e d'une trame APDU
+     * 
+     * @param apdu
+     * @throws ISOException
+     * 
+     * @see javacard.framework.Applet#process(javacard.framework.APDU)
+     */
+    public void process(APDU apdu) throws ISOException {
+        buffer = apdu.getBuffer();
+
+        if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
+            switch (buffer[ISO7816.OFFSET_INS]) {
+                case CODE:
+                    encode(apdu);
+                    break;
+      
+                case DECODE:
+                    break;
+            }
+        }
+    }
+    
+    private void encode(APDU apdu)
+    {
+        short byteRead = (short)(apdu.setIncomingAndReceive());
+        
+        cipher.init(userKey, Cipher.MODE_ENCRYPT);
+        short outbytes = cipher.doFinal(buffer,(short)ISO7816.OFFSET_CDATA, byteRead, buffer, (short)ISO7816.OFFSET_CDATA);    
+        
+        // Send results
+        short Le = apdu.setOutgoing();
+        if (Le < outbytes)
+            ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
+
+        // indicate the number of bytes in the data field
+        apdu.setOutgoingLength((short)outbytes); 
+        // at offset 0 send 128 byte of data in the buffer
+        apdu.sendBytesLong(buffer, (short)ISO7816.OFFSET_CDATA, (short)outbytes);
+        
+//        messLength = apdu.setIncomingAndReceive();
+//        byte[] requestID = new byte[messLength];
+//        for (short i = 0; i < messLength; i++) {
+//            requestID[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
+//        }
+//        cipher.init(userKey, Cipher.MODE_ENCRYPT);
+//        cipher.doFinal(requestID, (short)0, (short) requestID, )
+    }
+}

Modified: trunk/src/de/berlios/jmds/client/ClientInter.java
===================================================================
--- trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/src/de/berlios/jmds/client/ClientInter.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -14,6 +14,8 @@
 import org.omg.PortableInterceptor.ClientRequestInterceptor;
 import org.omg.PortableInterceptor.ForwardRequest;
 
+import slb.iop.slbException;
+
 /**
  * @author S?bastien GUINCHARD
  * 
@@ -24,39 +26,31 @@
     /**
      * Comment for <code>serialVersionUID</code>
      */
-    private static final long serialVersionUID = 3618417146430765111L;
+    private final static long serialVersionUID = 3618417146430765111L;
+    private final static SCAppletClient SC_APPLET = SCAppletClient.getInstance();
 
     //----------------------------------------------------------//
 	//------------------- PUBLIC METHODS -----------------------//
 	//----------------------------------------------------------//
     
     /**
+     * @throws slbException 
+     * @throws SecurityException 
      * @see org.omg.PortableInterceptor.ClientRequestInterceptorOperations#send_request(org.omg.PortableInterceptor.ClientRequestInfo)
      */
-    public void send_request(ClientRequestInfo ri) throws ForwardRequest {
-        ServiceContext sc = new ServiceContext ();
-        
-        System.out.println("ClientInter.send request: " + ri.operation()
-                + " number: " + ri.request_id());
-        SCAppletClient scApplet = SCAppletClient.getInstance();
+    public void send_request(ClientRequestInfo ri) throws ForwardRequest, SecurityException{
         int id = ri.request_id();
-        byte[] tabId = new Integer(id).toString().getBytes();
-        System.out.println (tabId.length);
+        byte[] tabId = Integer.toString(id).getBytes();
 
-        byte[] tabByteSC = scApplet.code(tabId);
-        
-        //Test affichage
-        for(int i=0; i < tabByteSC.length; i++) {
-        	System.out.print(tabByteSC[i]);
+        try {
+            byte[] tabByteSC = SC_APPLET.code(tabId);
+            
+            ServiceContext sc = new ServiceContext ();
+            sc.context_data = tabByteSC;
+            ri.add_request_service_context(sc,true);
+        } catch (slbException e) {
+            throw new SecurityException("Impossible de coder le message: erreur de communication avec la carte", e);
         }
-   
-        
-        if(tabByteSC == null) {
-        	throw new SecurityException("Impossible de coder le message: Verifier la pr?sence de la carte dans le lecteur");
-        }
-        sc.context_data = tabByteSC;
-        ri.add_request_service_context(sc,true);
-        
     }
 
     /**
@@ -102,5 +96,4 @@
      */
     public void destroy() {
     }
-
 }

Modified: trunk/src/de/berlios/jmds/client/SCAppletClient.java
===================================================================
--- trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/src/de/berlios/jmds/client/SCAppletClient.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -15,198 +15,125 @@
 import slb.iop.IOPEvent;
 import slb.iop.IOPListener;
 import slb.iop.SmartCard;
+import slb.iop.slbException;
 
 /**
  * @author Denis
  * 
  */
 public class SCAppletClient {
-	
-	/** The singleton instance * */
-	private static SCAppletClient INSTANCE = null;
-	
-	
-    private static class jmdsIOPListener implements IOPListener {
 
-        /**
-		 * DOCME
-		 * 
-		 * @param arg0
-		 * 
-		 * @see slb.iop.IOPListener#CardRemoved(slb.iop.IOPEvent)
-		 */
+    /** The singleton instance * */
+    private final static SCAppletClient INSTANCE = new SCAppletClient();
+
+    private final static IOP APPLET_IOP = new IOP();
+    private final static short[] APPLET_AID = {
+            (short) 0x11, (short) 0x22, (short) 0x33, 
+            (short) 0x44, (short) 0x55, (short) 0x66, (short) 0x77 };
+
+    private static SmartCard card = null;
+
+    private static int CLA;
+    private static int INS;
+    private static int P1;
+    private static int P2;
+    private static int[] body;
+    private static int LE;
+
+    private static class jmdsIOPListener implements IOPListener {
         public void CardRemoved(IOPEvent event) {
-            System.out.println("Carte retir?e de ");
-            System.out.println(event.getReaderName());
+            findCard();
         }
 
-        /**
-		 * DOCME
-		 * 
-		 * @param arg0
-		 * 
-		 * @see slb.iop.IOPListener#CardInserted(slb.iop.IOPEvent)
-		 */
         public void CardInserted(IOPEvent event) {
-            System.out.print("Carte ins?r?e dans ");
-            System.out.println(event.getReaderName());
+            findCard();
         }
-        
-        /**
-         * DOCME
-         * 
-         * @param arg0
-         * 
-         * @see slb.iop.IOPListener#ReaderRemoved(slb.iop.IOPEvent)
-         */
+
         public void ReaderRemoved(IOPEvent event) {
-            System.out.println("Lecteur d?connect?");
+            findCard();
         }
 
-        /**
-         * DOCME
-         * 
-         * @param arg0
-         * 
-         * @see slb.iop.IOPListener#ReaderInserted(slb.iop.IOPEvent)
-         */
         public void ReaderInserted(IOPEvent event) {
-            System.out.println("Lecteur connect?");
+            findCard();
         }
     }
 
-	// ----------------------------------------------------------//
-	// ------------------- CONSTRUCTORS -------------------------//
-	// ----------------------------------------------------------//
-	
-	/**
-	 * Constructor
-	 * 
-	 */
-	private SCAppletClient ()
-	{
-        IOP sIOP = new IOP();
+    // ----------------------------------------------------------//
+    // ------------------- CONSTRUCTORS -------------------------//
+    // ----------------------------------------------------------//
+    /**
+     * Constructor
+     * 
+     */
+    private SCAppletClient() {
+        APPLET_IOP.addIOPListener(new jmdsIOPListener());
+    }
 
-        jmdsIOPListener listener = new jmdsIOPListener();
-        sIOP.addIOPListener(listener);
-
-        String[] lstReaders = sIOP.ListReaders();
-
-        for (int i = 0; i < lstReaders.length; i++) {
-            System.out.println(lstReaders[i]);
-        }
-
-        SmartCard card = new SmartCard();
-        if (lstReaders.length > 0) {
-            boolean result = sIOP.Connect(card, lstReaders[0], false);
-            if (result) {
-                System.out.println("Carte connectee");
-
-                
-
-               
-
-                
-        
-            }
-        }
+    // ----------------------------------------------------------//
+    // ------------------- PUBLIC METHODS -----------------------//
+    // ----------------------------------------------------------//
+    /**
+     * To get the singleton instance of LDAP
+     * 
+     * @return the singleton instance of LDAP
+     */
+    public static SCAppletClient getInstance() {
+        return INSTANCE;
     }
-	
-	// ----------------------------------------------------------//
-	// ------------------- PUBLIC METHODS -----------------------//
-	// ----------------------------------------------------------//
 
-	
-	/**
-	 * To get the singleton instance of LDAP
-	 * 
-	 * @return the singleton instance of LDAP
-	 */
-	public static SCAppletClient getInstance ()
-	{
-		if (INSTANCE == null)
-			INSTANCE = new SCAppletClient ();
-		
-		return INSTANCE;
-	}
-	
-	/**
-	 * @param requestId
-	 *            as id of the request message
-	 * @return The array byte which contains the encoding servec context
-	 */
-	public byte[] code (byte[] requestId)
-	{
-		IOP sIOP = new IOP();
+    /**
+     * @param requestId
+     *            as id of the request message
+     * @return The array byte which contains the encoding servec context
+     * @throws slbException 
+     * @throws SecurityException 
+     */
+    public byte[] code(byte[] requestId) throws SecurityException, slbException {
+        // Envoi de l'APDU CODE
+        CLA = Integer.parseInt("69", 16);
+        INS = Integer.parseInt("10", 16);
+        P1 = Integer.parseInt("00", 16);
+        P2 = Integer.parseInt("00", 16);
+        body = Convertor.stringToIntArray("73119");
+        LE = Integer.parseInt("00", 16);
+        System.out.println(" body: " + requestId.toString());
 
-        jmdsIOPListener listener = new jmdsIOPListener();
-        sIOP.addIOPListener(listener);
+        sendCardAPDU(card, CLA, INS, P1, P2, body, LE);
 
-        String[] lstReaders = sIOP.ListReaders();
-
-        for (int i = 0; i < lstReaders.length; i++) {
-            System.out.println(lstReaders[i]);
-        }
-
-        SmartCard card = new SmartCard();
-        if (lstReaders.length > 0) {
-            boolean result = sIOP.Connect(card, lstReaders[0], false);
-            if (result) {
-            	//Initialisation
-            	int CLA = Integer.parseInt("00", 16);
-                int INS = Integer.parseInt("A4", 16);
-                int P1 = Integer.parseInt("04", 16);
-                int P2 = Integer.parseInt("00", 16);
-                int[] body = Convertor.stringToIntArray("11223344556677");
-                int LE = Integer.parseInt("00", 16);
-                sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
-                
-		        //Envoi de l'APDU CODE
-		        CLA = Integer.parseInt("69", 16);
-		        INS = Integer.parseInt("10", 16);
-		        P1 = Integer.parseInt("00", 16);
-		        P2 = Integer.parseInt("00", 16);
-		        body = Convertor.stringToIntArray("73119");
-		        LE = Integer.parseInt("00", 16);
-		        System.out.println (" body: " +requestId.toString());
-        
-		        sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
-		        
-		        //Envoi de l'APDU GETCODE
-		        System.out.print("Envoi de l'APDU Get Code: > ");
-		        CLA = (int) Integer.parseInt("69", 16);
-		        INS = (int) Integer.parseInt("11", 16);
-		        P1 = (int) Integer.parseInt("00", 16);
-		        P2 = (int) Integer.parseInt("00", 16);
-		        body = Convertor.stringToIntArray("");
-		        LE = (int) Integer.parseInt("20", 16);
-		        short [] code = sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
-		        if(code != null)
-		        	return Convertor.shortArrayToByteArray(code);
-            }
-        }
+        // Envoi de l'APDU GETCODE
+        System.out.print("Envoi de l'APDU Get Code: > ");
+        CLA = (int) Integer.parseInt("69", 16);
+        INS = (int) Integer.parseInt("11", 16);
+        P1 = (int) Integer.parseInt("00", 16);
+        P2 = (int) Integer.parseInt("00", 16);
+        body = Convertor.stringToIntArray("");
+        LE = (int) Integer.parseInt("20", 16);
+        short[] code = sendCardAPDU(card, CLA, INS, P1, P2, body, LE);
+        if (code != null)
+            return Convertor.shortArrayToByteArray(code);
         return null;
-	}
-	
-	/**
-	 * @param SC
-	 *            as the message service context
-	 * @return the request id of the message
-	 */
-	public byte[] decode (byte[] SC)
-	{
-//		Envoi de l'APDU CODE
+    }
+
+    /**
+     * @param SC
+     *            as the message service context
+     * @return the request id of the message
+     * @throws slbException 
+     * @throws SecurityException 
+     */
+    public byte[] decode(byte[] SC) throws SecurityException, slbException {
+        // Envoi de l'APDU CODE
         int CLA = Integer.parseInt("69", 16);
         int INS = Integer.parseInt("10", 16);
         int P1 = Integer.parseInt("00", 16);
         int P2 = Integer.parseInt("00", 16);
         int[] body = Convertor.stringToIntArray("6");
         int LE = Integer.parseInt("00", 16);
-        
+
         SmartCard card = new SmartCard();
-        sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
-        
-        //Envoi de l'APDU getCode
+        sendCardAPDU(card, CLA, INS, P1, P2, body, LE);
+
+        // Envoi de l'APDU getCode
         System.out.print("Envoi de l'APDU Get Code: > ");
         CLA = (int) Integer.parseInt("69", 16);
         INS = (int) Integer.parseInt("11", 16);
@@ -214,37 +141,89 @@
         P2 = (int) Integer.parseInt("00", 16);
         body = Convertor.stringToIntArray("");
         LE = (int) Integer.parseInt("20", 16);
-        short [] code = sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
-        
+        short[] code = sendCardAPDU(card, CLA, INS, P1, P2, body, LE);
+
         SC = Convertor.shortArrayToByteArray(code);
-		return SC;			
-	}
-	
-	
-	/**
-	 * @param card 
-	 * @param LE 
-	 * @param body 
-	 * @param P2 
-	 * @param P1 
-	 * @param INS 
-	 * @param CLA 
-	 * @return out the result of the sendCardAPDU call
-	 * 
-	 */
-	private short[] sendCardAPDU (SmartCard card, int CLA, int INS, int P1, int P2, int [] body, int LE)
-	{
-		short[] out=null;
-		try {
-            System.out.println("Applet Selection");
-            card.BeginTransaction();
-            out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
-            System.out.println("Applet selected");
-            card.EndTransaction();
-        } catch (slb.iop.slbException e) {
-            System.out.println("Pb de Selection");
-            e.printStackTrace();
-        }
+        return SC;
+    }
+
+    /**
+     * @param card
+     * @param LE
+     * @param body
+     * @param P2
+     * @param P1
+     * @param INS
+     * @param CLA
+     * @return out the result of the sendCardAPDU call
+     * @throws slbException
+     * 
+     */
+    private final static short[] sendCardAPDU(SmartCard card, int CLA, int INS,
+            int P1, int P2, int[] body, int LE) throws slbException,
+            SecurityException {
+        if (card == null)
+            throw new SecurityException("Pas de carte disponible !");
+
+        // Initialisation
+        card.BeginTransaction();
+        if (!card.SelectAID(APPLET_AID)) // A v?rifier. Je ne sais pas si ?a marche !!
+            throw new SecurityException("Pas d'applet de cryptage !");
+        // CLA = Integer.parseInt("00", 16);
+        // INS = Integer.parseInt("A4", 16);
+        // P1 = Integer.parseInt("04", 16);
+        // P2 = Integer.parseInt("00", 16);
+        // body = Convertor.stringToIntArray("11223344556677");
+        // LE = Integer.parseInt("00", 16);
+        // sendCardAPDU(card,CLA,INS,P1,P2,body,LE);
+        short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+        card.EndTransaction();
         return out;
-	}
+    }
+    
+    /**
+     * Recherche d'une carte ayant notre applet instanci?
+     */
+    private final static void findCard()
+    {
+        String[] lstReaders = APPLET_IOP.ListReaders();
+        int i = 0;
+        while ((i < lstReaders.length) && (card == null)) {
+            card = new SmartCard();
+            boolean result = APPLET_IOP.Connect(card, lstReaders[i], false);
+            if (result) {
+                short[] MACKey = Convertor.HexStringToShortArray("404142434445464748494A4B4C4D4E4F");
+                short[] autKey = Convertor.HexStringToShortArray("404142434445464748494A4B4C4D4E4F");
+                short[] KEKKey = Convertor.HexStringToShortArray("404142434445464748494A4B4C4D4E4F");
+
+                try {
+                    card.BeginTransaction();
+                    card.EstablishSecureChannel(MACKey, autKey, KEKKey);
+                    short shortAID[] = card.EnumerateAID((byte) 0x40);
+
+                    short[] shortListAID;
+
+                    int z = 0;
+                    for (int y = 0; y < shortAID.length; y = z) {
+                        shortListAID = new short[shortAID[y]];
+                        z = z + shortListAID.length + 3;
+                        for (int x = 0; x < shortListAID.length; x++) {
+                            shortListAID[x] = shortAID[x + y + 1];
+                        }
+
+                        if ((shortAID[z - 1] & (byte) 0x80) != 1) {
+                            if(!APPLET_AID.equals(shortListAID))
+                                card = null;
+                        }
+                    }
+
+                    card.EndTransaction();
+                } catch (slbException e) {
+                    card = null;
+                }
+            } else
+                card = null;
+            i++;
+        }
+    }
 }

Modified: trunk/src/de/berlios/jmds/tools/Convertor.java
===================================================================
--- trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/src/de/berlios/jmds/tools/Convertor.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -11,49 +11,24 @@
 package de.berlios.jmds.tools;
 
 /**
- * Permet la conversion de String en short[] et inversement
+ * Fournit des outils de conversions
  * 
  * @author J?r?me GUERS
  * 
  */
 public class Convertor {
-    
-	//----------------------------------------------------------//
-	//------------------- PUBLIC METHODS -----------------------//
-	//----------------------------------------------------------//    
-	
-	/**
-     * DOCME
-     * @param value 
-     * @return a table of short
-     */
-    public final static short[] stringToShortArray(String value) {
-        short shortKey[] = new short[(value.length() / 2)];
-        int y = 0;
-        String strShort;
 
-        for (int x = 0; x < shortKey.length; x++) {
-            strShort = value.substring(y, (y + 2));
-            if (strShort.equals("FF")) {
-                shortKey[x] = (short) 0xFF;
-            } else {
-                try {
-                    shortKey[x] = (short) Short.parseShort(strShort, 16);
-                } catch (NumberFormatException e) {
-                    System.out.println("HexStringToShortArray Failed ");
-                }
-            }
-            y = y + 2;
-        }
-        return shortKey;
-    }
-    
+    // ----------------------------------------------------------//
+    // ------------------- PUBLIC METHODS -----------------------//
+    // ----------------------------------------------------------//
+
     /**
      * DOCME
-     * @param value 
+     * 
+     * @param value
      * @return a table of int containing the stirng
      */
-    public static int[] stringToIntArray(String value) {
+    public final static int[] stringToIntArray(String value) {
         int intKey[] = new int[(value.length() / 2)];
         int y = 0;
         String strInt;
@@ -75,44 +50,69 @@
         return intKey;
     }
 
-	/**
-	 * @param context_data
-	 * @return string of the byte table
-	 */
-	public static String byteToString (byte [] context_data)
-	{
-		StringBuffer sb = new StringBuffer();
-		for(int i=0; i < context_data.length; i++) {
-			sb.append(context_data[i]);
-		}
-		return sb.toString();
-	}
+    /**
+     * @param context_data
+     * @return string of the byte table
+     */
+    public final static String byteToString(byte[] context_data) {
+        StringBuffer sb = new StringBuffer();
+        for (int i = 0; i < context_data.length; i++) {
+            sb.append(context_data[i]);
+        }
+        return sb.toString();
+    }
 
-	/**
-	 * @param code
-	 * @return a table of byte corresponding to the argument code
-	 */
-	public static byte [] shortArrayToByteArray (short [] code)
-	{
-		byte[] tmp = new byte[code.length];
-		for(int i=0; i<code.length; i++) {
-			Short s = new Short(code[i]);
-			tmp[i]=s.byteValue();
-		}
-		return tmp;
-	}
+    /**
+     * @param code
+     * @return a table of byte corresponding to the argument code
+     */
+    public final static byte[] shortArrayToByteArray(short[] code) {
+        byte[] tmp = new byte[code.length];
+        for (int i = 0; i < code.length; i++) {
+            Short s = new Short(code[i]);
+            tmp[i] = s.byteValue();
+        }
+        return tmp;
+    }
 
-	/**
-	 * @param requestId
-	 * @return the table of int
-	 */
-	public static int [] byteArrayToIntArray (byte [] requestId)
-	{
-		int[] tmp=null;
-		for(int i=0; i < requestId.length; i++) {
-			tmp[i] = new Byte (requestId[i]).intValue();
-		}
-		return tmp;
-	}
+    /**
+     * @param requestId
+     * @return the table of int
+     */
+    public final static int[] byteArrayToIntArray(byte[] requestId) {
+        int[] tmp = null;
+        for (int i = 0; i < requestId.length; i++) {
+            tmp[i] = new Byte(requestId[i]).intValue();
+        }
+        return tmp;
+    }
+
+    /**
+     * Parse la chaine en couple de deux chiffre et les converti en tableau de
+     * short
+     * 
+     * @param strHex
+     * @return
+     */
+    public final static short[] HexStringToShortArray(String strHex) {
+        short shortKey[] = new short[(strHex.length() / 2)];
+        int y = 0;
+        String strShort;
+
+        for (int x = 0; x < shortKey.length; x++) {
+            strShort = strHex.substring(y, (y + 2));
+            if (strShort.equals("FF")) {
+                shortKey[x] = (short) 0xFF;
+            } else {
+                try {
+                    shortKey[x] = (short) Short.parseShort(strShort, 16);
+                } catch (NumberFormatException e) {
+                    System.out.println("HexStringToShortArray Failed ");
+                }
+            }
+
+            y = y + 2;
+        }
+        return shortKey;
+    }
 }
-

Deleted: trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java
===================================================================
--- trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/test/de/berlios/jmds/applet/SCAppletWithKey.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -1,111 +0,0 @@
-/*
- * Created on 8 f?vr. 2005
- * by J?r?me GUERS
- * Copyright: GPL - UMLV(FR) - 2004/2005
- */
-package de.berlios.jmds.applet;
-
-import javacard.framework.APDU;
-import javacard.framework.Applet;
-import javacard.framework.ISOException;
-import javacard.framework.ISO7816;
-import javacard.security.KeyBuilder;
-import javacard.security.RSAPrivateKey;
-import javacard.security.RSAPublicKey;
-//import javacardx.crypto.*;
-
-/**
- * DOCME
- * 
- * @version 0.1
- * 
- * @author J?r?me GUERS
- */
-public class SCAppletWithKey extends Applet {
-
-    private final static byte CLA_SECURITY = (byte) 0x69;
-    private final static byte CODE = (byte) 0x10;
-    private final static byte GET_CODE = (byte) 0x20;
-    private final static byte DECODE = (byte) 0x30;
-    private final static byte GET_DECODE = (byte) 0x40;
-    private final static short BUFFER_LENGTH = (short) 255;
-
-    private byte[] buffer;
-    private byte[] code;
-    private short messLength;
-    
-    private RSAPrivateKey userKey;
-    private RSAPublicKey serverKey;
-    private RSAPrivateKey sessionKey;
-    //private Cipher cipher;
-    
-    /**
-     * Constructeur par d?faut
-     */
-    protected SCAppletWithKey() {
-        buffer = new byte[BUFFER_LENGTH];
-        code = new byte[BUFFER_LENGTH];
-        messLength = (byte) 0;
-        userKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
-        serverKey = (RSAPublicKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PUBLIC, KeyBuilder.LENGTH_RSA_512, true);
-        sessionKey = (RSAPrivateKey) KeyBuilder.buildKey(KeyBuilder.TYPE_RSA_PRIVATE, KeyBuilder.LENGTH_RSA_512, true);
-        //cipher = Cipher.getInstance(Cipher.ALG_RSA_ISO9796, false);
-        register();
-    }
-
-    /**
-     * @see javacard.framework.Applet#install(byte[], short, byte)
-     */
-    public static void install(byte[] bArray, short bOffset, byte bLength) {
-        new SCApplet();
-    }
-
-    /**
-     * M?thode appel?e ? l'arriv?e d'une trame APDU
-     * 
-     * @param apdu
-     * @throws ISOException
-     * 
-     * @see javacard.framework.Applet#process(javacard.framework.APDU)
-     */
-    public void process(APDU apdu) throws ISOException {
-        byte[] buffer = apdu.getBuffer();
-
-        // CLA ? 69
-        if (buffer[ISO7816.OFFSET_CLA] == CLA_SECURITY) {
-            switch (buffer[ISO7816.OFFSET_INS]) {
-                case CODE:
-                    encode(apdu);
-                    break;
-                
-                case GET_CODE:
-                    getEncode(apdu);
-                    break;
-
-                case DECODE:
-                    break;
-                    
-                case GET_DECODE:
-                    break;
-            }
-        }
-    }
-    
-    private void encode(APDU apdu)
-    {
-        messLength = apdu.setIncomingAndReceive();
-        byte[] requestID = new byte[messLength];
-        for (short i = 0; i < messLength; i++) {
-            requestID[i] = (byte)(buffer[(short)(i + ISO7816.OFFSET_CDATA)] & 0x10);
-        }
-        //cipher.init(userKey, Cipher.MODE_ENCRYPT);
-    }
-    
-    private void getEncode(APDU apdu)
-    {
-        if(apdu.setOutgoing() < messLength)
-            ISOException.throwIt(ISO7816.SW_WRONG_LENGTH);
-        
-        apdu.sendBytesLong(code, (short)0, messLength);
-    }
-}

Added: trunk/test/de/berlios/jmds/clients/TestSCApllet.java
===================================================================
--- trunk/test/de/berlios/jmds/clients/TestSCApllet.java	2005-02-25 20:55:20 UTC (rev 43)
+++ trunk/test/de/berlios/jmds/clients/TestSCApllet.java	2005-02-26 22:55:15 UTC (rev 44)
@@ -0,0 +1,79 @@
+/* 
+ * File    : SCManager.java
+ * Created : 18 f?vr. 2005
+ * 
+ * =======================================
+ * JMDS PROJECT ("http://jmds.berlios.de")
+ * =======================================
+ *
+ */
+package de.berlios.jmds.clients;
+
+import slb.iop.IOP;
+import slb.iop.SmartCard;
+import de.berlios.jmds.tools.Convertor;
+
+/**
+ * DOCME
+ * @author J?r?me GUERS
+ * 
+ */
+public class TestSCApllet{
+
+    public static void main(String[] args) {
+        IOP sIOP = new IOP();
+
+        String[] lstReaders = sIOP.ListReaders();
+
+        for (int i = 0; i < lstReaders.length; i++) {
+            System.out.println(lstReaders[i]);
+        }
+
+        SmartCard card = new SmartCard();
+        if (lstReaders.length > 0) {
+            boolean result = sIOP.Connect(card, lstReaders[0], false);
+            if (result) {
+                System.out.println("Carte connectee");
+
+                int CLA = Integer.parseInt("00", 16);
+                int INS = Integer.parseInt("A4", 16);
+                int P1 = Integer.parseInt("04", 16);
+                int P2 = Integer.parseInt("00", 16);
+                int[] body = Convertor.stringToIntArray("11223344556677");
+                int LE = Integer.parseInt("00", 16);
+                try {
+                    System.out.println("Applet Selection");
+                    card.BeginTransaction();
+                    card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    System.out.println("Applet selected");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Pb de Selection");
+                    e.printStackTrace();
+                }
+
+                System.out.println("Demande d'encodage");
+                CLA = Integer.parseInt("69", 16);
+                INS = Integer.parseInt("10", 16);
+                P1 = Integer.parseInt("00", 16);
+                P2 = Integer.parseInt("00", 16);
+                body = Convertor.stringToIntArray("102030");
+                LE = Integer.parseInt("FF", 16);
+
+                try {
+                    card.BeginTransaction();
+                    short[] out = card.SendCardAPDU(CLA, INS, P1, P2, body, LE);
+                    for (int i = 0; i < out.length; i++) {
+                        System.out.print(Integer.toHexString(out[i]) + " ");
+                    }
+                    System.out.println("");
+                    card.EndTransaction();
+                } catch (slb.iop.slbException e) {
+                    System.out.println("Erreur codage");
+                    e.printStackTrace();
+                }
+            }
+        }
+    }
+}
+



